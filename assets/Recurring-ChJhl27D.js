import{r as o,aF as ye,aG as ve,j as e,f as B,a3 as J,a4 as pe,g as Se,w as De,x as Le,L as Me,T as Ee,aH as Ae,aI as Te,aJ as he,aK as be,aL as fe,aM as Pe,aN as Re}from"./index-DidX2qV_.js";function Ie(){const[s,v]=o.useState([]),[E,A]=o.useState([]),[w,p]=o.useState(!0),[g,h]=o.useState(null),i=o.useCallback(async()=>{try{p(!0),h(null);const[l,n]=await Promise.all([ye(),ve()]);v(l.recurring||[]),A(n.occurrences||[])}catch(l){h(l.message),console.error("Error fetching recurring transactions:",l)}finally{p(!1)}},[]);o.useEffect(()=>{i()},[i]);const T=async()=>{try{p(!0),h(null);const[l,n]=await Promise.all([ye(),ve()]);v(l.recurring||[]),A(n.occurrences||[])}catch(l){h(l.message)}finally{p(!1)}},c=s.filter(l=>l.isActive&&!l.isPaused),H=s.filter(l=>l.isActive&&l.isPaused),S=s.filter(l=>!l.isActive),u=s.filter(l=>l.type==="expense"),f=s.filter(l=>l.type==="income"),D=s.filter(l=>l.type==="transfer"),P=l=>{const n=l.frequency,m=l.amount;switch(n==null?void 0:n.type){case"daily":return m*30;case"weekly":return m*4;case"biweekly":return m*2;case"monthly":return m;case"bimonthly":return m/2;case"quarterly":return m/3;case"biannual":return m/6;case"yearly":return m/12;case"custom_days":return m*(30/(n.interval||30));default:return m}},F=c.filter(l=>l.type==="expense").reduce((l,n)=>l+P(n),0),j=c.filter(l=>l.type==="income").reduce((l,n)=>l+P(n),0),$=j-F;return{recurring:s,activeRecurring:c,pausedRecurring:H,inactiveRecurring:S,expenseRecurring:u,incomeRecurring:f,transferRecurring:D,pendingOccurrences:E,monthlyExpenseTotal:F,monthlyIncomeTotal:j,monthlyBalance:$,getUpcomingOccurrences:()=>{const l=new Date,n=new Date(l);return n.setDate(l.getDate()+7),c.filter(m=>{if(!m.nextExecutionDate)return!1;const x=new Date(m.nextExecutionDate);return x>=l&&x<=n}).sort((m,x)=>new Date(m.nextExecutionDate)-new Date(x.nextExecutionDate))},loading:w,error:g,refetch:T}}const Oe=s=>{if(!s)return"Sin frecuencia";switch(s.type){case"daily":return"Diario";case"weekly":return`Semanal (${["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"][s.dayOfWeek]||"Lun"})`;case"biweekly":return"Quincenal";case"monthly":return`Mensual (dÃ­a ${s.day||1})`;case"bimonthly":return`Bimestral (dÃ­a ${s.day||1})`;case"quarterly":return`Trimestral (dÃ­a ${s.day||1})`;case"biannual":return"Semestral";case"yearly":return"Anual";case"custom_days":return`Cada ${s.interval||30} dÃ­as`;default:return"Personalizado"}},Be=s=>s?new Date(s+"T12:00:00").toLocaleDateString("es-AR",{day:"numeric",month:"short"}):"-";function Fe({recurring:s,onClick:v,onPause:E,selectMode:A,isSelected:w}){const p=s.type==="expense",g=s.type==="income",h=s.type==="transfer",i=p?"var(--accent-red)":g?"var(--accent-green)":"var(--accent-blue)",T=p?"Gasto":g?"Ingreso":"Transferencia";return e.jsxs("div",{onClick:v,className:`
        relative p-4 rounded-2xl cursor-pointer transition-all duration-200
        hover:scale-[1.01] active:scale-[0.99]
        ${s.isPaused?"opacity-60":""}
      `,style:{backgroundColor:"var(--bg-secondary)",border:`1px solid ${w?"var(--accent-primary)":"var(--border-subtle)"}`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:`color-mix(in srgb, ${i} 15%, transparent)`,color:i},children:T}),s.isPaused&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:"Pausado"}),s.isCreditCardRecurring&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"var(--accent-purple-dim)",color:"var(--accent-purple)"},children:"Tarjeta"}),s.creationMode==="bot_confirmation"&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"var(--accent-blue-dim)",color:"var(--accent-blue)"},children:s.preferredBot==="telegram"?"TG":"WA"})]}),e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-base truncate flex-1 mr-2",style:{color:"var(--text-primary)"},children:s.name}),e.jsxs("span",{className:"font-bold text-lg whitespace-nowrap",style:{color:i},children:[p?"-":g?"+":"",B(s.amount,s.currency==="USD"?"DÃ³lar":"Peso")]})]}),e.jsxs("div",{className:"space-y-1.5",children:[h?e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),e.jsxs("span",{className:"truncate",children:[s.fromAccountName," â†’ ",s.toAccountName]})]}):e.jsxs(e.Fragment,{children:[s.accountName&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),e.jsx("span",{className:"truncate",children:s.accountName})]}),s.categoryName&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"truncate",children:s.categoryName})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:Oe(s.frequency)})]})]}),s.nextExecutionDate&&!s.isPaused&&e.jsxs("div",{className:"mt-3 pt-3 flex items-center justify-between",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:"PrÃ³xima ejecuciÃ³n"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:Be(s.nextExecutionDate)})]}),s.stats&&e.jsxs("div",{className:"mt-3 pt-3 grid grid-cols-2 gap-2",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs block",style:{color:"var(--text-muted)"},children:"Total pagado"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:B(s.stats.totalPaid,s.currency==="USD"?"DÃ³lar":"Peso")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs block",style:{color:"var(--text-muted)"},children:"Ejecuciones"}),e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[s.stats.confirmedCount,s.stats.skippedCount>0&&e.jsxs("span",{className:"text-xs ml-1",style:{color:"var(--text-muted)"},children:["(",s.stats.skippedCount," saltadas)"]})]})]})]}),!A&&E&&e.jsx("button",{onClick:c=>{c.stopPropagation(),E(s)},className:"absolute top-3 right-3 p-1.5 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:"var(--text-muted)"},title:s.isPaused?"Reanudar":"Pausar",children:s.isPaused?e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}const je=[{value:"daily",label:"Diario"},{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quincenal"},{value:"monthly",label:"Mensual"},{value:"bimonthly",label:"Bimestral"},{value:"quarterly",label:"Trimestral"},{value:"biannual",label:"Semestral"},{value:"yearly",label:"Anual"},{value:"custom_days",label:"Personalizado"}],We=[{value:0,label:"Domingo"},{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"MiÃ©rcoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"SÃ¡bado"}],ze=[{value:"as_is",label:"Se crea igual"},{value:"previous_business_day",label:"DÃ­a hÃ¡bil anterior"},{value:"next_business_day",label:"DÃ­a hÃ¡bil siguiente"}],_e=[{value:"automatic",label:"AutomÃ¡tico",description:"Se crea solo sin preguntar"},{value:"bot_confirmation",label:"ConfirmaciÃ³n por bot",description:"Te notifica y espera tu confirmaciÃ³n"},{value:"manual_confirmation",label:"ConfirmaciÃ³n manual",description:"Debes confirmar desde la web"}];function qe({recurring:s,accounts:v,categories:E,onSave:A,onDelete:w,onClose:p,loading:g}){var oe,ne,ce,ie,de,me,xe;const h=!!s,[i,T]=o.useState(1),[c,H]=o.useState((s==null?void 0:s.type)||"expense"),[S,u]=o.useState((s==null?void 0:s.name)||""),[f,D]=o.useState(((oe=s==null?void 0:s.amount)==null?void 0:oe.toString())||""),[P,F]=o.useState((s==null?void 0:s.currency)||"ARS"),[j,$]=o.useState((s==null?void 0:s.accountId)||""),[R,l]=o.useState((s==null?void 0:s.categoryId)||""),[n,m]=o.useState((s==null?void 0:s.fromAccountId)||""),[x,k]=o.useState((s==null?void 0:s.toAccountId)||""),[W,d]=o.useState(((ne=s==null?void 0:s.toAmount)==null?void 0:ne.toString())||""),[y,K]=o.useState(((ce=s==null?void 0:s.frequency)==null?void 0:ce.type)||"monthly"),[z,b]=o.useState(((ie=s==null?void 0:s.frequency)==null?void 0:ie.day)||1),[_,Q]=o.useState(((de=s==null?void 0:s.frequency)==null?void 0:de.dayOfWeek)||1),[G,Y]=o.useState(((me=s==null?void 0:s.frequency)==null?void 0:me.interval)||30),[I,X]=o.useState((s==null?void 0:s.weekendHandling)||"as_is"),[L,U]=o.useState((s==null?void 0:s.startDate)||new Date().toISOString().split("T")[0]),[V,Z]=o.useState((s==null?void 0:s.endDate)||""),[O,ee]=o.useState(!!(s!=null&&s.endDate)),[C,t]=o.useState((s==null?void 0:s.creationMode)||"automatic"),[r,M]=o.useState((s==null?void 0:s.preferredBot)||"telegram"),[N,ge]=o.useState((s==null?void 0:s.isCreditCardRecurring)||!1),[te,Ne]=o.useState((s==null?void 0:s.description)||""),q=v==null?void 0:v.find(a=>a.id===j),re=(q==null?void 0:q.esTarjetaCredito)||(q==null?void 0:q.is_credit_card),se=(v||[]).filter(a=>c==="transfer"||!a.esTarjetaCredito||N).map(a=>({value:a.id,label:a.nombre||a.name,icon:a.icon||null})),ke=(E||[]).filter(a=>c==="income"?a.tipo==="Ingreso"||a.type==="income":c==="expense"?a.tipo==="Gasto"||a.type==="expense":!0).map(a=>({value:a.id,label:a.nombre||a.name,icon:a.icon||null})),Ce=()=>{const a={type:y};switch(y){case"weekly":case"biweekly":a.dayOfWeek=_;break;case"monthly":case"bimonthly":case"quarterly":case"biannual":a.day=z;break;case"yearly":const ue=new Date(L);a.month=ue.getMonth()+1,a.day=ue.getDate();break;case"custom_days":a.interval=G;break}return a},we=()=>{if(!S.trim()||!f||parseFloat(f)<=0)return;const a={id:s==null?void 0:s.id,name:S.trim(),description:te.trim()||null,amount:parseFloat(f),currency:P,type:c,frequency:Ce(),weekendHandling:I,startDate:L,endDate:O?V:null,creationMode:C,preferredBot:C==="bot_confirmation"?r:null,isCreditCardRecurring:c==="expense"&&re?N:!1};c==="transfer"?(a.fromAccountId=n,a.toAccountId=x,a.toAmount=W?parseFloat(W):null):(a.accountId=j,a.categoryId=R),A(a)},le=()=>{switch(i){case 1:return S.trim()&&f&&parseFloat(f)>0;case 2:return c==="transfer"?n&&x:j;case 3:return y;case 4:return L;default:return!0}},ae=5;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md animate-fade-in",onClick:p}),e.jsxs("div",{className:"relative w-full max-w-lg max-h-[90vh] overflow-hidden rounded-2xl animate-scale-in flex flex-col",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--accent-purple-dim)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--accent-purple)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",style:{color:"var(--text-primary)"},children:h?"Editar recurrente":"Nueva transacciÃ³n recurrente"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:["Paso ",i," de ",ae]})]})]}),e.jsx("button",{onClick:p,className:"p-2 rounded-xl transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:"var(--text-secondary)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"h-1 bg-[var(--bg-tertiary)]",children:e.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${i/ae*100}%`,backgroundColor:"var(--accent-primary)"}})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Tipo de transacciÃ³n"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"expense",label:"Gasto",color:"var(--accent-red)"},{value:"income",label:"Ingreso",color:"var(--accent-green)"},{value:"transfer",label:"Transferencia",color:"var(--accent-blue)"}].map(a=>e.jsx("button",{onClick:()=>H(a.value),className:"px-3 py-2.5 rounded-xl text-sm font-medium transition-all",style:{backgroundColor:c===a.value?`color-mix(in srgb, ${a.color} 15%, transparent)`:"var(--bg-tertiary)",color:c===a.value?a.color:"var(--text-secondary)",border:c===a.value?`1px solid ${a.color}`:"1px solid transparent"},children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Nombre *"}),e.jsx("input",{type:"text",value:S,onChange:a=>u(a.target.value),placeholder:"ej: Netflix, Alquiler, Sueldo...",className:"w-full px-4 py-3 rounded-xl text-sm transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Monto *"}),e.jsx("input",{type:"number",value:f,onChange:a=>D(a.target.value),placeholder:"0.00",min:"0",step:"0.01",className:"w-full px-4 py-3 rounded-xl text-sm transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Moneda"}),e.jsxs("select",{value:P,onChange:a=>F(a.target.value),className:"w-full px-4 py-3 rounded-xl text-sm transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"},children:[e.jsx("option",{value:"ARS",children:"ARS"}),e.jsx("option",{value:"USD",children:"USD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"DescripciÃ³n (opcional)"}),e.jsx("textarea",{value:te,onChange:a=>Ne(a.target.value),placeholder:"Notas adicionales...",rows:2,className:"w-full px-4 py-3 rounded-xl text-sm transition-colors resize-none",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}})]})]}),i===2&&e.jsx(e.Fragment,{children:c==="transfer"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Cuenta origen *"}),e.jsx(J,{options:se,value:n,onChange:m,placeholder:"Seleccionar cuenta...",defaultOptionIcon:"ðŸ’³"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Cuenta destino *"}),e.jsx(J,{options:se.filter(a=>a.value!==n),value:x,onChange:k,placeholder:"Seleccionar cuenta...",defaultOptionIcon:"ðŸ’³"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Monto destino (si difiere)"}),e.jsx("input",{type:"number",value:W,onChange:a=>d(a.target.value),placeholder:f||"0.00",min:"0",step:"0.01",className:"w-full px-4 py-3 rounded-xl text-sm transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Cuenta *"}),e.jsx(J,{options:se,value:j,onChange:$,placeholder:"Seleccionar cuenta...",defaultOptionIcon:"ðŸ’³"})]}),c==="expense"&&re&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("button",{onClick:()=>ge(!N),className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",style:{borderColor:N?"var(--accent-primary)":"var(--border-subtle)",backgroundColor:N?"var(--accent-primary)":"transparent"},children:N&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Gasto de tarjeta recurrente"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Se replica automÃ¡ticamente en cada resumen"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"CategorÃ­a"}),e.jsx(J,{options:ke,value:R,onChange:l,placeholder:"Seleccionar categorÃ­a..."})]})]})}),i===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Frecuencia *"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:je.map(a=>e.jsx("button",{onClick:()=>K(a.value),className:"px-3 py-2.5 rounded-xl text-sm font-medium transition-all",style:{backgroundColor:y===a.value?"var(--accent-primary-dim)":"var(--bg-tertiary)",color:y===a.value?"var(--accent-primary)":"var(--text-secondary)",border:y===a.value?"1px solid var(--accent-primary)":"1px solid transparent"},children:a.label},a.value))})]}),(y==="weekly"||y==="biweekly")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"DÃ­a de la semana"}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:We.map(a=>e.jsx("button",{onClick:()=>Q(a.value),className:"px-2 py-2 rounded-lg text-xs font-medium transition-all",style:{backgroundColor:_===a.value?"var(--accent-primary)":"var(--bg-tertiary)",color:_===a.value?"white":"var(--text-secondary)"},children:a.label.slice(0,3)},a.value))})]}),["monthly","bimonthly","quarterly","biannual"].includes(y)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"DÃ­a del mes"}),e.jsx("input",{type:"number",value:z,onChange:a=>b(Math.min(31,Math.max(1,parseInt(a.target.value)||1))),min:"1",max:"31",className:"w-full px-4 py-3 rounded-xl text-sm transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"Si el dÃ­a no existe, se usa el Ãºltimo del mes"})]}),y==="custom_days"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Cada cuÃ¡ntos dÃ­as"}),e.jsx("input",{type:"number",value:G,onChange:a=>Y(Math.max(1,parseInt(a.target.value)||1)),min:"1",className:"w-full px-4 py-3 rounded-xl text-sm transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Si cae en fin de semana o feriado"}),e.jsx("div",{className:"space-y-2",children:ze.map(a=>e.jsxs("button",{onClick:()=>X(a.value),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all",style:{backgroundColor:I===a.value?"var(--accent-primary-dim)":"var(--bg-tertiary)",border:I===a.value?"1px solid var(--accent-primary)":"1px solid transparent"},children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center",style:{borderColor:I===a.value?"var(--accent-primary)":"var(--border-subtle)"},children:I===a.value&&e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--accent-primary)"}})}),e.jsx("span",{className:"text-sm",style:{color:I===a.value?"var(--accent-primary)":"var(--text-secondary)"},children:a.label})]},a.value))})]})]}),i===4&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Fecha de inicio *"}),e.jsx(pe,{value:L,onChange:U,placeholder:"Seleccionar fecha..."})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("button",{onClick:()=>ee(!O),className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",style:{borderColor:O?"var(--accent-primary)":"var(--border-subtle)",backgroundColor:O?"var(--accent-primary)":"transparent"},children:O&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:"Tiene fecha de fin"})]}),O&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Fecha de fin"}),e.jsx(pe,{value:V,onChange:Z,placeholder:"Seleccionar fecha...",minDate:L})]})]}),i===5&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Modo de creaciÃ³n"}),e.jsx("div",{className:"space-y-2",children:_e.map(a=>e.jsxs("button",{onClick:()=>t(a.value),className:"w-full flex items-start gap-3 px-4 py-3 rounded-xl text-left transition-all",style:{backgroundColor:C===a.value?"var(--accent-primary-dim)":"var(--bg-tertiary)",border:C===a.value?"1px solid var(--accent-primary)":"1px solid transparent"},children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center mt-0.5",style:{borderColor:C===a.value?"var(--accent-primary)":"var(--border-subtle)"},children:C===a.value&&e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--accent-primary)"}})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium block",style:{color:C===a.value?"var(--accent-primary)":"var(--text-primary)"},children:a.label}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:a.description})]})]},a.value))})]}),C==="bot_confirmation"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Bot preferido"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>M("telegram"),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-medium transition-all",style:{backgroundColor:r==="telegram"?"var(--accent-blue-dim)":"var(--bg-tertiary)",color:r==="telegram"?"var(--accent-blue)":"var(--text-secondary)",border:r==="telegram"?"1px solid var(--accent-blue)":"1px solid transparent"},children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18 1.897-.962 6.502-1.359 8.627-.168.9-.5 1.201-.82 1.23-.697.064-1.226-.461-1.901-.903-1.056-.692-1.653-1.123-2.678-1.799-1.185-.781-.417-1.21.258-1.911.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.139-5.062 3.345-.479.329-.913.489-1.302.481-.428-.009-1.252-.242-1.865-.442-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.831-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635.099-.002.321.023.465.142.121.099.154.232.17.325.015.094.034.31.019.478z"})}),"Telegram"]}),e.jsxs("button",{onClick:()=>M("whatsapp"),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-medium transition-all",style:{backgroundColor:r==="whatsapp"?"var(--accent-green-dim)":"var(--bg-tertiary)",color:r==="whatsapp"?"var(--accent-green)":"var(--text-secondary)",border:r==="whatsapp"?"1px solid var(--accent-green)":"1px solid transparent"},children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl space-y-2",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",style:{color:"var(--text-primary)"},children:"Resumen"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Nombre:"}),e.jsx("span",{style:{color:"var(--text-primary)"},children:S})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Monto:"}),e.jsx("span",{style:{color:"var(--text-primary)"},children:B(parseFloat(f)||0,P==="USD"?"DÃ³lar":"Peso")})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Frecuencia:"}),e.jsx("span",{style:{color:"var(--text-primary)"},children:(xe=je.find(a=>a.value===y))==null?void 0:xe.label})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Inicio:"}),e.jsx("span",{style:{color:"var(--text-primary)"},children:new Date(L+"T12:00:00").toLocaleDateString("es-AR")})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t",style:{borderColor:"var(--border-subtle)"},children:[e.jsx("div",{children:i>1&&e.jsx("button",{onClick:()=>T(i-1),className:"px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Anterior"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&i===1&&e.jsx("button",{onClick:()=>w(s),disabled:g,className:"px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-red-dim)",color:"var(--accent-red)"},children:"Eliminar"}),i<ae?e.jsx("button",{onClick:()=>T(i+1),disabled:!le(),className:"px-6 py-2.5 rounded-xl text-sm font-medium transition-colors disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Siguiente"}):e.jsx("button",{onClick:we,disabled:g||!le(),className:"px-6 py-2.5 rounded-xl text-sm font-medium transition-colors disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:g?"Guardando...":h?"Guardar cambios":"Crear recurrente"})]})]})]})]})}function $e(){const{showError:s}=Se(),{recurring:v,activeRecurring:E,pausedRecurring:A,pendingOccurrences:w,monthlyExpenseTotal:p,monthlyIncomeTotal:g,monthlyBalance:h,getUpcomingOccurrences:i,loading:T,refetch:c}=Ie(),{accounts:H}=De(),{categoriesWithId:S}=Le(),[u,f]=o.useState("active"),[D,P]=o.useState("all"),[F,j]=o.useState(null),[$,R]=o.useState(!1),[l,n]=o.useState(!1),[m,x]=o.useState(null),[k,W]=o.useState(!1),[d,y]=o.useState(new Set),[K,z]=o.useState(!1),b=o.useMemo(()=>{let t=v;switch(u){case"active":t=t.filter(r=>r.isActive&&!r.isPaused);break;case"paused":t=t.filter(r=>r.isActive&&r.isPaused);break;case"inactive":t=t.filter(r=>!r.isActive);break}return D!=="all"&&(t=t.filter(r=>r.type===D)),t},[u,D,v]),_=i(),Q=async t=>{try{n(!0),t.id?(await Pe(t),x({message:"Recurrente actualizado",type:"success"})):(await Re(t),x({message:"Recurrente creado",type:"success"})),R(!1),j(null),await c()}catch(r){console.error("Error saving recurring:",r),s("Error",r.message||"No se pudo guardar el recurrente")}finally{n(!1)}},G=async t=>{try{n(!0),await fe(t.id),x({message:"Recurrente eliminado",type:"success"}),j(null),await c()}catch(r){console.error("Error deleting recurring:",r),s("Error",r.message||"No se pudo eliminar el recurrente")}finally{n(!1)}},Y=async t=>{try{t.isPaused?(await he(t.id),x({message:"Recurrente reanudado",type:"success"})):(await be(t.id),x({message:"Recurrente pausado",type:"success"})),await c()}catch(r){console.error("Error toggling pause:",r),s("Error",r.message||"No se pudo cambiar el estado")}},I=async t=>{try{await Ae(t.id),x({message:"Movimiento creado",type:"success"}),await c()}catch(r){console.error("Error confirming:",r),s("Error",r.message||"No se pudo confirmar")}},X=async t=>{try{await Te(t.id),x({message:"Ocurrencia saltada",type:"success"}),await c()}catch(r){console.error("Error skipping:",r),s("Error",r.message||"No se pudo saltar")}},L=()=>{W(!k),y(new Set)},U=t=>{const r=new Set(d);r.has(t)?r.delete(t):r.add(t),y(r)},V=()=>{d.size===b.length?y(new Set):y(new Set(b.map(t=>t.id)))},Z=async()=>{try{n(!0);const t=Array.from(d).map(r=>fe(r));await Promise.all(t),x({message:`${d.size} recurrente${d.size!==1?"s":""} eliminado${d.size!==1?"s":""}`,type:"success"}),y(new Set),W(!1),z(!1),await c()}catch(t){console.error("Error deleting:",t),s("Error",t.message||"No se pudieron eliminar")}finally{n(!1)}},O=async()=>{try{n(!0);const t=Array.from(d).map(r=>{const M=b.find(N=>N.id===r);return M!=null&&M.isPaused?he(r):be(r)});await Promise.all(t),x({message:"Estado actualizado",type:"success"}),y(new Set),W(!1),await c()}catch(t){console.error("Error pausing:",t),s("Error",t.message||"No se pudo cambiar el estado")}finally{n(!1)}},ee=[{id:"active",label:"Activos",count:E.length},{id:"paused",label:"Pausados",count:A.length},{id:"all",label:"Todos",count:v.length}],C=[{id:"all",label:"Todos"},{id:"expense",label:"Gastos",color:"var(--accent-red)"},{id:"income",label:"Ingresos",color:"var(--accent-green)"},{id:"transfer",label:"Transferencias",color:"var(--accent-blue)"}];return T?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Me,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Transacciones Recurrentes"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Suscripciones, alquiler, sueldo y mÃ¡s"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v.length>0&&!k&&e.jsx("button",{onClick:L,className:"p-2 rounded-xl transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},title:"SelecciÃ³n mÃºltiple",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h7M4 12h7m-7 7h7m5-14v14m0-14l3 3m-3-3l-3 3m3 11l3-3m-3 3l-3-3"})})}),!k&&e.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Nuevo recurrente"}),e.jsx("span",{className:"sm:hidden",children:"Nuevo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-2xl",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:"Gastos mensuales"}),e.jsx("p",{className:"text-lg font-bold",style:{color:"var(--accent-red)"},children:B(p,"Peso")})]}),e.jsxs("div",{className:"p-4 rounded-2xl",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:"Ingresos mensuales"}),e.jsx("p",{className:"text-lg font-bold",style:{color:"var(--accent-green)"},children:B(g,"Peso")})]}),e.jsxs("div",{className:"p-4 rounded-2xl",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:"Balance mensual"}),e.jsx("p",{className:"text-lg font-bold",style:{color:h>=0?"var(--accent-green)":"var(--accent-red)"},children:B(h,"Peso")})]})]}),w.length>0&&e.jsxs("div",{className:"p-4 rounded-2xl",style:{backgroundColor:"var(--accent-yellow-dim)",border:"1px solid var(--accent-yellow)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--accent-yellow)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("h3",{className:"font-semibold",style:{color:"var(--accent-yellow)"},children:["Pendientes de confirmaciÃ³n (",w.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:w.slice(0,3).map(t=>{var r,M,N;return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",style:{color:"var(--text-primary)"},children:(r=t.recurring)==null?void 0:r.name}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:[B((M=t.recurring)==null?void 0:M.amount,((N=t.recurring)==null?void 0:N.currency)==="USD"?"DÃ³lar":"Peso")," â€¢ ",new Date(t.scheduled_date+"T12:00:00").toLocaleDateString("es-AR",{day:"numeric",month:"short"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(t),className:"px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:"var(--accent-green-dim)",color:"var(--accent-green)"},children:"Confirmar"}),e.jsx("button",{onClick:()=>X(t),className:"px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Saltar"})]})]},t.id)})})]}),_.length>0&&e.jsxs("div",{className:"p-4 rounded-2xl",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"font-semibold mb-3",style:{color:"var(--text-primary)"},children:"PrÃ³ximos 7 dÃ­as"}),e.jsx("div",{className:"space-y-2",children:_.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2",style:{borderBottom:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.type==="expense"?"var(--accent-red)":t.type==="income"?"var(--accent-green)":"var(--accent-blue)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:t.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:B(t.amount,t.currency==="USD"?"DÃ³lar":"Peso")}),e.jsx("span",{className:"text-xs block",style:{color:"var(--text-muted)"},children:new Date(t.nextExecutionDate+"T12:00:00").toLocaleDateString("es-AR",{day:"numeric",month:"short"})})]})]},t.id))})]}),k&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--accent-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:L,className:"p-2 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:"var(--text-secondary)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:"var(--text-secondary)"},children:[e.jsx("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",style:{borderColor:d.size===b.length&&b.length>0?"var(--accent-primary)":"var(--border-subtle)",backgroundColor:d.size===b.length&&b.length>0?"var(--accent-primary)":"transparent"},children:d.size===b.length&&b.length>0&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),"Todos"]}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[d.size," seleccionado",d.size!==1?"s":""]})]}),d.size>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Pausar/Reanudar"}),e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-red-dim)",color:"var(--accent-red)"},children:["Eliminar (",d.size,")"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("div",{className:"flex gap-1 p-1 rounded-xl flex-1",style:{backgroundColor:"var(--bg-secondary)"},children:ee.map(t=>e.jsxs("button",{onClick:()=>f(t.id),className:`
                flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex-1
                ${u===t.id?"shadow-sm":"hover:opacity-80"}
              `,style:{backgroundColor:u===t.id?"var(--bg-primary)":"transparent",color:u===t.id?"var(--text-primary)":"var(--text-muted)"},children:[t.label,t.count>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-xs",style:{backgroundColor:u===t.id?"var(--accent-primary-dim)":"var(--bg-tertiary)",color:u===t.id?"var(--accent-primary)":"var(--text-muted)"},children:t.count})]},t.id))}),e.jsx("div",{className:"flex gap-1 p-1 rounded-xl",style:{backgroundColor:"var(--bg-secondary)"},children:C.map(t=>e.jsx("button",{onClick:()=>P(t.id),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:D===t.id?"var(--bg-primary)":"transparent",color:D===t.id?t.color||"var(--text-primary)":"var(--text-muted)"},children:t.label},t.id))})]}),b.length===0?e.jsxs("div",{className:"rounded-2xl p-8 text-center",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--text-muted)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:[u==="active"&&"No hay recurrentes activos",u==="paused"&&"No hay recurrentes pausados",u==="all"&&"No hay transacciones recurrentes"]}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--text-muted)"},children:u==="all"||u==="active"?"Crea tu primera transacciÃ³n recurrente":"Los recurrentes pausados aparecerÃ¡n aquÃ­"}),(u==="all"||u==="active")&&e.jsx("button",{onClick:()=>R(!0),className:"px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"+ Crear recurrente"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(t=>e.jsxs("div",{className:"relative",children:[k&&e.jsx("button",{onClick:()=>U(t.id),className:"absolute top-3 left-3 z-10 w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all",style:{borderColor:d.has(t.id)?"var(--accent-primary)":"var(--border-subtle)",backgroundColor:d.has(t.id)?"var(--accent-primary)":"var(--bg-secondary)"},children:d.has(t.id)&&e.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx(Fe,{recurring:t,onClick:()=>k?U(t.id):j(t),onPause:k?void 0:Y,selectMode:k,isSelected:d.has(t.id)})]},t.id))}),($||F)&&e.jsx(qe,{recurring:F,accounts:H,categories:S,onSave:Q,onDelete:G,onClose:()=>{R(!1),j(null)},loading:l}),m&&e.jsx(Ee,{message:m.message,type:m.type,onClose:()=>x(null)}),K&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md animate-fade-in",onClick:()=>z(!1)}),e.jsx("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"rgba(255, 92, 114, 0.12)",boxShadow:"0 0 30px rgba(255, 92, 114, 0.2)"},children:e.jsx("svg",{className:"w-8 h-8",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"var(--text-primary)"},children:"Eliminar recurrentes"}),e.jsxs("p",{className:"text-sm mb-5",style:{color:"var(--text-secondary)"},children:["Â¿EstÃ¡s seguro de que quieres eliminar ",d.size," recurrente",d.size!==1?"s":"","?",e.jsx("br",{}),e.jsx("span",{className:"text-xs mt-1 inline-block",style:{color:"var(--text-muted)"},children:"Los movimientos ya creados no se eliminarÃ¡n"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>z(!1),className:"flex-1 py-3.5 rounded-xl font-semibold transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.98]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:Z,disabled:l,className:"flex-1 py-3.5 rounded-xl font-semibold text-white transition-all duration-200 hover:opacity-90 active:scale-[0.98] disabled:opacity-50",style:{backgroundColor:"var(--accent-red)",boxShadow:"0 4px 20px rgba(255, 92, 114, 0.3)"},children:l?"Eliminando...":"Eliminar"})]})]})})]})]})}export{$e as default};
