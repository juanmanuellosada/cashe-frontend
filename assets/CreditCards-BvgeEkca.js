import{r as n,j as e,a5 as de,ag as ze,a4 as lt,g as ct,n as it,o as dt,W as mt,p as ut,ah as xt,ai as ht,b as Y,h as pt,L as yt,i as Fe,a as He,f as k,a6 as gt,E as ft,X as vt,c as ie,C as bt,v as B,D as C,A as jt,aj as Nt,ak as kt,al as Ct,q as wt,w as St,_ as Dt}from"./index-Eh7_dahB.js";function Mt({isOpen:g,onClose:U,statement:oe,attachments:x,onSave:me,onRemove:T,saving:I}){const[w,Z]=n.useState(null),[A,X]=n.useState(null),a=n.useRef(null),S=n.useRef(null),[m,W]=n.useState(0),[ee,P]=n.useState(!1),ae=n.useRef(0);n.useEffect(()=>{g&&(W(0),P(!1))},[g]);const q=r=>{r.target.closest("[data-drag-handle]")&&(ae.current=r.touches[0].clientY,P(!0))},d=r=>{if(!ee)return;const y=r.touches[0].clientY-ae.current;y>0&&W(y)},J=()=>{ee&&(m>100&&!I&&U(),W(0),P(!1))};if(!g||!oe)return null;const z=r=>y=>{var G;const p=(G=y.target.files)==null?void 0:G[0];if(p){if(p.size>5*1024*1024){alert("El archivo es demasiado grande. Maximo 5MB.");return}r(p)}},te=async()=>{!w&&!A||(await me({statementFile:w,receiptFile:A}),Z(null),X(null),a.current&&(a.current.value=""),S.current&&(S.current.value=""))},F=async r=>{await T(r)},H=x==null?void 0:x.statementUrl,f=x==null?void 0:x.receiptUrl,se=w||A,K=Math.max(.6-m/300,0),$=m>100;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center overflow-y-auto sm:py-6",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm transition-opacity",style:{backgroundColor:`rgba(0, 0, 0, ${K})`},onClick:U}),e.jsxs("div",{className:"relative w-full max-w-md sm:mx-4 mt-0 rounded-b-2xl sm:rounded-2xl p-4 sm:p-6 animate-slide-down max-h-[90vh] sm:max-h-[calc(100vh-48px)] overflow-y-auto",style:{backgroundColor:"var(--bg-secondary)",transform:`translateY(${m}px)`,transition:ee?"none":"transform 0.3s ease-out",opacity:$?.5:1},onTouchStart:q,onTouchMove:d,onTouchEnd:J,children:[e.jsx("div",{className:"sm:hidden flex justify-center -mt-2 mb-2","data-drag-handle":!0,children:e.jsx("div",{className:"w-10 h-1 rounded-full transition-colors",style:{backgroundColor:$?"var(--accent-red)":"var(--border-medium)"}})}),e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-5","data-drag-handle":!0,children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Adjuntos del Resumen"}),e.jsx("p",{className:"text-xs sm:text-sm capitalize",style:{color:"var(--text-secondary)"},children:oe.monthName})]}),e.jsx("button",{onClick:U,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("input",{ref:a,type:"file",className:"hidden",onChange:z(Z)}),e.jsx("input",{ref:S,type:"file",className:"hidden",onChange:z(X)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] sm:text-xs font-medium mb-1 flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-3 h-3",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Resumen"]}),H&&!w?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("button",{type:"button",onClick:()=>de(x.statementUrl,x.statementName),className:"flex-1 text-[11px] font-medium truncate text-left hover:underline",style:{color:"var(--accent-primary)"},children:x.statementName}),e.jsx("button",{type:"button",onClick:()=>{var r;return(r=a.current)==null?void 0:r.click()},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-white/10",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),e.jsx("button",{type:"button",onClick:()=>F("statement"),disabled:I,className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20 disabled:opacity-50",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):w?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium truncate",style:{color:"var(--text-primary)"},children:w.name}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:ze(w.size)})]}),e.jsx("button",{type:"button",onClick:()=>{Z(null),a.current&&(a.current.value="")},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("button",{type:"button",onClick:()=>{var r;return(r=a.current)==null?void 0:r.click()},className:"w-full flex items-center justify-center gap-1 px-2 py-2.5 rounded-lg border border-dashed transition-colors hover:border-[var(--accent-primary)]",style:{borderColor:"var(--border-subtle)",backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"text-[11px]",children:"PDF"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] sm:text-xs font-medium mb-1 flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-3 h-3",style:{color:"var(--accent-green)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Comprobante"]}),f&&!A?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[lt(x.receiptName)?e.jsx("img",{src:x.receiptUrl,alt:"Receipt",className:"w-6 h-6 rounded object-cover flex-shrink-0"}):null,e.jsx("button",{type:"button",onClick:()=>de(x.receiptUrl,x.receiptName),className:"flex-1 text-[11px] font-medium truncate text-left hover:underline",style:{color:"var(--accent-primary)"},children:x.receiptName}),e.jsx("button",{type:"button",onClick:()=>{var r;return(r=S.current)==null?void 0:r.click()},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-white/10",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),e.jsx("button",{type:"button",onClick:()=>F("receipt"),disabled:I,className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20 disabled:opacity-50",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):A?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium truncate",style:{color:"var(--text-primary)"},children:A.name}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:ze(A.size)})]}),e.jsx("button",{type:"button",onClick:()=>{X(null),S.current&&(S.current.value="")},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("button",{type:"button",onClick:()=>{var r;return(r=S.current)==null?void 0:r.click()},className:"w-full flex items-center justify-center gap-1 px-2 py-2.5 rounded-lg border border-dashed transition-colors hover:border-[var(--accent-primary)]",style:{borderColor:"var(--border-subtle)",backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"text-[11px]",children:"Imagen"})]})]})]}),e.jsx("p",{className:"text-[10px] mb-2",style:{color:"var(--text-muted)"},children:"M谩x. 5MB por archivo"}),e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsx("button",{onClick:U,className:"flex-1 py-2.5 sm:py-3 rounded-xl text-sm font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cerrar"}),se&&e.jsx("button",{onClick:te,disabled:I,className:"flex-1 py-2.5 sm:py-3 rounded-xl text-sm font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)"},children:I?"Guardando...":"Guardar"})]})]})]})}function Lt(){const{showError:g}=ct(),[U,oe]=n.useState([]),[x,me]=n.useState([]),[T,I]=n.useState([]),[w,Z]=n.useState({ingresos:[],gastos:[]}),[A,X]=n.useState(!0),[a,S]=n.useState(null),[m,W]=n.useState("ARS"),[ee,P]=n.useState(!1),[ae,q]=n.useState(!1),[d,J]=n.useState(null),[z,te]=n.useState(""),[F,H]=n.useState(""),[f,se]=n.useState("ARS"),[K,$]=n.useState(!1),[r,y]=n.useState(null),[p,G]=n.useState({}),[$e,fe]=n.useState(!1),[_,ve]=n.useState(null),[Ge,ne]=n.useState(!1),[be,le]=n.useState(null),[O,ue]=n.useState(!1),[E,Q]=n.useState(new Set),[xe,je]=n.useState(!1),[_e,Ne]=n.useState(!1),[Oe,ke]=n.useState(null),[he,Ce]=n.useState(null);n.useEffect(()=>{R()},[]);const Ve=n.useCallback(()=>{R(!0,!1)},[]);it([C.EXPENSES_CHANGED,C.ACCOUNTS_CHANGED,C.ALL_DATA_CHANGED],Ve);const R=async(t=!1,s=!0)=>{try{s&&X(!0);const[o,c,l]=await Promise.all([dt(),mt(t),ut()]),v=o.accounts||[],h=c.expenses||[],u=l.categorias||{ingresos:[],gastos:[]},i=v.filter(b=>b.esTarjetaCredito);oe(i),I(v),me(h),Z(u),i.length>0&&!a&&S(i[0])}catch(o){console.error("Error fetching data:",o)}finally{s&&X(!1)}};n.useEffect(()=>{a!=null&&a.id?xt(a.id).then(G).catch(t=>console.error("Error loading statement attachments:",t)):G({})},[a==null?void 0:a.id]);const Ye=n.useMemo(()=>T.filter(t=>!t.esTarjetaCredito&&t.moneda==="Peso"),[T]),Xe=n.useMemo(()=>T.filter(t=>!t.esTarjetaCredito&&t.moneda!=="Peso"),[T]),N=n.useMemo(()=>{if(!a)return[];const t=a.diaCierre||1,s=x.filter(u=>u.cuenta===a.nombre);if(s.length===0)return[];const o=s.map(u=>new Date(u.fecha));new Date(Math.min(...o)),new Date(Math.max(...o));const c=u=>{const i=new Date(u),b=i.getDate();let L=i.getFullYear(),j=i.getMonth();return b>=t&&(j+=1,j>11&&(j=0,L+=1)),`${L}-${String(j+1).padStart(2,"0")}`},l={};s.forEach(u=>{const i=c(u.fecha);l[i]||(l[i]=[]),l[i].push(u)});const v=[],h=new Date;return Object.entries(l).forEach(([u,i])=>{const[b,L]=u.split("-").map(Number),j=new Date(b,L-1,Math.min(t,new Date(b,L,0).getDate()));let V=0,Be=0;const pe=[],ye=[];i.forEach(D=>{let M=D.montoDolares;typeof M=="string"?M=parseFloat(M.replace(/[^\d,.-]/g,"").replace(",","."))||0:M=parseFloat(M)||0;const ge=parseFloat(D.montoPesos)||0,Te=parseFloat(D.monto)||0,Ie=M>0&&ge===0,We={...D,isInstallment:!!D.cuota,monedaOriginal:Ie?"USD":"ARS",montoPesosNum:ge||Te,montoDolaresNum:M};Ie?(Be+=M,ye.push(We)):(V+=ge||Te,pe.push(We))});const Ue=[...pe,...ye].sort((D,M)=>new Date(D.fecha)-new Date(M.fecha)),ce=i.find(D=>D.categoria&&D.categoria.includes("Impuesto de sellos"));v.push({id:u,year:b,month:L-1,monthName:Y(j,"MMMM yyyy",{locale:ie}),closeDate:j,totalPesos:V,totalDolares:Be,items:Ue,itemsPesos:pe,itemsDolares:ye,itemCount:Ue.length,hasTax:!!ce,taxAmount:ce&&(ce.montoPesos||ce.monto)||0,isPast:j<h,isCurrent:ht(j,h),isFuture:j>pt(h)})}),v.sort((u,i)=>u.closeDate-i.closeDate)},[a,x]);n.useEffect(()=>{if(he&&N.length>0){const t=N.find(s=>s.id===he);t&&y(t),Ce(null)}},[he,N]);const qe=async()=>{if(!(!d||!z||!a))try{$(!0);const t=Y(d.closeDate,"yyyy-MM-dd");await bt({fecha:t,monto:parseFloat(z),cuenta:a.nombre,categoria:"猬锔 Impuesto de sellos",nota:`Impuesto de sellos - Resumen ${d.monthName}`}),B(C.EXPENSES_CHANGED),B(C.ACCOUNTS_CHANGED),P(!1),te(""),J(null),await R()}catch(t){console.error("Error adding tax:",t),g("No se pudo agregar el impuesto de sellos",t.message)}finally{$(!1)}},Je=async()=>{if(!d||!F||!a)return;const t=f==="ARS"?d.totalPesos:d.totalDolares;if(t<=0){g("No se puede realizar el pago",`No hay monto en ${f==="ARS"?"pesos":"d贸lares"} para pagar`);return}try{$(!0);const s=Y(new Date,"yyyy-MM-dd"),o=f==="ARS"?"(Pesos)":"(D贸lares)";await jt({fecha:s,cuentaSaliente:F,cuentaEntrante:a.nombre,montoSaliente:t,montoEntrante:t,nota:`Pago resumen ${d.monthName} ${o}`}),B(C.TRANSFERS_CHANGED),B(C.ACCOUNTS_CHANGED),q(!1),H(""),J(null),await R()}catch(s){console.error("Error paying statement:",s),g("No se pudo registrar el pago del resumen",s.message)}finally{$(!1)}},we=t=>{J(t),te(""),P(!0)},Se=t=>{J(t),H(""),se(t.totalPesos>0?"ARS":"USD"),q(!0)},De=t=>{ve(t),fe(!0)},Ke=async({statementFile:t,receiptFile:s})=>{if(!(!_||!a))try{ne(!0);const o=_.id,c=p[o]||null,l=await Ct({accountId:a.id,period:o,statementFile:t,receiptFile:s,existing:c});G(v=>({...v,[o]:l}))}catch(o){console.error("Error saving statement attachments:",o),g("No se pudieron guardar los adjuntos",o.message)}finally{ne(!1)}},Qe=async t=>{if(!(!_||!a))try{ne(!0);const s=_.id;await kt({accountId:a.id,period:s,field:t}),G(o=>{const c={...o};if(c[s]){const l={...c[s]};t==="statement"?(l.statementUrl=null,l.statementName=null):(l.receiptUrl=null,l.receiptName=null),!l.statementUrl&&!l.receiptUrl?delete c[s]:c[s]=l}return c})}catch(s){console.error("Error removing attachment:",s),g("No se pudo eliminar el adjunto",s.message)}finally{ne(!1)}},Ze=t=>{le({id:t.id,fecha:t.fecha,monto:t.monto,cuenta:t.cuenta||(a==null?void 0:a.nombre),categoria:t.categoria,nota:t.nota,tipo:"gasto",accountId:t.accountId,categoryId:t.categoryId,cuota:t.cuota,idCompra:t.idCompra||t.installment_purchase_id})},et=async t=>{try{await St(t),t.applyToSubsequent&&t.idCompra&&await Dt(t),B(C.EXPENSES_CHANGED),B(C.ACCOUNTS_CHANGED),le(null),r&&y(s=>{if(!s)return s;const o=c=>c.map(l=>l.id===t.id?{...l,nota:t.nota,categoria:t.categoria,fecha:t.fecha}:l);return{...s,items:o(s.items||[]),itemsPesos:o(s.itemsPesos||[]),itemsDolares:o(s.itemsDolares||[])}}),R(!0,!1)}catch(s){console.error("Error updating movement:",s),g("No se pudo actualizar el movimiento",s.message)}},tt=async t=>{try{await wt(t),B(C.EXPENSES_CHANGED),B(C.ACCOUNTS_CHANGED),le(null),r&&y(s=>{if(!s)return s;const o=c=>c.filter(l=>l.id!==t.id);return{...s,items:o(s.items||[]),itemsPesos:o(s.itemsPesos||[]),itemsDolares:o(s.itemsDolares||[]),itemCount:(s.itemCount||1)-1}}),R(!0,!1)}catch(s){console.error("Error deleting movement:",s),g("No se pudo eliminar el movimiento",s.message)}},re=()=>r?N.findIndex(t=>t.id===r.id):-1,st=()=>{const t=re();t>0&&y(N[t-1])},rt=()=>{const t=re();t<N.length-1&&y(N[t+1])},Me=()=>re()>0,Ae=()=>re()<N.length-1,Le=()=>{ue(!O),Q(new Set)},Pe=t=>{const s=new Set(E);s.has(t)?s.delete(t):s.add(t),Q(s)},ot=t=>{const s=new Set(t.map(o=>o.id));Q(s)},at=()=>r?(r.totalPesos>0&&r.totalDolares>0?m==="ARS"?r.itemsPesos:r.itemsDolares:r.items).filter(o=>E.has(o.id)):[],Ee=(t,s)=>{const o=t.year,c=t.month,l=Math.min(15,s-1),v=new Date(o,c,l);return Y(v,"yyyy-MM-dd")},nt=()=>{if(!r||!a)return;const t=a.diaCierre||1,s=Ee(r,t);ke({tipo:"gasto",cuenta:a.nombre,fecha:s}),Ne(!0)},Re=async t=>{if(!r||!a)return;const s=re(),o=t==="prev"?s-1:s+1;if(o<0||o>=N.length){g("No se puede mover",`No hay resumen ${t==="prev"?"anterior":"siguiente"}`);return}const c=N[o],l=a.diaCierre||1,v=Ee(c,l);je(!0);try{const h=at();await Nt(h,"fecha",v),Q(new Set),ue(!1),Ce(c.id),await R(!0,!1)}catch(h){console.error("Error moving to statement:",h),g("No se pudieron mover los movimientos",h.message)}finally{je(!1)}};return A?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(yt,{})}):U.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Tarjetas de Cr茅dito"}),e.jsxs("div",{className:"rounded-2xl p-8 text-center",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"rgba(20, 184, 166, 0.15)"},children:e.jsx("svg",{className:"w-10 h-10",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Sin tarjetas de cr茅dito"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:'Agrega una cuenta con tipo "Tarjeta de cr茅dito" para ver los res煤menes'})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Tarjetas de Cr茅dito"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>W("ARS"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:m==="ARS"?"var(--accent-primary)":"transparent",color:m==="ARS"?"white":"var(--text-secondary)",boxShadow:m==="ARS"?"0 4px 12px var(--accent-primary-glow)":"none"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),e.jsxs("button",{onClick:()=>W("USD"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:m==="USD"?"var(--accent-green)":"transparent",color:m==="USD"?"white":"var(--text-secondary)",boxShadow:m==="USD"?"0 4px 12px rgba(0, 217, 154, 0.3)":"none"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:U.map(t=>{const s=!!t.icon,o=s&&Fe(t.icon);return e.jsx("button",{onClick:()=>S(t),className:`px-4 py-3 rounded-xl text-sm font-medium whitespace-nowrap transition-all duration-200 ${(a==null?void 0:a.nombre)===t.nombre?"scale-[1.02]":"opacity-70"}`,style:{backgroundColor:(a==null?void 0:a.nombre)===t.nombre?"var(--accent-primary)":"var(--bg-secondary)",color:(a==null?void 0:a.nombre)===t.nombre?"white":"var(--text-primary)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[s?o?e.jsx("span",{className:"text-base",children:t.icon}):e.jsx("img",{src:He(t.icon),alt:t.nombre,className:"w-5 h-5 rounded object-cover"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),t.nombre]})},t.nombre)})}),a&&e.jsx("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"D铆a de cierre"}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-primary)"},children:a.diaCierre||"No configurado"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Balance actual"}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-red)"},children:k(Math.abs(a.balanceActual||0),a.moneda==="Peso"?"ARS":"USD")})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Res煤menes"}),N.length===0?e.jsxs("div",{className:"text-center py-8",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-sm",children:"No hay res煤menes con gastos"})]}):N.map(t=>{var o,c;const s=t.totalPesos>0&&t.totalDolares>0;return e.jsxs("div",{className:"rounded-2xl overflow-hidden cursor-pointer active:scale-[0.98] transition-transform",style:{backgroundColor:"var(--bg-secondary)"},onClick:()=>y(t),children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",style:{backgroundColor:t.isCurrent?"rgba(20, 184, 166, 0.15)":t.isFuture?"rgba(96, 165, 250, 0.1)":"transparent"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:t.isCurrent?"var(--accent-primary)":t.isFuture?"var(--accent-blue)":"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:t.isCurrent||t.isFuture?"white":"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold capitalize",style:{color:"var(--text-primary)"},children:[t.monthName,t.isCurrent&&e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Actual"}),t.isFuture&&e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--accent-blue)",color:"white"},children:"Futuro"})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 flex-wrap",children:[e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[t.itemCount," movimiento",t.itemCount!==1?"s":""," 路 Cierra ",Y(t.closeDate,"d MMM",{locale:ie})]}),((o=p[t.id])==null?void 0:o.statementUrl)&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:"PDF"}),((c=p[t.id])==null?void 0:c.receiptUrl)&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium",style:{backgroundColor:"rgba(34, 197, 94, 0.15)",color:"var(--accent-green)"},children:"Pagado"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-right",children:[s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-bold",style:{color:"var(--accent-red)"},children:k(t.totalPesos,"ARS")}),e.jsx("p",{className:"text-sm font-bold",style:{color:"var(--accent-green)"},children:k(t.totalDolares,"USD")})]}):e.jsx("p",{className:"text-lg font-bold",style:{color:t.totalPesos>0||t.totalDolares>0?"var(--accent-red)":"var(--text-secondary)"},children:t.totalPesos>0?k(t.totalPesos,"ARS"):k(t.totalDolares,"USD")}),t.hasTax&&e.jsx("p",{className:"text-xs",style:{color:"var(--accent-yellow)"},children:"Inc. imp. sellos"})]}),e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsxs("div",{className:"px-4 py-3 flex gap-2",style:{borderTop:"1px solid var(--border-subtle)"},onClick:l=>l.stopPropagation(),children:[!t.hasTax&&e.jsxs("button",{onClick:()=>we(t),className:"flex-1 py-2.5 rounded-xl text-xs font-medium transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-yellow)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Imp. Sellos"]}),e.jsx("button",{onClick:()=>De(t),className:"py-2.5 px-3 rounded-xl text-xs font-medium transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},title:"Adjuntos",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),e.jsxs("button",{onClick:()=>Se(t),className:"flex-1 py-2.5 rounded-xl text-xs font-medium text-white transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:"var(--accent-green)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Pagar Resumen"]})]})]},t.id)})]}),ee&&d&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>P(!1)}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Agregar Impuesto de Sellos"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Resumen de ",e.jsx("span",{className:"font-medium capitalize",children:d.monthName})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Monto del impuesto"}),e.jsx("input",{type:"number",value:z,onChange:t=>te(t.target.value),placeholder:"0.00",className:"w-full px-4 py-3 rounded-xl text-lg",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"}})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:qe,disabled:K||!z,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-yellow)"},children:K?"Guardando...":"Agregar"})]})]})]}),ae&&d&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>q(!1)}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Pagar Resumen"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Resumen de ",e.jsx("span",{className:"font-medium capitalize",children:d.monthName})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Seleccionar porci贸n a pagar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{se("ARS"),H("")},disabled:d.totalPesos<=0,className:`flex-1 p-3 rounded-xl text-left transition-all ${f==="ARS"?"ring-2":""} ${d.totalPesos<=0?"opacity-40 cursor-not-allowed":""}`,style:{backgroundColor:f==="ARS"?"rgba(20, 184, 166, 0.15)":"var(--bg-tertiary)",borderColor:"var(--accent-primary)","--tw-ring-color":"var(--accent-primary)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Pesos"}),e.jsx("p",{className:"text-lg font-bold",style:{color:f==="ARS"?"var(--accent-primary)":"var(--text-primary)"},children:k(d.totalPesos,"ARS")})]}),e.jsxs("button",{onClick:()=>{se("USD"),H("")},disabled:d.totalDolares<=0,className:`flex-1 p-3 rounded-xl text-left transition-all ${f==="USD"?"ring-2":""} ${d.totalDolares<=0?"opacity-40 cursor-not-allowed":""}`,style:{backgroundColor:f==="USD"?"rgba(34, 197, 94, 0.15)":"var(--bg-tertiary)",borderColor:"var(--accent-green)","--tw-ring-color":"var(--accent-green)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"D贸lares"}),e.jsx("p",{className:"text-lg font-bold",style:{color:f==="USD"?"var(--accent-green)":"var(--text-primary)"},children:k(d.totalDolares,"USD")})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:["Pagar desde cuenta en ",f==="ARS"?"pesos":"d贸lares"]}),e.jsx(gt,{value:F,onChange:H,options:(f==="ARS"?Ye:Xe).map(t=>({value:t.nombre,label:t.nombre})),placeholder:"Seleccionar cuenta..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>q(!1),className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:Je,disabled:K||!F,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-green)"},children:K?"Procesando...":"Pagar"})]})]})]}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:"var(--bg-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 safe-area-top",style:{backgroundColor:"var(--bg-secondary)",borderBottom:"1px solid var(--border-subtle)"},children:[e.jsx("button",{onClick:()=>{y(null),ue(!1),Q(new Set)},className:"w-10 h-10 rounded-xl flex items-center justify-center transition-colors",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:st,disabled:!Me(),className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all disabled:opacity-30",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h2",{className:"font-semibold capitalize",style:{color:"var(--text-primary)"},children:r.monthName}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[a==null?void 0:a.nombre," 路 Cierra ",Y(r.closeDate,"d MMM yyyy",{locale:ie})]})]}),e.jsx("button",{onClick:rt,disabled:!Ae(),className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all disabled:opacity-30",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"px-3 py-1.5 rounded-xl text-sm font-bold",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:r.totalPesos>0&&r.totalDolares>0?e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsx("span",{children:k(r.totalPesos,"ARS")}),e.jsx("span",{style:{color:"var(--accent-green)"},children:k(r.totalDolares,"USD")})]}):r.totalPesos>0?k(r.totalPesos,"ARS"):k(r.totalDolares,"USD")})]}),p[r.id]&&e.jsxs("div",{className:"px-4 py-3 flex gap-2 flex-wrap",style:{borderBottom:"1px solid var(--border-subtle)"},children:[p[r.id].statementUrl&&e.jsxs("button",{onClick:()=>de(p[r.id].statementUrl,p[r.id].statementName),className:"flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-medium transition-colors hover:opacity-80",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Resumen PDF"]}),p[r.id].receiptUrl&&e.jsxs("button",{onClick:()=>de(p[r.id].receiptUrl,p[r.id].receiptName),className:"flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-medium transition-colors hover:opacity-80",style:{backgroundColor:"rgba(34, 197, 94, 0.15)",color:"var(--accent-green)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Comprobante"]})]}),r.totalPesos>0&&r.totalDolares>0&&e.jsx("div",{className:"px-4 py-3",style:{borderBottom:"1px solid var(--border-subtle)"},children:e.jsx("div",{className:"flex gap-2",children:["ARS","USD"].map(t=>{var s,o;return e.jsxs("button",{onClick:()=>W(t),className:`flex-1 py-2 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 ${m===t?"text-white":""}`,style:{backgroundColor:m===t?"var(--accent-primary)":"var(--bg-tertiary)",color:m===t?"white":"var(--text-secondary)"},children:[e.jsx("img",{src:`/icons/catalog/${t}.svg`,alt:t,className:"w-5 h-5 rounded-sm"}),t==="ARS"?`Pesos (${((s=r.itemsPesos)==null?void 0:s.length)||0})`:`D贸lares (${((o=r.itemsDolares)==null?void 0:o.length)||0})`]},t)})})}),O&&e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-2 flex-wrap",style:{backgroundColor:"rgba(20, 184, 166, 0.1)",borderBottom:"1px solid var(--accent-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[E.size," seleccionado",E.size!==1?"s":""]}),e.jsx("button",{onClick:()=>{const s=r.totalPesos>0&&r.totalDolares>0?m==="ARS"?r.itemsPesos:r.itemsDolares:r.items;E.size===s.length?Q(new Set):ot(s)},className:"text-xs px-2 py-1 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},children:(()=>{const s=r.totalPesos>0&&r.totalDolares>0?m==="ARS"?r.itemsPesos:r.itemsDolares:r.items;return E.size===s.length?"Deseleccionar":"Seleccionar todo"})()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[E.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Re("prev"),disabled:xe||!Me(),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium disabled:opacity-40",style:{backgroundColor:"rgba(59, 130, 246, 0.15)",color:"var(--accent-blue)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Resumen ant."]}),e.jsxs("button",{onClick:()=>Re("next"),disabled:xe||!Ae(),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium disabled:opacity-40",style:{backgroundColor:"rgba(168, 85, 247, 0.15)",color:"var(--accent-purple)"},children:["Resumen sig.",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsx("button",{onClick:Le,disabled:xe,className:"px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Cancelar"})]})]}),!O&&e.jsx("div",{className:"px-4 py-2",style:{borderBottom:"1px solid var(--border-subtle)"},children:e.jsxs("button",{onClick:Le,className:"text-xs font-medium flex items-center gap-1.5",style:{color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h7M4 12h7m-7 7h7m5-14v14m0-14l3 3m-3-3l-3 3m3 11l3-3m-3 3l-3-3"})}),"Selecci贸n m煤ltiple"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-2",children:(()=>{const s=r.totalPesos>0&&r.totalDolares>0?m==="ARS"?r.itemsPesos:r.itemsDolares:r.items;return s==null?void 0:s.map((o,c)=>{var u;const l=o.monedaOriginal||"ARS",v=l==="USD"?o.montoDolaresNum||o.montoDolares||0:o.montoPesosNum||o.montoPesos||o.monto||0,h=E.has(o.id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-all cursor-pointer ${O?"":"active:scale-[0.98]"}`,style:{backgroundColor:h?"rgba(20, 184, 166, 0.15)":"var(--bg-secondary)",border:h?"1px solid var(--accent-primary)":"1px solid transparent"},onClick:()=>O?Pe(o.id):Ze(o),children:[O&&e.jsx("button",{onClick:i=>{i.stopPropagation(),Pe(o.id)},className:"w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0 transition-all",style:{backgroundColor:h?"var(--accent-primary)":"var(--bg-tertiary)",border:h?"none":"2px solid var(--border-subtle)"},children:h&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--bg-tertiary)"},children:(()=>{var L,j;const i=(L=w.gastos)==null?void 0:L.find(V=>V.value===o.categoria||V.label===o.categoria),b=i==null?void 0:i.icon;if(b&&Fe(b))return e.jsx("span",{className:"text-lg",children:b});if(b)return e.jsx("img",{src:He(b),alt:"",className:"w-6 h-6 rounded object-cover"});{const V=((j=o.categoria)==null?void 0:j.split(" ")[0])||"";return e.jsx("span",{className:"text-lg",children:V})}})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:[((u=o.categoria)==null?void 0:u.replace(/^[^\s]+\s*/,""))||o.categoria||"Sin categor铆a",o.isInstallment&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(20, 184, 166, 0.2)",color:"var(--accent-primary)"},children:o.cuota}),l==="USD"&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(34, 197, 94, 0.2)",color:"var(--accent-green)"},children:"USD"})]}),o.nota&&e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:o.nota}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:Y(new Date(o.fecha),"d 'de' MMMM",{locale:ie})})]}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-bold",style:{color:l==="USD"?"var(--accent-green)":"var(--accent-red)"},children:k(v,l)}),!O&&e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},c)})})()}),e.jsxs("div",{className:"px-4 py-4 safe-area-bottom flex gap-2",style:{backgroundColor:"var(--bg-secondary)",borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("button",{onClick:nt,className:"py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:"var(--accent-red)",color:"white"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),!r.hasTax&&e.jsx("button",{onClick:()=>{we(r),y(null)},className:"py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-yellow)"},title:"Agregar Impuesto de Sellos",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z"})})}),e.jsx("button",{onClick:()=>{De(r)},className:"py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},title:"Adjuntos",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),e.jsxs("button",{onClick:()=>{Se(r),y(null)},className:"flex-1 py-3 rounded-xl font-medium text-white transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:"var(--accent-green)"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Pagar"]})]})]}),e.jsx(Mt,{isOpen:$e,onClose:()=>{fe(!1),ve(null)},statement:_,attachments:_?p[_.id]:null,onSave:Ke,onRemove:Qe,saving:Ge}),be&&e.jsx(ft,{movement:be,accounts:T,categories:w,onSave:et,onDelete:tt,onClose:()=>le(null),onConvertedToRecurring:()=>R(!0,!1)}),e.jsx(vt,{isOpen:_e,onClose:()=>{Ne(!1),ke(null)},prefillData:Oe})]})}export{Lt as default};
