import{ax as re,r as i,ay as te,j as a,az as _,a as ce,D as de,aA as le,aB as me,aC as ue,aD as pe,aE as ge}from"./index-BJnUdJhV.js";const o="/icons/catalog",c={bancos:[{id:"galicia",name:"Banco Galicia",icon:`${o}/banco-galicia.svg`,keywords:["galicia","banco"]},{id:"santander",name:"Santander",icon:`${o}/SAN.svg`,keywords:["santander","banco"]},{id:"bbva",name:"BBVA",icon:`${o}/banco-bbva.svg`,keywords:["bbva","frances","banco"]},{id:"macro",name:"Banco Macro",icon:`${o}/BMA.svg`,keywords:["macro","banco"]},{id:"hsbc",name:"HSBC",icon:`${o}/HSBC.svg`,keywords:["hsbc","banco"]},{id:"nacion",name:"Banco Nación",icon:`${o}/banco-nacion.svg`,keywords:["nacion","bna","banco"]},{id:"provincia",name:"Banco Provincia",icon:`${o}/banco-provincia.svg`,keywords:["provincia","bapro","banco"]},{id:"ciudad",name:"Banco Ciudad",icon:`${o}/banco-ciudad.svg`,keywords:["ciudad","banco"]},{id:"supervielle",name:"Supervielle",icon:`${o}/banco-supervielle.svg`,keywords:["supervielle","banco"]},{id:"patagonia",name:"Banco Patagonia",icon:`${o}/BPAT.svg`,keywords:["patagonia","banco"]},{id:"comafi",name:"Banco Comafi",icon:`${o}/banco-comafi.svg`,keywords:["comafi","banco"]},{id:"icbc",name:"ICBC",icon:`${o}/banco-icbc.svg`,keywords:["icbc","banco"]},{id:"credicoop",name:"Banco Credicoop",icon:`${o}/banco-credicoop.svg`,keywords:["credicoop","banco"]},{id:"hipotecario",name:"Banco Hipotecario",icon:`${o}/BHIP.svg`,keywords:["hipotecario","banco"]},{id:"itau",name:"Itaú",icon:`${o}/banco-itau.svg`,keywords:["itau","banco"]},{id:"bind",name:"BIND",icon:`${o}/bind.svg`,keywords:["bind","banco","industrial"]},{id:"piano",name:"Banco Piano",icon:`${o}/banco-piano.svg`,keywords:["piano","banco"]},{id:"columbia",name:"Banco Columbia",icon:`${o}/banco-columbia.svg`,keywords:["columbia","banco"]},{id:"bica",name:"BICA",icon:`${o}/banco-bica.svg`,keywords:["bica","banco"]},{id:"coinag",name:"Banco Coinag",icon:`${o}/banco-coinag.svg`,keywords:["coinag","banco"]},{id:"del_sol",name:"Banco del Sol",icon:`${o}/banco-del-sol.svg`,keywords:["sol","banco"]},{id:"san_juan",name:"Banco San Juan",icon:`${o}/banco-san-juan.svg`,keywords:["san juan","banco"]},{id:"santa_cruz",name:"Banco Santa Cruz",icon:`${o}/banco-santa-cruz.svg`,keywords:["santa cruz","banco"]},{id:"corrientes",name:"Banco Corrientes",icon:`${o}/banco-corrientes.svg`,keywords:["corrientes","banco"]},{id:"entre_rios",name:"Banco Entre Ríos",icon:`${o}/banco-entre-rios.svg`,keywords:["entre rios","banco"]}],fintechs:[{id:"mercadopago",name:"Mercado Pago",icon:`${o}/mercadopago.svg`,keywords:["mercado pago","mp","mercadolibre"]},{id:"uala",name:"Ualá",icon:`${o}/uala.svg`,keywords:["uala","fintech"]},{id:"naranja_x",name:"Naranja X",icon:`${o}/naranja-x.svg`,keywords:["naranja","naranja x","fintech"]},{id:"personal_pay",name:"Personal Pay",icon:`${o}/personal-pay.svg`,keywords:["personal","personal pay","fintech"]},{id:"brubank",name:"Brubank",icon:`${o}/brubank.svg`,keywords:["brubank","fintech"]},{id:"lemon",name:"Lemon",icon:`${o}/lemon.svg`,keywords:["lemon","fintech"]},{id:"belo",name:"Belo",icon:`${o}/belo.svg`,keywords:["belo","fintech"]},{id:"prex",name:"Prex",icon:`${o}/prex.svg`,keywords:["prex","fintech"]},{id:"cuenta_dni",name:"Cuenta DNI",icon:`${o}/cuenta-dni.svg`,keywords:["cuenta dni","dni","fintech"]},{id:"modo",name:"MODO",icon:`${o}/modo.svg`,keywords:["modo","fintech"]},{id:"openbank",name:"Openbank",icon:`${o}/openbank.svg`,keywords:["openbank","fintech"]},{id:"claro_pay",name:"Claro Pay",icon:`${o}/claro-pay.svg`,keywords:["claro","claro pay","fintech"]}],crypto:[{id:"ripio",name:"Ripio",icon:`${o}/ripio.svg`,keywords:["ripio","crypto"]},{id:"buenbit",name:"Buenbit",icon:`${o}/buenbit.svg`,keywords:["buenbit","crypto"]},{id:"fiwind",name:"Fiwind",icon:`${o}/fiwind.svg`,keywords:["fiwind","crypto"]},{id:"cocos",name:"Cocos",icon:`${o}/cocos.svg`,keywords:["cocos","crypto","capital"]},{id:"satoshitango",name:"Satoshi Tango",icon:`${o}/satoshi-tango.svg`,keywords:["satoshitango","satoshi","crypto"]},{id:"takenos",name:"Takenos",icon:`${o}/takenos.svg`,keywords:["takenos","crypto"]},{id:"wallbit",name:"Wallbit",icon:`${o}/wallbit-new.svg`,keywords:["wallbit","crypto"]},{id:"ieb",name:"IEB",icon:`${o}/ieb.svg`,keywords:["ieb","invertir","broker"]},{id:"balanz",name:"Balanz",icon:`${o}/balanz.svg`,keywords:["balanz","broker","inversiones"]}],metodosPago:[{id:"visa",name:"Visa",icon:`${o}/V.svg`,keywords:["visa","tarjeta","credito","debito"]},{id:"mastercard",name:"Mastercard",icon:`${o}/MA.svg`,keywords:["mastercard","master","tarjeta","credito","debito"]},{id:"amex",name:"American Express",icon:`${o}/AXP.svg`,keywords:["amex","american express","tarjeta","credito"]},{id:"cabal",name:"Cabal",icon:`${o}/cabal.svg`,keywords:["cabal","tarjeta","credito","debito","argentina"]},{id:"paypal",name:"PayPal",icon:`${o}/PYPL.svg`,keywords:["paypal","pago","online"]}],monedas:[{id:"ars",name:"Peso Argentino",icon:`${o}/ARS.svg`,keywords:["peso","ars","argentina","moneda"]},{id:"usd",name:"Dólar",icon:`${o}/USD.svg`,keywords:["dolar","usd","dollar","moneda"]}]},I=()=>[...c.bancos,...c.fintechs,...c.crypto,...c.metodosPago,...c.monedas],he=n=>{if(!n)return I();const r=n.toLowerCase().trim();return I().filter(d=>d.name.toLowerCase().includes(r)||d.keywords.some(l=>l.includes(r)))},F=[{id:"bancos",name:"Bancos",icons:c.bancos},{id:"fintechs",name:"Fintechs",icons:c.fintechs},{id:"crypto",name:"Crypto/Brokers",icons:c.crypto},{id:"metodosPago",name:"Tarjetas",icons:c.metodosPago},{id:"monedas",name:"Monedas",icons:c.monedas}],G=({size:n=20})=>a.jsx("svg",{width:n,height:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),be=({size:n=18})=>a.jsx("svg",{width:n,height:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),xe=({size:n=32})=>a.jsx("svg",{width:n,height:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),H=({size:n=24,className:r=""})=>a.jsx("svg",{width:n,height:n,className:r,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}),ve=({size:n=12})=>a.jsx("svg",{width:n,height:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});function fe({isOpen:n,onClose:r,onSelect:d,currentValue:l,showPredefined:P=!0,title:W="Seleccionar ícono"}){const{user:p}=re(),[t,Y]=i.useState(P?"predefined":"emoji"),[u,h]=i.useState(""),[m,b]=i.useState("all"),[x,E]=i.useState(!1),[w,S]=i.useState([]),[A,L]=i.useState(!1),[T,v]=i.useState(null),[g,j]=i.useState({isOpen:!1,iconPath:null}),[q,M]=i.useState(!1),y=i.useRef(null),J=i.useRef(null),[f,$]=i.useState(0),[N,C]=i.useState(!1),D=i.useRef(0);i.useEffect(()=>{n&&p&&z()},[n,p]),i.useEffect(()=>{n||(h(""),b("all"),v(null),$(0),C(!1))},[n]),i.useEffect(()=>{const e=s=>{g.isOpen||s.key==="Escape"&&r()};if(n)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,r,g.isOpen]);const X=e=>{e.target.closest("[data-drag-handle]")&&(D.current=e.touches[0].clientY,C(!0))},Q=e=>{if(!N)return;const s=e.touches[0].clientY-D.current;s>0&&$(s)},V=()=>{N&&(f>100&&r(),$(0),C(!1))},z=async()=>{if(p){L(!0);try{const e=await te(p.id);S(e)}catch(e){console.error("Error loading uploaded icons:",e)}finally{L(!1)}}},K=async e=>{var k;const s=(k=e.target.files)==null?void 0:k[0];if(!(!s||!p)){E(!0),v(null);try{const{url:B}=await le(s,p.id);await z(),d(B),r()}catch(B){v(B.message)}finally{E(!1),y.current&&(y.current.value="")}}},Z=(e,s)=>{s.stopPropagation(),j({isOpen:!0,iconPath:e})},ee=async()=>{const e=g.iconPath;if(e){M(!0);try{await me(e),S(s=>s.filter(k=>k.path!==e)),l&&ue(l)===e&&d(null),j({isOpen:!1,iconPath:null})}catch(s){v(s.message)}finally{M(!1)}}},ae=e=>{d(e.icon),r()},oe=e=>{d(e.emoji),r()},ne=e=>{d(e.url),r()},U=()=>{if(u)return he(u);if(m==="all")return I();const e=F.find(s=>s.id===m);return e?e.icons:[]},O=()=>{if(u)return pe(u);if(m==="all")return ge();const e=_.find(s=>s.id===m);return e?e.emojis:[]};if(!n)return null;const se=Math.max(.6-f/300,0),R=f>100,ie=[...P?[{id:"predefined",label:"Íconos"}]:[],{id:"emoji",label:"Emojis"},{id:"upload",label:"Subir"}];return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center overflow-y-auto sm:py-6",children:[a.jsx("div",{className:"absolute inset-0 backdrop-blur-sm transition-opacity",style:{backgroundColor:`rgba(0, 0, 0, ${se})`},onClick:()=>!g.isOpen&&r()}),a.jsxs("div",{ref:J,className:"relative w-full max-w-md sm:mx-4 mt-0 rounded-b-2xl sm:rounded-2xl overflow-hidden shadow-2xl animate-slide-down sm:max-h-[calc(100vh-48px)]",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)",transform:`translateY(${f}px)`,transition:N?"none":"transform 0.3s ease-out",opacity:R?.5:1},onTouchStart:X,onTouchMove:Q,onTouchEnd:V,children:[a.jsx("div",{className:"sm:hidden flex justify-center pt-2 pb-1","data-drag-handle":!0,children:a.jsx("div",{className:"w-10 h-1 rounded-full transition-colors",style:{backgroundColor:R?"var(--accent-red)":"var(--border-medium)"}})}),a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 cursor-grab active:cursor-grabbing sm:cursor-default",style:{borderBottom:"1px solid var(--border-color)"},"data-drag-handle":!0,children:[a.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:W}),a.jsx("button",{onClick:r,className:"p-2 rounded-lg transition-colors hover:bg-white/10",style:{color:"var(--text-secondary)"},children:a.jsx(G,{size:20})})]}),a.jsx("div",{className:"flex px-5 pt-3 gap-2",children:ie.map(e=>a.jsx("button",{onClick:()=>{Y(e.id),h(""),b("all")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===e.id?"bg-teal-500/20 text-teal-400":"hover:bg-white/5"}`,style:{color:t===e.id?void 0:"var(--text-secondary)"},children:e.label},e.id))}),(t==="predefined"||t==="emoji")&&a.jsx("div",{className:"px-5 pt-4",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-color)"},children:[a.jsx(be,{size:18,style:{color:"var(--text-muted)"}}),a.jsx("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:t==="predefined"?"Buscar banco, fintech...":"Buscar emoji...",className:"flex-1 bg-transparent outline-none text-sm",style:{color:"var(--text-primary)"}}),u&&a.jsx("button",{onClick:()=>h(""),className:"p-1 rounded hover:bg-white/10",children:a.jsx(G,{size:14,style:{color:"var(--text-muted)"}})})]})}),(t==="predefined"||t==="emoji")&&!u&&a.jsx("div",{className:"px-5 pt-3",children:a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[a.jsx("button",{onClick:()=>b("all"),className:`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${m==="all"?"bg-teal-500/20 text-teal-400":"hover:bg-white/5"}`,style:{color:m==="all"?void 0:"var(--text-secondary)"},children:"Todos"}),(t==="predefined"?F:_).map(e=>a.jsx("button",{onClick:()=>b(e.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${m===e.id?"bg-teal-500/20 text-teal-400":"hover:bg-white/5"}`,style:{color:m===e.id?void 0:"var(--text-secondary)"},children:e.name},e.id))]})}),T&&a.jsx("div",{className:"mx-5 mt-3 px-4 py-3 rounded-lg bg-red-500/10 border border-red-500/20",children:a.jsx("p",{className:"text-sm text-red-400",children:T})}),a.jsxs("div",{className:"p-5 max-h-[50vh] overflow-y-auto",children:[t==="predefined"&&a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[U().map(e=>a.jsxs("button",{onClick:()=>ae(e),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all hover:bg-white/10 ${l===e.icon?"ring-2 ring-teal-500 bg-teal-500/10":""}`,title:e.name,children:[a.jsx("img",{src:ce(e.icon),alt:e.name,className:"w-10 h-10 rounded-lg"}),a.jsx("span",{className:"text-[10px] text-center truncate w-full leading-tight",style:{color:"var(--text-muted)"},children:e.name})]},e.id)),U().length===0&&a.jsx("div",{className:"col-span-5 py-8 text-center",children:a.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"No se encontraron íconos"})})]}),t==="emoji"&&a.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[O().map((e,s)=>a.jsx("button",{onClick:()=>oe(e),className:`flex items-center justify-center p-3 rounded-xl text-2xl transition-all hover:bg-white/10 ${l===e.emoji?"ring-2 ring-teal-500 bg-teal-500/10":""}`,title:e.keywords.join(", "),children:e.emoji},`${e.emoji}-${s}`)),O().length===0&&a.jsx("div",{className:"col-span-6 py-8 text-center",children:a.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"No se encontraron emojis"})})]}),t==="upload"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{onClick:()=>{var e;return!x&&((e=y.current)==null?void 0:e.click())},className:`flex flex-col items-center justify-center gap-3 p-8 rounded-xl border-2 border-dashed transition-all cursor-pointer ${x?"opacity-50 cursor-wait":"hover:bg-white/5 hover:border-teal-500/50"}`,style:{borderColor:"var(--border-color)"},children:[x?a.jsx(H,{size:32,className:"animate-spin text-teal-500"}):a.jsx(xe,{size:32,style:{color:"var(--text-muted)"}}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:x?"Subiendo...":"Click para subir imagen"}),a.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"PNG, JPG, GIF, WebP o SVG (máx. 2MB)"})]}),a.jsx("input",{ref:y,type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp,image/svg+xml",onChange:K,className:"hidden"})]}),w.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium mb-3",style:{color:"var(--text-muted)"},children:"Íconos subidos anteriormente"}),a.jsx("div",{className:"grid grid-cols-5 gap-3",children:w.map(e=>a.jsxs("div",{className:`relative group rounded-xl overflow-hidden transition-all ${l===e.url?"ring-2 ring-teal-500":""}`,children:[a.jsx("button",{onClick:()=>ne(e),className:"w-full aspect-square p-2 hover:bg-white/10",children:a.jsx("img",{src:e.url,alt:"Uploaded icon",className:"w-full h-full object-cover rounded-lg"})}),a.jsx("button",{onClick:s=>Z(e.path,s),className:"absolute top-1 right-1 p-1 rounded bg-red-500/80 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(ve,{size:12,className:"text-white"})})]},e.path))})]}),A&&a.jsx("div",{className:"flex items-center justify-center py-4",children:a.jsx(H,{size:24,className:"animate-spin text-teal-500"})}),!A&&w.length===0&&a.jsx("p",{className:"text-center text-sm py-4",style:{color:"var(--text-muted)"},children:"No tenés íconos subidos"})]})]}),l&&a.jsx("div",{className:"px-5 py-3",style:{borderTop:"1px solid var(--border-color)"},children:a.jsx("button",{onClick:()=>{d(null),r()},className:"w-full py-2.5 rounded-xl text-sm font-medium text-red-400 hover:bg-red-500/10 transition-colors",children:"Quitar ícono"})})]}),a.jsx(de,{isOpen:g.isOpen,onClose:()=>j({isOpen:!1,iconPath:null}),onConfirm:ee,title:"Eliminar ícono",message:"¿Estás seguro de que querés eliminar este ícono? Esta acción no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar",variant:"danger",loading:q})]})}export{fe as I};
