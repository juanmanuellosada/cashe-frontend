import{j as e,aG as V,f as $,r as d,i as O,ae as F,Q as q,o as Y,aN as H,H as U,I as Q,L as J,T as K,aO as W,aP as X,aQ as Z}from"./index-DCmWVZK1.js";import{P as ee,M as P}from"./MultiSelectDropdown-CcIWK53P.js";import{I as te}from"./IconPicker-DHqsh2_M.js";function se({goal:r,onClick:j,categories:S=[],accounts:N=[]}){const{name:k,goal_type:v,target_amount:p,currency:C,currentAmount:s=0,percentageAchieved:n=0,period_type:E,daysRemaining:T=0,is_completed:h,is_global:L,category_ids:m=[],account_ids:w=[],icon:u,isOnTrack:y}=r,g=m.map(i=>{const c=S.find(A=>A.id===i);return(c==null?void 0:c.nombre)||(c==null?void 0:c.name)}).filter(Boolean).slice(0,2),x=w.map(i=>{const c=N.find(A=>A.id===i);return(c==null?void 0:c.nombre)||(c==null?void 0:c.name)}).filter(Boolean).slice(0,2),M={weekly:"Semanal",monthly:"Mensual",yearly:"Anual",custom:"Personalizado"},o={income:"Ingreso",savings:"Ahorro",spending_reduction:"Reducir gasto"},b={income:{bg:"var(--accent-green-dim)",color:"var(--accent-green)"},savings:{bg:"var(--accent-blue-dim, rgba(59, 130, 246, 0.15))",color:"var(--accent-blue)"},spending_reduction:{bg:"var(--accent-purple-dim, rgba(168, 85, 247, 0.15))",color:"var(--accent-purple, #a855f7)"}},I=b[v]||b.income,l=n>=100;return e.jsxs("div",{onClick:j,className:`
        relative rounded-2xl p-4 cursor-pointer transition-all
        hover:scale-[1.02] hover:shadow-lg
        ${h?"ring-2 ring-offset-2":""}
      `,style:{backgroundColor:"var(--bg-secondary)",border:h?"2px solid var(--accent-green)":"1px solid var(--border-subtle)","--tw-ring-color":"var(--accent-green)","--tw-ring-offset-color":"var(--bg-primary)"},children:[h&&e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 rounded-full flex items-center justify-center text-lg shadow-lg",style:{backgroundColor:"var(--accent-green)"},children:"ðŸŽ‰"}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[u&&e.jsx("span",{className:"text-xl",children:u}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",style:{color:"var(--text-primary)"},children:k}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:M[E]})]})]}),e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:I.bg,color:I.color},children:o[v]})]}),e.jsx(V,{value:s,max:p,variant:"goal",size:"md",showLabel:!1,className:"mb-3"}),e.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold",style:{color:l?"var(--accent-green)":"var(--text-primary)"},children:$(Math.max(0,s),C)}),e.jsxs("span",{className:"text-sm ml-1",style:{color:"var(--text-muted)"},children:["/ ",$(p,C)]})]}),e.jsxs("span",{className:"text-sm font-medium",style:{color:l?"var(--accent-green)":"var(--text-secondary)"},children:[n.toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",style:{color:"var(--text-muted)"},children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:[T," dÃ­as restantes"]})]}),!h&&e.jsx("span",{className:"flex items-center gap-1",style:{color:y?"var(--accent-green)":"var(--accent-yellow, #eab308)"},children:y?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"En camino"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Atrasado"]})})]}),!L&&(m.length>0||w.length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3 pt-3 border-t",style:{borderColor:"var(--border-subtle)"},children:[g.map((i,c)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--accent-primary-dim)",color:"var(--accent-primary)"},children:i},`cat-${c}`)),m.length>2&&e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:["+",m.length-2]}),x.map((i,c)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--accent-blue-dim, rgba(59, 130, 246, 0.15))",color:"var(--accent-blue)"},children:i},`acc-${c}`))]}),L&&e.jsx("div",{className:"mt-3 pt-3 border-t",style:{borderColor:"var(--border-subtle)"},children:e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:v==="income"?"Todos los ingresos":v==="savings"?"Balance general":"Todos los gastos"})})]})}function re({goal:r=null,categories:j=[],accounts:S=[],onSave:N,onDelete:k,onClose:v,loading:p=!1}){const C=!!r,[s,n]=d.useState({name:"",goalType:"savings",targetAmount:"",currency:"ARS",periodType:"monthly",startDate:new Date().toISOString().split("T")[0],endDate:"",isRecurring:!0,categoryIds:[],accountIds:[],isGlobal:!0,reductionType:"percentage",reductionValue:"",baselineAmount:"",icon:""}),[E,T]=d.useState(!1),[h,L]=d.useState(!1),[m,w]=d.useState({}),[u,y]=d.useState(0),[g,x]=d.useState(!1),M=d.useRef(0);d.useEffect(()=>{y(0),x(!1)},[r]),d.useEffect(()=>{var t,a,f;r&&n({name:r.name||"",goalType:r.goal_type||"savings",targetAmount:((t=r.target_amount)==null?void 0:t.toString())||"",currency:r.currency||"ARS",periodType:r.period_type||"monthly",startDate:r.start_date||new Date().toISOString().split("T")[0],endDate:r.end_date||"",isRecurring:r.is_recurring??!0,categoryIds:r.category_ids||[],accountIds:r.account_ids||[],isGlobal:r.is_global??!0,reductionType:r.reduction_type||"percentage",reductionValue:((a=r.reduction_value)==null?void 0:a.toString())||"",baselineAmount:((f=r.baseline_amount)==null?void 0:f.toString())||"",icon:r.icon||""})},[r]);const o=t=>{t.target.closest("[data-drag-handle]")&&(M.current=t.touches[0].clientY,x(!0))},b=t=>{if(!g)return;const a=t.touches[0].clientY-M.current;a>0&&y(a)},I=()=>{g&&(u>100&&!p&&v(),y(0),x(!1))},l=(t,a)=>{n(f=>({...f,[t]:a})),m[t]&&w(f=>({...f,[t]:null}))},i=()=>{const t={};s.name.trim()||(t.name="El nombre es requerido");const a=parseFloat(s.targetAmount);if((!s.targetAmount||isNaN(a)||a<=0)&&(t.targetAmount="Ingresa un monto vÃ¡lido mayor a 0"),s.periodType==="custom"&&!s.endDate&&(t.endDate="Selecciona una fecha de fin"),s.goalType==="spending_reduction"&&s.reductionType==="percentage"){const f=parseFloat(s.reductionValue);(!s.reductionValue||isNaN(f)||f<=0||f>100)&&(t.reductionValue="Ingresa un porcentaje vÃ¡lido (1-100)")}return w(t),Object.keys(t).length===0},c=t=>{t.preventDefault(),i()&&N({...r&&{id:r.id},name:s.name.trim(),goalType:s.goalType,targetAmount:parseFloat(s.targetAmount),currency:s.currency,periodType:s.periodType,startDate:s.startDate,endDate:s.periodType==="custom"?s.endDate:null,isRecurring:s.isRecurring,categoryIds:s.isGlobal?[]:s.categoryIds,accountIds:s.isGlobal?[]:s.accountIds,isGlobal:s.isGlobal,reductionType:s.goalType==="spending_reduction"?s.reductionType:null,reductionValue:s.goalType==="spending_reduction"?parseFloat(s.reductionValue):null,baselineAmount:s.goalType==="spending_reduction"?parseFloat(s.baselineAmount):null,icon:s.icon||null,isActive:(r==null?void 0:r.is_active)??!0,isCompleted:(r==null?void 0:r.is_completed)??!1})},A=()=>{T(!0)},G=()=>{T(!1),k==null||k(r)},_=j.filter(t=>s.goalType==="income"?t.tipo==="Ingreso"||t.type==="income":t.tipo==="Gasto"||t.type==="expense").map((t,a)=>({id:t.id||t.rowIndex||`cat-${a}`,name:t.nombre||t.name||t.label,icon:t.icon})),z=S.map((t,a)=>({id:t.id||t.rowIndex||`acc-${a}`,name:t.nombre||t.name,icon:t.icon})),R=[{value:"income",label:"Ingreso",labelShort:"ðŸ’°",icon:"ðŸ’°"},{value:"savings",label:"Ahorro",labelShort:"ðŸ¦",icon:"ðŸ¦"},{value:"spending_reduction",label:"Reducir",labelShort:"ðŸ“‰",icon:"ðŸ“‰"}],B=Math.max(.6-u/300,0),D=u>100;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center overflow-y-auto sm:py-6",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm transition-opacity animate-fade-in",style:{backgroundColor:`rgba(0, 0, 0, ${B})`},onClick:v}),e.jsxs("div",{className:"relative w-full sm:max-w-lg max-h-[90vh] sm:max-h-[calc(100vh-48px)] overflow-y-auto sm:mx-4 mt-0 rounded-b-2xl sm:rounded-2xl p-4 sm:p-5 animate-slide-down",style:{backgroundColor:"var(--bg-secondary)",transform:`translateY(${u}px)`,transition:g?"none":"transform 0.3s ease-out",opacity:D?.5:1},onTouchStart:o,onTouchMove:b,onTouchEnd:I,children:[e.jsx("div",{className:"sm:hidden flex justify-center -mt-2 mb-1","data-drag-handle":!0,children:e.jsx("div",{className:"w-10 h-1 rounded-full transition-colors",style:{backgroundColor:D?"var(--accent-red)":"var(--border-medium)"}})}),e.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-3 mb-3 border-b",style:{borderColor:"var(--border-subtle)"},"data-drag-handle":!0,children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold",style:{color:"var(--text-primary)"},children:C?"Editar meta":"Nueva meta"}),e.jsx("button",{onClick:v,className:"p-1.5 rounded-lg transition-colors hover:bg-black/10",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:c,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:"Tipo"}),e.jsx("div",{className:"flex gap-1",children:R.map(t=>{const a=s.goalType===t.value;return e.jsxs("button",{type:"button",onClick:()=>l("goalType",t.value),className:`
                        flex-1 px-1.5 py-1.5 rounded-md text-center transition-all flex items-center justify-center gap-1
                        ${a?"ring-1 ring-offset-1":"hover:opacity-80"}
                      `,style:{backgroundColor:a?"var(--accent-primary-dim)":"var(--bg-tertiary)",color:a?"var(--accent-primary)":"var(--text-secondary)","--tw-ring-color":"var(--accent-primary)","--tw-ring-offset-color":"var(--bg-secondary)"},children:[e.jsx("span",{className:"text-xs",children:t.icon}),e.jsx("span",{className:"text-[10px] font-medium hidden sm:inline",children:t.label})]},t.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:"Nombre"}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("button",{type:"button",onClick:()=>L(!0),className:"w-9 h-9 rounded-lg flex items-center justify-center text-base transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)"},children:s.icon?O(s.icon)?s.icon:e.jsx("img",{src:s.icon,alt:"",className:"w-5 h-5 rounded object-contain"}):"ðŸŽ¯"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>l("name",t.target.value),placeholder:"Nombre de la meta",className:"flex-1 px-2.5 py-2 rounded-lg text-xs outline-none transition-all focus:ring-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)","--tw-ring-color":"var(--accent-primary)"}})]}),m.name&&e.jsx("p",{className:"text-[10px] mt-0.5",style:{color:"var(--accent-red)"},children:m.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:s.goalType==="spending_reduction"?"MÃ¡x. a gastar":"Monto"}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("input",{type:"number",value:s.targetAmount,onChange:t=>l("targetAmount",t.target.value),placeholder:"0",min:"0",step:"0.01",className:"flex-1 px-2.5 py-2 rounded-lg text-xs outline-none transition-all focus:ring-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)","--tw-ring-color":"var(--accent-primary)"}}),e.jsxs("div",{className:"flex rounded-lg p-0.5",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("button",{type:"button",onClick:()=>l("currency","ARS"),className:"px-1.5 py-1.5 rounded text-xs font-medium transition-colors flex items-center",style:{backgroundColor:s.currency==="ARS"?"var(--bg-elevated)":"transparent",color:s.currency==="ARS"?"var(--text-primary)":"var(--text-muted)"},children:e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"})}),e.jsx("button",{type:"button",onClick:()=>l("currency","USD"),className:"px-1.5 py-1.5 rounded text-xs font-medium transition-colors flex items-center",style:{backgroundColor:s.currency==="USD"?"var(--bg-elevated)":"transparent",color:s.currency==="USD"?"var(--text-primary)":"var(--text-muted)"},children:e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"})})]})]}),m.targetAmount&&e.jsx("p",{className:"text-[10px] mt-0.5",style:{color:"var(--accent-red)"},children:m.targetAmount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:"PerÃ­odo"}),e.jsx(ee,{value:s.periodType,onChange:t=>l("periodType",t)})]}),e.jsxs("div",{className:`grid gap-2 ${s.periodType==="custom"?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:s.periodType==="custom"?"Inicio":"Fecha de inicio"}),e.jsx(F,{value:s.startDate,onChange:t=>l("startDate",t.target.value),compact:s.periodType==="custom"})]}),s.periodType==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:"Fin"}),e.jsx(F,{value:s.endDate,onChange:t=>l("endDate",t.target.value),compact:!0}),m.endDate&&e.jsx("p",{className:"text-[10px] mt-0.5",style:{color:"var(--accent-red)"},children:m.endDate})]})]}),e.jsxs("button",{type:"button",onClick:()=>l("isGlobal",!s.isGlobal),className:"flex items-center gap-2 w-full p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center transition-all duration-200 flex-shrink-0 ${s.isGlobal?"":"border-2"}`,style:{backgroundColor:s.isGlobal?"var(--accent-primary)":"transparent",borderColor:"var(--text-secondary)"},children:s.isGlobal&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("p",{className:"text-xs font-medium",style:{color:"var(--text-primary)"},children:"Global"}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:s.goalType==="income"?"Todos los ingresos":s.goalType==="savings"?"Balance general":"Todos los gastos"})]})]}),!s.isGlobal&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(P,{items:_,selectedIds:s.categoryIds,onChange:t=>l("categoryIds",t),label:"CategorÃ­as",placeholder:"Todas",emptyMessage:"Sin categorÃ­as"}),e.jsx(P,{items:z,selectedIds:s.accountIds,onChange:t=>l("accountIds",t),label:"Cuentas",placeholder:"Todas",emptyMessage:"Sin cuentas"})]}),e.jsxs("button",{type:"button",onClick:()=>l("isRecurring",!s.isRecurring),className:"flex items-center gap-2 w-full p-2 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center transition-all duration-200 flex-shrink-0 ${s.isRecurring?"":"border-2"}`,style:{backgroundColor:s.isRecurring?"var(--accent-primary)":"transparent",borderColor:"var(--text-secondary)"},children:s.isRecurring&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("p",{className:"text-xs font-medium",style:{color:"var(--text-primary)"},children:"Recurrente"}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:"Se reinicia cada perÃ­odo"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[C&&k&&e.jsx("button",{type:"button",onClick:A,disabled:p,className:"px-3 py-2.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"var(--accent-red-dim)",color:"var(--accent-red)"},children:"Eliminar"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-3 py-2.5 rounded-lg text-xs sm:text-sm font-medium transition-colors disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:p?"Guardando...":C?"Guardar":"Crear"})]})]})]})]}),e.jsx(q,{isOpen:E,onClose:()=>T(!1),onConfirm:G,title:"Eliminar meta",message:`Â¿EstÃ¡s seguro de que quieres eliminar "${r==null?void 0:r.name}"? Esta acciÃ³n no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",variant:"danger"}),e.jsx(te,{isOpen:h,onClose:()=>L(!1),onSelect:t=>l("icon",t),currentValue:s.icon,showPredefined:!1,title:"Seleccionar Ã­cono"})]})}function le(){const{showError:r}=Y(),{goals:j,activeGoals:S,completedGoals:N,successRate:k,loading:v,refetch:p}=H(),{accounts:C}=U(),{categoriesWithId:s}=Q(),[n,E]=d.useState("active"),[T,h]=d.useState(null),[L,m]=d.useState(!1),[w,u]=d.useState(!1),[y,g]=d.useState(null),[x,M]=d.useState(!1),[o,b]=d.useState(new Set),[I,l]=d.useState(!1),i=d.useMemo(()=>{switch(n){case"active":return S;case"completed":return N;case"all":default:return j}},[n,j,S,N]),c=async t=>{try{u(!0),t.id?(await X(t),g({message:"Meta actualizada",type:"success"})):(await Z(t),g({message:"Meta creada",type:"success"})),m(!1),h(null),await p()}catch(a){console.error("Error saving goal:",a),r("Error",a.message||"No se pudo guardar la meta")}finally{u(!1)}},A=async t=>{try{u(!0),await W(t.id),g({message:"Meta eliminada",type:"success"}),h(null),await p()}catch(a){console.error("Error deleting goal:",a),r("Error",a.message||"No se pudo eliminar la meta")}finally{u(!1)}},G=()=>{M(!x),b(new Set)},_=t=>{const a=new Set(o);a.has(t)?a.delete(t):a.add(t),b(a)},z=()=>{o.size===i.length?b(new Set):b(new Set(i.map(t=>t.id)))},R=async()=>{try{u(!0);const t=Array.from(o).map(a=>W(a));await Promise.all(t),g({message:`${o.size} meta${o.size!==1?"s":""} eliminada${o.size!==1?"s":""}`,type:"success"}),b(new Set),M(!1),l(!1),await p()}catch(t){console.error("Error deleting goals:",t),r("Error",t.message||"No se pudieron eliminar las metas")}finally{u(!1)}},B=[{id:"active",label:"Activas",count:S.length},{id:"completed",label:"Completadas",count:N.length},{id:"all",label:"Todas",count:j.length}],D=N.filter(t=>t.percentageAchieved>=100).length;return v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(J,{})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Metas"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Alcanza tus objetivos financieros"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j.length>0&&!x&&e.jsx("button",{onClick:G,className:"p-2 rounded-xl transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},title:"SelecciÃ³n mÃºltiple",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h7M4 12h7m-7 7h7m5-14v14m0-14l3 3m-3-3l-3 3m3 11l3-3m-3 3l-3-3"})})}),!x&&e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Nueva meta"}),e.jsx("span",{className:"sm:hidden",children:"Nueva"})]})]})]}),x&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--accent-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:G,className:"p-2 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:"var(--text-secondary)"},title:"Cancelar selecciÃ³n",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:"var(--text-secondary)"},children:[e.jsx("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",style:{borderColor:o.size===i.length&&i.length>0?"var(--accent-primary)":"var(--border-subtle)",backgroundColor:o.size===i.length&&i.length>0?"var(--accent-primary)":"transparent"},children:o.size===i.length&&i.length>0&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),"Todos"]}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[o.size," seleccionada",o.size!==1?"s":""]})]}),o.size>0&&e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-red-dim)",color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar (",o.size,")"]})]}),j.length>0&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 p-4 rounded-2xl",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:"Metas activas"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:S.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:"Completadas"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--accent-green)"},children:D})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:"Tasa de Ã©xito"}),e.jsxs("p",{className:"text-2xl font-bold",style:{color:k>=50?"var(--accent-green)":"var(--accent-yellow, #eab308)"},children:[k.toFixed(0),"%"]})]})]}),e.jsx("div",{className:"flex gap-1 p-1 rounded-xl overflow-x-auto",style:{backgroundColor:"var(--bg-secondary)"},children:B.map(t=>e.jsxs("button",{onClick:()=>E(t.id),className:`
              flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap
              ${n===t.id?"shadow-sm":"hover:opacity-80"}
            `,style:{backgroundColor:n===t.id?"var(--bg-primary)":"transparent",color:n===t.id?"var(--text-primary)":"var(--text-muted)"},children:[t.label,t.count>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-xs",style:{backgroundColor:n===t.id?"var(--accent-primary-dim)":"var(--bg-tertiary)",color:n===t.id?"var(--accent-primary)":"var(--text-muted)"},children:t.count})]},t.id))}),i.length===0?e.jsxs("div",{className:"rounded-2xl p-8 text-center",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--text-muted)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),e.jsxs("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:[n==="active"&&"No hay metas activas",n==="completed"&&"No hay metas completadas",n==="all"&&"No hay metas"]}),e.jsx("p",{className:"text-sm mb-4",style:{color:"var(--text-muted)"},children:n==="all"||n==="active"?"Crea tu primera meta y empieza a ahorrar":"Las metas completadas aparecerÃ¡n aquÃ­"}),(n==="all"||n==="active")&&e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"+ Crear meta"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(t=>e.jsxs("div",{className:"relative",children:[x&&e.jsx("button",{onClick:()=>_(t.id),className:"absolute top-3 left-3 z-10 w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all",style:{borderColor:o.has(t.id)?"var(--accent-primary)":"var(--border-subtle)",backgroundColor:o.has(t.id)?"var(--accent-primary)":"var(--bg-secondary)"},children:o.has(t.id)&&e.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx(se,{goal:t,categories:s,accounts:C,onClick:()=>x?_(t.id):h(t)})]},t.id))}),n==="completed"&&N.length>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl",style:{backgroundColor:"var(--accent-green-dim)",border:"1px solid var(--accent-green)"},children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ‰"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",style:{color:"var(--accent-green)"},children:"Â¡Felicitaciones!"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Has completado ",D," meta",D!==1?"s":"",". Â¡Sigue asÃ­!"]})]})]}),(L||T)&&e.jsx(re,{goal:T,categories:s,accounts:C,onSave:c,onDelete:A,onClose:()=>{m(!1),h(null)},loading:w}),y&&e.jsx(K,{message:y.message,type:y.type,onClose:()=>g(null)}),I&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md animate-fade-in",onClick:()=>l(!1)}),e.jsx("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"rgba(255, 92, 114, 0.12)",boxShadow:"0 0 30px rgba(255, 92, 114, 0.2)"},children:e.jsx("svg",{className:"w-8 h-8",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"var(--text-primary)"},children:"Eliminar metas"}),e.jsxs("p",{className:"text-sm mb-5",style:{color:"var(--text-secondary)"},children:["Â¿EstÃ¡s seguro de que quieres eliminar ",o.size," meta",o.size!==1?"s":"","?",e.jsx("br",{}),e.jsx("span",{className:"text-xs mt-1 inline-block",style:{color:"var(--text-muted)"},children:"Esta acciÃ³n no se puede deshacer"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-3.5 rounded-xl font-semibold transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.98]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:R,disabled:w,className:"flex-1 py-3.5 rounded-xl font-semibold text-white transition-all duration-200 hover:opacity-90 active:scale-[0.98] disabled:opacity-50",style:{backgroundColor:"var(--accent-red)",boxShadow:"0 4px 20px rgba(255, 92, 114, 0.3)"},children:w?"Eliminando...":"Eliminar"})]})]})})]})]})}export{le as default};
