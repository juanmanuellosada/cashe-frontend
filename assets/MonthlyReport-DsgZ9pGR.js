import{f as de,c as P,u as ge,bs as ye,r as c,bt as ve,bu as fe,bv as be,y as je,j as e,L as Ne}from"./index-BMb4UKgp.js";import{E as ne}from"./ExpensePieChart-DVqmDwEB.js";import"./PieChart-DFxKIsql.js";import"./Legend-Da5CIpTV.js";function Me(p,g){const{totalIngresos:i,totalGastos:o,balance:m,ahorroRate:l,prevMonthLabel:n,prevTotalIngresos:j,prevTotalGastos:h,gastosPorCategoria:S,ingresosPorCategoria:N,topGastos:C,gastoDiario:T,diaMasCaro:R,diasSinGastos:y,diasDelMes:v,transferencias:$,cuotasActivas:A,movimientos:E,cuentas:f,currency:w,proyeccion:G}=p,U=w,d=r=>de(r,U),z=new Date().toLocaleDateString("es-AR"),B=(r,b)=>{if(!b||b===0)return"N/A";const k=(r-b)/Math.abs(b)*100;return(k>=0?"+":"")+k.toFixed(1)+"%"};let a=`# Resumen Financiero â€” ${g}

`;if(a+=`## Resumen Ejecutivo

`,a+=`| | ARS |
|---|---|
`,a+=`| Total ingresos | ${d(i)} |
`,a+=`| Total gastos | ${d(o)} |
`,a+=`| Balance neto | ${d(m)} |
`,a+=`| Tasa de ahorro | ${l}% |

`,n&&(a+=`## Comparativa vs ${n}

`,a+=`| | ${n} | ${g} | VariaciÃ³n |
|---|---|---|---|
`,a+=`| Ingresos | ${d(j)} | ${d(i)} | ${B(i,j)} |
`,a+=`| Gastos | ${d(h)} | ${d(o)} | ${B(o,h)} |

`),f&&f.length>0&&(a+=`## Balance por Cuenta

`,a+=`| Cuenta | Tipo | Saldo actual |
|---|---|---|
`,f.forEach(r=>{r.ocultaDelBalance||(a+=`| ${r.nombre} | ${r.tipo} | ${d(r.balanceActual)} |
`)}),a+=`
`),S&&S.length>0&&(a+=`## Gastos por CategorÃ­a

`,a+=`| CategorÃ­a | Monto | % |
|---|---|---|
`,S.forEach(r=>{a+=`| ${r.name} | ${d(r.value)} | ${r.percentage.toFixed(1)}% |
`}),a+=`
`),N&&N.length>0&&(a+=`## Ingresos por CategorÃ­a

`,a+=`| CategorÃ­a | Monto | % |
|---|---|---|
`,N.forEach(r=>{a+=`| ${r.name} | ${d(r.value)} | ${r.percentage.toFixed(1)}% |
`}),a+=`
`),A&&A.length>0&&(a+=`## Cuotas Activas

`,a+=`| DescripciÃ³n | Cuotas | Monto mensual |
|---|---|---|
`,A.forEach(r=>{a+=`| ${r.nota||"Sin descripciÃ³n"} | ${r.cuota} | ${d(r.monto)} |
`}),a+=`
`),C&&C.length>0&&(a+=`## Top 5 Gastos del Mes

`,a+=`| Fecha | Nota | Monto | Cuenta |
|---|---|---|---|
`,C.forEach(r=>{a+=`| ${P(r.fecha,"short")} | ${r.nota||"-"} | ${d(r.monto)} | ${r.cuenta} |
`}),a+=`
`),G){const{nextMonthLabel:r,totalIngresosEstimado:b,totalCuotasSiguiente:k,gastosRecurrentesEstimados:I,margenDisponible:V,cuotas:D}=G,O=b>0?Math.round(V/b*100):0;a+=`## ðŸš€ ProyecciÃ³n para ${r}

`,a+=`> CuÃ¡nto podÃ©s ahorrar o invertir en ${r}, asumiendo que tus gastos se repiten igual que en ${g}.

`,a+=`| Concepto | Monto |
|---|---|
`,a+=`| + Ingresos recurrentes *(se excluyen regalos, reintegros y otros ingresos puntuales)* | ${d(b)} |
`,a+=`| âˆ’ Cuotas de tarjeta comprometidas *(${(D==null?void 0:D.length)??0} cuotas)* | ${d(k)} |
`,a+=`| âˆ’ Gastos corrientes estimados *(base: gastos sin cuotas de ${g})* | ${d(I)} |
`,a+=`| **= Lo que podÃ©s ahorrar / invertir** | **${d(V)} (${O}% del ingreso)** |

`,D&&D.length>0&&(a+=`### Cuotas comprometidas para ${r}

`,a+=`| DescripciÃ³n | Cuota | Monto |
|---|---|---|
`,D.forEach(F=>{a+=`| ${F.nota||"Sin descripciÃ³n"} | ${F.cuota} | ${d(F.monto)} |
`}),a+=`| **Total cuotas** | | **${d(k)}** |

`)}return a+=`## EstadÃ­sticas

`,a+=`- Gasto promedio diario: ${d(T)}
`,R&&(a+=`- DÃ­a mÃ¡s caro: ${P(R.fecha,"short")} (${d(R.total)})
`),a+=`- DÃ­as sin gastos: ${y} de ${v}

`,$&&$.length>0&&(a+=`## Transferencias del Mes

`,a+=`| Fecha | Desde | Hacia | Monto |
|---|---|---|---|
`,$.forEach(r=>{a+=`| ${P(r.fecha,"short")} | ${r.cuentaSaliente} | ${r.cuentaEntrante} | ${d(r.montoSaliente)} |
`}),a+=`
`),E&&E.length>0&&(a+=`## Movimientos del Mes

`,a+=`| Fecha | Tipo | Monto | CategorÃ­a | Cuenta | Nota |
|---|---|---|---|---|---|
`,E.forEach(r=>{const b=r.tipo==="ingreso"?"Ingreso":"Gasto";a+=`| ${P(r.fecha,"short")} | ${b} | ${d(r.monto)} | ${r.categoria||"-"} | ${r.cuenta} | ${r.nota||"-"} |
`}),a+=`
`),a+=`---
*Generado desde CashÃ© el ${z}*
`,a+=`*Para ver grÃ¡ficos, usar "Exportar PDF" en la aplicaciÃ³n*
`,a}function Ce(p,g){const i=new Blob([p],{type:"text/markdown;charset=utf-8"}),o=URL.createObjectURL(i),m=document.createElement("a");m.href=o,m.download=g,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(o)}const ae=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function Y(p,g,i){if(!p)return!1;const[o,m]=p.split("-").map(Number);return o===g&&m===i+1}function $e(p,g){return new Date(p,g+1,0).getDate()}function le(p,g){const i={};let o=0;return p.forEach(m=>{const l=m.categoria||"Sin categorÃ­a",n=m.montoPesos||m.monto||0;o+=n,i[l]||(i[l]={value:0,icon:null}),i[l].value+=n}),Object.entries(i).map(([m,l])=>({name:m,value:l.value,percentage:o>0?l.value/o*100:0})).sort((m,l)=>l.value-m.value)}function ce(p,g){const i={};let o=0;p.forEach(l=>{const n=(l.categoria||"Sin categorÃ­a").replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||l.categoria||"Sin categorÃ­a",j=l.montoPesos||l.monto||0,h=l.montoDolares||0;o+=j,i[n]||(i[n]={pesos:0,dolares:0}),i[n].pesos+=j,i[n].dolares+=h});const m=o;return Object.entries(i).map(([l,n])=>{const j=n.pesos;return{name:l,value:j,pesos:n.pesos,dolares:n.dolares,percentage:m>0?j/m*100:0,icon:null}}).sort((l,n)=>n.value-l.value).slice(0,10)}function Ee(){ge();const[p]=ye(),[g,i]=c.useState(!0),[o,m]=c.useState({expenses:[],incomes:[],transfers:[],accounts:[]}),l="ARS",[n,j]=c.useState(()=>{const t=p.get("mes");return t?parseInt(t.split("-")[0]):new Date().getFullYear()}),[h,S]=c.useState(()=>{const t=p.get("mes");return t?parseInt(t.split("-")[1])-1:new Date().getMonth()});c.useEffect(()=>{let t=!1;return i(!0),Promise.all([ve(),fe(),be(),je()]).then(([s,x,M,se])=>{t||(m({expenses:(s==null?void 0:s.gastos)||[],incomes:(x==null?void 0:x.ingresos)||[],transfers:(M==null?void 0:M.transferencias)||[],accounts:(se==null?void 0:se.accounts)||[]}),i(!1))}).catch(()=>{t||i(!1)}),()=>{t=!0}},[]);const N=`${ae[h]} ${n}`,C=h===0?n-1:n,T=h===0?11:h-1,R=`${ae[T]} ${C}`,y=c.useMemo(()=>o.expenses.filter(t=>Y(t.fecha,n,h)&&!t.isFuture),[o.expenses,n,h]),v=c.useMemo(()=>o.incomes.filter(t=>Y(t.fecha,n,h)&&!t.isFuture),[o.incomes,n,h]),$=c.useMemo(()=>o.transfers.filter(t=>Y(t.fecha,n,h)&&!t.isFuture),[o.transfers,n,h]),A=c.useMemo(()=>o.expenses.filter(t=>Y(t.fecha,C,T)&&!t.isFuture),[o.expenses,C,T]),E=c.useMemo(()=>o.incomes.filter(t=>Y(t.fecha,C,T)&&!t.isFuture),[o.incomes,C,T]),f=c.useMemo(()=>v.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[v]),w=c.useMemo(()=>y.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[y]),G=f-w,U=f>0?Math.round(G/f*100):0,d=c.useMemo(()=>E.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[E]),z=c.useMemo(()=>A.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[A]),B=c.useMemo(()=>new Set(E.map(t=>t.categoryId).filter(Boolean)),[E]),a=c.useMemo(()=>{if(B.size>0)return v.filter(x=>B.has(x.categoryId)).reduce((x,M)=>x+(M.montoPesos||M.monto||0),0);const t={};v.forEach(x=>{x.categoryId&&(t[x.categoryId]=(t[x.categoryId]||0)+(x.montoPesos||x.monto||0))});const s=Object.entries(t).sort((x,M)=>M[1]-x[1]);return s.length===0?f:s[0][1]},[v,B,f]),r=$e(n,h),b=r>0?w/r:0,k=c.useMemo(()=>[...y].sort((t,s)=>s.monto-t.monto).slice(0,5),[y]),I=c.useMemo(()=>y.filter(t=>t.idCompra!==null&&t.idCompra!==void 0),[y]),V=c.useMemo(()=>new Set(y.map(s=>s.fecha)).size,[y]),D=r-V,O=c.useMemo(()=>{const t={};y.forEach(x=>{t[x.fecha]||(t[x.fecha]=0),t[x.fecha]+=x.monto||0});const s=Object.entries(t).sort((x,M)=>M[1]-x[1]);return s.length===0?null:{fecha:s[0][0],total:s[0][1]}},[y]),F=c.useMemo(()=>le(y),[y,l]),K=c.useMemo(()=>le(v),[v,l]),Q=c.useMemo(()=>ce(y),[y,l]),X=c.useMemo(()=>ce(v),[v,l]),q=c.useMemo(()=>[...v.map(s=>({...s,tipo:"ingreso"})),...y.map(s=>({...s,tipo:"gasto"}))].sort((s,x)=>s.fecha>x.fecha?-1:1),[v,y]),Z=h===11?n+1:n,ee=h===11?0:h+1,W=`${ae[ee]} ${Z}`,L=c.useMemo(()=>o.expenses.filter(t=>Y(t.fecha,Z,ee)&&t.idCompra!==null&&t.idCompra!==void 0),[o.expenses,Z,ee]),xe=c.useMemo(()=>I.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[I]),J=c.useMemo(()=>L.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[L]),te=w-xe,H=a-J-te,me=()=>{h===0?(S(11),j(t=>t-1)):S(t=>t-1)},he=()=>{const t=new Date;n===t.getFullYear()&&h===t.getMonth()||(h===11?(S(0),j(s=>s+1)):S(s=>s+1))},ue=()=>{const t=new Date;return n===t.getFullYear()&&h===t.getMonth()},oe=(t,s)=>!s||s===0?null:(t-s)/Math.abs(s)*100,pe=()=>{const t={totalIngresos:f,totalGastos:w,balance:G,ahorroRate:U,prevMonthLabel:R,prevTotalIngresos:d,prevTotalGastos:z,gastosPorCategoria:F,ingresosPorCategoria:K,topGastos:k,gastoDiario:b,diaMasCaro:O,diasSinGastos:D,diasDelMes:r,transferencias:$,cuotasActivas:I,movimientos:q,cuentas:o.accounts,currency:l,proyeccion:{nextMonthLabel:W,totalIngresosEstimado:a,totalCuotasSiguiente:J,gastosRecurrentesEstimados:te,margenDisponible:H,cuotas:L}},s=Me(t,N),x=`cashe-resumen-${n}-${String(h+1).padStart(2,"0")}.md`;Ce(s,x)},u=t=>de(t,l);return g?e.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:e.jsx(Ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 report-controls",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:me,className:"p-2 rounded-lg hover:bg-[var(--bg-secondary)] transition-colors",style:{color:"var(--text-secondary)"},title:"Mes anterior",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-xl font-bold min-w-[180px] text-center",style:{color:"var(--text-primary)"},children:N}),e.jsx("button",{onClick:he,disabled:ue(),className:"p-2 rounded-lg hover:bg-[var(--bg-secondary)] transition-colors disabled:opacity-30 disabled:cursor-not-allowed",style:{color:"var(--text-secondary)"},title:"Mes siguiente",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("button",{onClick:pe,className:"flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Exportar MD"]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Resumen ejecutivo"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(_,{label:"Total ingresos",value:u(f),accent:"var(--accent-green)"}),e.jsx(_,{label:"Total gastos",value:u(w),accent:"var(--accent-red)"}),e.jsx(_,{label:"Balance neto",value:u(G),accent:G>=0?"var(--accent-green)":"var(--accent-red)"}),e.jsx(_,{label:"Tasa de ahorro",value:`${U}%`,accent:"var(--accent-primary)"})]})]}),e.jsxs("div",{className:"report-section rounded-2xl p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-4",style:{color:"var(--text-muted)"},children:["Comparativa vs ",R]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ie,{label:"Ingresos",prev:u(d),actual:u(f),pct:oe(f,d),positiveIsGood:!0}),e.jsx(ie,{label:"Gastos",prev:u(z),actual:u(w),pct:oe(w,z),positiveIsGood:!1})]})]}),e.jsxs("div",{className:"report-section rounded-2xl p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-4",style:{color:"var(--text-muted)"},children:"EstadÃ­sticas del mes"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(re,{label:"Gasto diario",value:u(b)}),e.jsx(re,{label:"DÃ­a mÃ¡s caro",value:O?`${P(O.fecha,"short")} â€” ${u(O.total)}`:"â€”"}),e.jsx(re,{label:"DÃ­as sin gastos",value:`${D} de ${r}`})]})]}),(Q.length>0||X.length>0)&&e.jsxs("div",{className:"report-section grid grid-cols-1 lg:grid-cols-2 gap-6 print-charts",children:[Q.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Gastos por categorÃ­a"}),e.jsx(ne,{data:Q,loading:!1,currency:l})]}),X.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Ingresos por categorÃ­a"}),e.jsx(ne,{data:X,loading:!1,currency:l})]})]}),o.accounts.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Balance por cuenta"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Cuenta"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Saldo actual"})]})}),e.jsx("tbody",{children:o.accounts.filter(t=>!t.ocultaDelBalance).map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nombre}),e.jsx("td",{className:"px-4 py-2.5",style:{color:"var(--text-secondary)"},children:t.tipo}),e.jsx("td",{className:"px-4 py-2.5 text-right font-medium",style:{color:t.balanceActual>=0?"var(--accent-green)":"var(--accent-red)"},children:u(t.balanceActual)})]},t.id))})]})})]}),F.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Gastos por categorÃ­a"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"CategorÃ­a"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"%"})]})}),e.jsx("tbody",{children:F.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.name}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:u(t.value)}),e.jsxs("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--text-secondary)"},children:[t.percentage.toFixed(1),"%"]})]},t.name))})]})})]}),K.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Ingresos por categorÃ­a"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"CategorÃ­a"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"%"})]})}),e.jsx("tbody",{children:K.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.name}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:u(t.value)}),e.jsxs("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--text-secondary)"},children:[t.percentage.toFixed(1),"%"]})]},t.name))})]})})]}),I.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Cuotas activas (",I.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"DescripciÃ³n"}),e.jsx("th",{className:"text-center px-4 py-3 font-medium",children:"Cuotas"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto mensual"})]})}),e.jsx("tbody",{children:I.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nota||"Sin descripciÃ³n"}),e.jsx("td",{className:"px-4 py-2.5 text-center",style:{color:"var(--text-secondary)"},children:t.cuota}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:u(t.monto)})]},t.id))})]})})]}),e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["ProyecciÃ³n â€” ",W]}),e.jsxs("div",{className:"rounded-2xl p-5 mb-4 space-y-2",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Ingresos recurrentes de ",N,e.jsx("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:"(se excluyen regalos, reintegros y otros ingresos puntuales)"})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-green)"},children:["+ ",u(a)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Cuotas comprometidas en ",W,e.jsxs("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:["(",L.length," cuota",L.length!==1?"s":""," de tarjeta)"]})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-red)"},children:["âˆ’ ",u(J)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Gastos corrientes estimados",e.jsxs("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:["(base: gastos sin cuotas de ",N,")"]})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-red)"},children:["âˆ’ ",u(te)]})]}),e.jsx("div",{className:"pt-2 mt-1",style:{borderTop:"1px solid var(--border-subtle)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:["Lo que podÃ©s ahorrar o invertir en ",W]}),e.jsxs("p",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["Si tus gastos se repiten igual que en ",N]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:H>0?"var(--accent-green)":"var(--accent-red)"},children:u(H)}),a>0&&e.jsxs("p",{className:"text-xs font-medium mt-0.5",style:{color:H>0?"var(--accent-green)":"var(--accent-red)"},children:[Math.round(H/a*100),"% del ingreso recurrente"]})]})]})})]}),L.length>0&&e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"DescripciÃ³n"}),e.jsx("th",{className:"text-center px-4 py-3 font-medium",children:"Cuota"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"})]})}),e.jsxs("tbody",{children:[L.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nota||"Sin descripciÃ³n"}),e.jsx("td",{className:"px-4 py-2.5 text-center",style:{color:"var(--text-secondary)"},children:t.cuota}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:u(t.monto)})]},t.id)),e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("td",{className:"px-4 py-2.5 font-semibold",colSpan:2,style:{color:"var(--text-primary)"},children:"Total cuotas"}),e.jsx("td",{className:"px-4 py-2.5 text-right font-semibold",style:{color:"var(--text-primary)"},children:u(J)})]})]})]})})]}),k.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Top 5 gastos del mes"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Nota"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden sm:table-cell",children:"Cuenta"})]})}),e.jsx("tbody",{children:k.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:P(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2.5 max-w-[200px] truncate",children:t.nota||"â€”"}),e.jsx("td",{className:"px-4 py-2.5 text-right font-medium",style:{color:"var(--accent-red)"},children:u(t.monto)}),e.jsx("td",{className:"px-4 py-2.5 hidden sm:table-cell",style:{color:"var(--text-secondary)"},children:t.cuenta})]},t.id))})]})})]}),$.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Transferencias (",$.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Desde"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Hacia"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"})]})}),e.jsx("tbody",{children:$.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:P(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2.5",children:t.cuentaSaliente}),e.jsx("td",{className:"px-4 py-2.5",children:t.cuentaEntrante}),e.jsx("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--accent-blue)"},children:u(t.montoSaliente)})]},t.id))})]})})]}),q.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Movimientos del mes (",q.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden sm:table-cell",children:"CategorÃ­a"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden md:table-cell",children:"Cuenta"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden lg:table-cell",children:"Nota"})]})}),e.jsx("tbody",{children:q.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:P(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded",style:{backgroundColor:t.tipo==="ingreso"?"var(--accent-green-subtle, rgba(34,197,94,0.1))":"var(--accent-red-subtle, rgba(239,68,68,0.1))",color:t.tipo==="ingreso"?"var(--accent-green)":"var(--accent-red)"},children:t.tipo==="ingreso"?"Ingreso":"Gasto"})}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",style:{color:t.tipo==="ingreso"?"var(--accent-green)":"var(--accent-red)"},children:u(t.monto)}),e.jsx("td",{className:"px-4 py-2 hidden sm:table-cell",style:{color:"var(--text-secondary)"},children:t.categoria||"â€”"}),e.jsx("td",{className:"px-4 py-2 hidden md:table-cell",style:{color:"var(--text-secondary)"},children:t.cuenta}),e.jsx("td",{className:"px-4 py-2 max-w-[200px] truncate hidden lg:table-cell",style:{color:"var(--text-secondary)"},children:t.nota||"â€”"})]},t.id))})]})})]}),q.length===0&&$.length===0&&e.jsxs("div",{className:"text-center py-16",style:{color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("p",{className:"text-sm",children:["No hay movimientos en ",N]})]})]})}function _({label:p,value:g,accent:i}){return e.jsxs("div",{className:"report-section rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-muted)"},children:p}),e.jsx("p",{className:"text-xl font-bold",style:{color:i||"var(--text-primary)"},children:g})]})}function ie({label:p,prev:g,actual:i,pct:o,positiveIsGood:m}){const l=o===null?"var(--text-secondary)":o>0===m?"var(--accent-green)":"var(--accent-red)";return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:p}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Anterior: ",g]}),e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:["Actual: ",i]}),o!==null&&e.jsxs("p",{className:"text-xs font-medium",style:{color:l},children:[o>=0?"+":"",o.toFixed(1),"%"]})]})]})}function re({label:p,value:g}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:p}),e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:g})]})}export{Ee as default};
