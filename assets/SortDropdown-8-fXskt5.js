import{r as n,j as s}from"./index-CKWgcbuo.js";function k({options:i,value:e,onChange:c,storageKey:o}){const[d,a]=n.useState(!1),l=n.useRef(null);n.useEffect(()=>{if(o){const r=localStorage.getItem(o);if(r)try{const t=JSON.parse(r);t.sortBy&&t.sortOrder&&c(t)}catch(t){console.error("Error parsing sort preference:",t)}}},[o]),n.useEffect(()=>{o&&e.sortBy&&localStorage.setItem(o,JSON.stringify(e))},[e,o]),n.useEffect(()=>{const r=t=>{l.current&&!l.current.contains(t.target)&&a(!1)};if(d)return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[d]);const f=i.find(r=>r.id===e.sortBy)||i[0],x=r=>{if(r===e.sortBy)c({sortBy:r,sortOrder:e.sortOrder==="asc"?"desc":"asc"});else{const t=i.find(h=>h.id===r),u=(t==null?void 0:t.defaultOrder)||"desc";c({sortBy:r,sortOrder:u})}a(!1)},m=r=>{r.stopPropagation(),c({...e,sortOrder:e.sortOrder==="asc"?"desc":"asc"})};return s.jsxs("div",{className:"relative",ref:l,children:[s.jsxs("button",{onClick:()=>a(!d),className:"flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),s.jsx("span",{className:"hidden sm:inline",children:f==null?void 0:f.label}),s.jsx("span",{onClick:m,className:"p-0.5 rounded hover:bg-white/10 transition-colors cursor-pointer",title:e.sortOrder==="asc"?"Ascendente":"Descendente",role:"button",tabIndex:0,onKeyDown:r=>r.key==="Enter"&&m(r),children:s.jsx("svg",{className:`w-3.5 h-3.5 transition-transform duration-200 ${e.sortOrder==="asc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),d&&s.jsx("div",{className:"absolute right-0 mt-2 py-2 rounded-xl shadow-lg z-50 min-w-[160px] animate-scale-in",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:i.map(r=>s.jsxs("button",{onClick:()=>x(r.id),className:"w-full px-4 py-2.5 text-left text-sm flex items-center justify-between gap-3 transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:e.sortBy===r.id?"var(--accent-primary)":"var(--text-primary)"},children:[s.jsx("span",{children:r.label}),e.sortBy===r.id&&s.jsx("svg",{className:`w-4 h-4 transition-transform ${e.sortOrder==="asc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},r.id))})]})}export{k as S};
