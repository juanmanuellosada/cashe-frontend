import{r as n,a0 as pe,j as e,u as Te,g as Ve,h as me,k as he,f as z,d as fe,a1 as $e,a2 as He,D as Oe,a3 as ge,a4 as Fe}from"./index-DidX2qV_.js";import{D as Ue}from"./DateRangePicker-BGd6Bhab.js";import{S as Ie}from"./SortDropdown-D6jj1Sg5.js";function Pe({children:te,onDelete:D,onEdit:g,disabled:x=!1,deleteLabel:se="Eliminar",editLabel:A="Editar",threshold:m=80}){const[R,L]=n.useState(0),[C,a]=n.useState(!1),[J,O]=n.useState(!1),re=n.useRef(null),c=n.useRef(0),M=n.useRef(0),p=n.useRef(0),v=pe(),j=n.useRef(!1),k=n.useRef(null),W=n.useCallback(N=>{x||(c.current=N.touches[0].clientX,M.current=N.touches[0].clientY,p.current=c.current,j.current=!1,k.current=null,C&&O(!0))},[x,C]),K=n.useCallback(N=>{if(x||c.current===0)return;const V=N.touches[0].clientX-c.current,b=N.touches[0].clientY-M.current;if(k.current===null&&(Math.abs(V)>10||Math.abs(b)>10)&&(k.current=Math.abs(V)>Math.abs(b)),!k.current)return;O(!0),p.current=N.touches[0].clientX;let E;C?E=Math.min(0,Math.max(-m,-m+V)):E=Math.min(0,Math.max(-m*1.5,V)),L(E),Math.abs(E)>=m&&!j.current&&(v.impact(),j.current=!0),Math.abs(V)>10&&N.preventDefault()},[x,m,v,C]),F=n.useCallback(()=>{x||(c.current=0,M.current=0,k.current=null,O(!1),Math.abs(R)>=m*.5?(L(-m),a(!0),v.selection()):(L(0),a(!1)))},[x,R,m,v]),ae=n.useCallback(()=>{v.warning(),L(0),a(!1),D==null||D()},[v,D]),S=n.useCallback(()=>{v.light(),L(0),a(!1),g==null||g()},[v,g]),T=n.useCallback(()=>{L(0),a(!1)},[]),l=Math.min(1,Math.abs(R)/(m*.5)),U=Math.abs(R)>10;return e.jsxs("div",{ref:re,className:"relative overflow-hidden",style:{touchAction:J?"none":"pan-y"},children:[e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-stretch",style:{opacity:l,pointerEvents:U?"auto":"none"},children:[g&&e.jsx("button",{onClick:S,className:"flex items-center justify-center px-4 transition-colors",style:{backgroundColor:"var(--accent-blue)",color:"white",minWidth:m/2},children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{className:"text-xs font-medium",children:A})]})}),D&&e.jsx("button",{onClick:ae,className:"flex items-center justify-center px-4 transition-colors",style:{backgroundColor:"var(--accent-red)",color:"white",minWidth:g?m/2:m},children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{className:"text-xs font-medium",children:se})]})})]}),e.jsx("div",{className:"relative bg-inherit",style:{transform:`translateX(${R}px)`,transition:J?"none":"transform 0.2s ease-out",backgroundColor:"var(--bg-secondary)"},onTouchStart:W,onTouchMove:K,onTouchEnd:F,onClick:C?T:void 0,children:te})]})}function Ye({title:te,movements:D,accounts:g,categories:x,loading:se,onMovementClick:A,onMovementDelete:m,onBulkDelete:R,onBulkUpdate:L,onAddClick:C,type:a}){const J=Te(),{showError:O}=Ve(),re=pe(),[c,M]=n.useState({from:null,to:null}),[p,v]=n.useState([]),[j,k]=n.useState([]),[W,K]=n.useState(""),[F,ae]=n.useState(!1),[S,T]=n.useState(null),[l,U]=n.useState("ARS"),[N,V]=n.useState(window.innerWidth<1024);n.useEffect(()=>{const t=()=>V(window.innerWidth<1024);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const[b,E]=n.useState(!1),[h,I]=n.useState(new Set),[$,y]=n.useState(null),[P,H]=n.useState(""),[ne,G]=n.useState(""),[B,Q]=n.useState(!1),Z=`cashe-sort-${a}`,_=`cashe-filters-${a}`,[Y,ce]=n.useState({sortBy:"date",sortOrder:"desc"}),[ie,ve]=n.useState(!1),[X,be]=n.useState(!1);n.useEffect(()=>{const t=localStorage.getItem(Z);if(t)try{const s=JSON.parse(t);s.sortBy&&s.sortOrder&&ce(s)}catch(s){console.error("Error parsing sort preference:",s)}ve(!0)},[Z]),n.useEffect(()=>{ie&&localStorage.setItem(Z,JSON.stringify(Y))},[Y,Z,ie]),n.useEffect(()=>{const t=localStorage.getItem(_);let s=!1;if(t)try{const r=JSON.parse(t);r.selectedAccounts&&v(r.selectedAccounts),r.selectedCategories&&k(r.selectedCategories),r.dateRange&&(r.dateRange.from||r.dateRange.to)&&(M(r.dateRange),s=!0)}catch(r){console.error("Error parsing filter preference:",r)}if(!s&&(a==="gasto"||a==="ingreso")){const r=new Date;M({from:he(r),to:me(r)})}be(!0)},[_,a]),n.useEffect(()=>{if(!X||g.length===0)return;const t=g.map(s=>s.nombre);v(s=>s.filter(r=>t.includes(r)))},[g,X]),n.useEffect(()=>{if(!X||x.length===0)return;const t=x.map(s=>typeof s=="object"?s.value||s.label:s);k(s=>s.filter(r=>t.includes(r)))},[x,X]),n.useEffect(()=>{X&&localStorage.setItem(_,JSON.stringify({selectedAccounts:p,selectedCategories:j,dateRange:c}))},[p,j,c,_,X]);const je=n.useMemo(()=>a==="transferencia"?[{id:"date",label:"Fecha",defaultOrder:"desc"},{id:"amount",label:"Monto",defaultOrder:"desc"},{id:"accountFrom",label:"Cuenta origen",defaultOrder:"asc"},{id:"accountTo",label:"Cuenta destino",defaultOrder:"asc"}]:[{id:"date",label:"Fecha",defaultOrder:"desc"},{id:"amount",label:"Monto",defaultOrder:"desc"},{id:"category",label:"Categoría",defaultOrder:"asc"},{id:"account",label:"Cuenta",defaultOrder:"asc"}],[a]),f=n.useMemo(()=>{let t=[...D];if(c.from){const o=new Date(c.from);o.setHours(0,0,0,0),t=t.filter(u=>new Date(u.fecha)>=o)}if(c.to){const o=new Date(c.to);o.setHours(23,59,59,999),t=t.filter(u=>new Date(u.fecha)<=o)}if(p.length>0&&(a==="transferencia"?t=t.filter(o=>p.includes(o.cuentaSaliente)||p.includes(o.cuentaEntrante)):t=t.filter(o=>p.includes(o.cuenta))),j.length>0&&a!=="transferencia"&&(t=t.filter(o=>j.includes(o.categoria))),W.trim()){const o=W.toLowerCase().trim();t=t.filter(u=>{const w=(u.nota||"").toLowerCase(),Ee=(u.categoria||"").toLowerCase(),Be=(u.cuenta||"").toLowerCase(),ze=(u.cuentaSaliente||"").toLowerCase(),We=(u.cuentaEntrante||"").toLowerCase();return w.includes(o)||Ee.includes(o)||Be.includes(o)||ze.includes(o)||We.includes(o)})}const{sortBy:s,sortOrder:r}=Y,d=r==="asc"?1:-1;return t.sort((o,u)=>{let w=0;switch(s){case"date":w=new Date(o.fecha)-new Date(u.fecha);break;case"amount":a==="transferencia"?w=(o.montoSaliente||0)-(u.montoSaliente||0):w=(o.monto||0)-(u.monto||0);break;case"category":w=(o.categoria||"").localeCompare(u.categoria||"");break;case"account":w=(o.cuenta||"").localeCompare(u.cuenta||"");break;case"accountFrom":w=(o.cuentaSaliente||"").localeCompare(u.cuentaSaliente||"");break;case"accountTo":w=(o.cuentaEntrante||"").localeCompare(u.cuentaEntrante||"");break;default:w=0}return w*d}),t},[D,c,p,j,W,a,Y]),oe=n.useMemo(()=>{if(a==="transferencia")if(l==="ARS"){const t=f.reduce((r,d)=>r+(d.montoSaliente||0),0),s=f.reduce((r,d)=>r+(d.montoEntrante||0),0);return{totalSaliente:t,totalEntrante:s}}else{const t=f.reduce((r,d)=>r+(d.montoSalienteDolares||0),0),s=f.reduce((r,d)=>r+(d.montoEntranteDolares||0),0);return{totalSaliente:t,totalEntrante:s}}else return l==="ARS"?{total:f.reduce((s,r)=>s+(r.montoPesos||r.monto||0),0)}:{total:f.reduce((s,r)=>s+(r.montoDolares||0),0)}},[f,a,l]),ye=t=>{v(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},ke=t=>{k(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},Ne=()=>{M({from:null,to:null}),v([]),k([]),K("")},we=n.useMemo(()=>{if(a!=="gasto"&&a!=="ingreso"||!c.from||!c.to)return!1;const t=new Date,s=he(t),r=me(t),d=c.from instanceof Date?c.from:new Date(c.from),o=c.to instanceof Date?c.to:new Date(c.to);return d.toDateString()===s.toDateString()&&o.toDateString()===r.toDateString()},[c,a]),ee=[(c.from||c.to)&&!we,p.length>0,j.length>0,W.trim().length>0].filter(Boolean).length,de=()=>{E(!b),I(new Set)},ue=t=>{const s=new Set(h);s.has(t)?s.delete(t):s.add(t),I(s)},Ce=()=>{const t=new Set(f.map(s=>s.rowIndex||s.id));I(t)},Se=()=>{I(new Set)},xe=()=>f.filter(t=>h.has(t.rowIndex||t.id)),Le=async()=>{if(R){Q(!0);try{const t=xe();await R(t),I(new Set),E(!1),y(null)}catch(t){console.error("Error in bulk delete:",t),O("No se pudieron eliminar los movimientos",t.message)}finally{Q(!1)}}},le=async()=>{let t,s;if($==="editAccount")t="cuenta",s=P;else if($==="editCategory")t="categoria",s=P;else if($==="editDate")t="fecha",s=ne;else return;if(!(!L||!s)){Q(!0);try{const r=xe();await L(r,t,s),I(new Set),E(!1),y(null),H(""),G("")}catch(r){console.error("Error in bulk update:",r),O("No se pudieron actualizar los movimientos",r.message)}finally{Q(!1)}}},i=()=>{switch(a){case"ingreso":return"var(--accent-green)";case"gasto":return"var(--accent-red)";case"transferencia":return"var(--accent-blue)";default:return"var(--accent-primary)"}},q=()=>{switch(a){case"ingreso":return"rgba(34, 197, 94, 0.15)";case"gasto":return"rgba(239, 68, 68, 0.15)";case"transferencia":return"rgba(59, 130, 246, 0.15)";default:return"rgba(96, 165, 250, 0.15)"}},Me=(t,s)=>{t.stopPropagation(),T(s)},De=()=>{S&&(m==null||m(S),T(null))},Ae=()=>e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl skeleton"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-28 skeleton"}),e.jsx("div",{className:"h-3 w-40 skeleton"})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"h-5 w-24 skeleton ml-auto"}),e.jsx("div",{className:"h-3 w-16 skeleton ml-auto"})]})]})},t))}),Re=()=>e.jsxs("div",{className:"rounded-2xl p-8 text-center",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:q()},children:a==="transferencia"?e.jsx("svg",{className:"w-10 h-10",style:{color:i()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}):a==="ingreso"?e.jsx("svg",{className:"w-10 h-10",style:{color:i()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):e.jsx("svg",{className:"w-10 h-10",style:{color:i()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsxs("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:["Sin ",a==="transferencia"?"transferencias":a==="ingreso"?"ingresos":"gastos"]}),e.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-secondary)"},children:ee>0?"No se encontraron movimientos con los filtros seleccionados":`Aun no has registrado ningun ${a==="transferencia"?"a":""} ${a}`}),e.jsxs("button",{onClick:()=>C?C():J("/nuevo"),className:"px-6 py-3 rounded-xl font-medium text-white transition-all duration-200 hover:opacity-90",style:{backgroundColor:i()},children:["Agregar ",a==="transferencia"?"transferencia":a]})]});return se?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-6 w-24 skeleton"}),e.jsx("div",{className:"h-8 w-32 skeleton"})]}),Ae()]}):e.jsxs("div",{className:"space-y-4",children:[b&&e.jsx("div",{className:"sticky top-14 z-40 rounded-2xl p-3 animate-fade-in",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--accent-primary)"},children:e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[h.size," seleccionado",h.size!==1?"s":""]}),e.jsx("button",{onClick:h.size===f.length?Se:Ce,className:"text-xs px-2 py-1 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},children:h.size===f.length?"Deseleccionar todo":"Seleccionar todo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>y("delete"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]}),e.jsxs("button",{onClick:()=>y("editAccount"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"rgba(96, 165, 250, 0.15)",color:"var(--accent-blue)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Cuenta"]}),a!=="transferencia"&&e.jsxs("button",{onClick:()=>y("editCategory"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"rgba(20, 184, 166, 0.15)",color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Categoría"]}),e.jsxs("button",{onClick:()=>y("editDate"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"rgba(168, 85, 247, 0.15)",color:"var(--accent-purple)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Fecha"]})]}),e.jsx("button",{onClick:de,className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Cancelar"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:te}),e.jsxs("div",{className:"flex items-center gap-2",children:[!b&&e.jsx("button",{onClick:()=>C?C():J("/nuevo"),className:"p-2 rounded-xl transition-colors",style:{backgroundColor:i(),color:"white"},title:`Agregar ${a==="transferencia"?"transferencia":a}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),!b&&f.length>0&&e.jsx("button",{onClick:de,className:"p-2 rounded-xl transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},title:"Selección múltiple",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h7M4 12h7m-7 7h7m5-14v14m0-14l3 3m-3-3l-3 3m3 11l3-3m-3 3l-3-3"})})}),e.jsxs("div",{className:"hidden sm:inline-flex rounded-xl p-1",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>U("ARS"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:l==="ARS"?"var(--accent-primary)":"transparent",color:l==="ARS"?"white":"var(--text-secondary)",boxShadow:l==="ARS"?"0 4px 12px var(--accent-primary-glow)":"none"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),e.jsxs("button",{onClick:()=>U("USD"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:l==="USD"?"var(--accent-green)":"transparent",color:l==="USD"?"white":"var(--text-secondary)",boxShadow:l==="USD"?"0 4px 12px rgba(0, 217, 154, 0.3)":"none"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{value:c,onChange:M}),(c.from||c.to)&&e.jsx("button",{onClick:()=>M({from:null,to:null}),className:"p-1.5 rounded-lg transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},title:"Limpiar fechas",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),e.jsx("div",{className:"sm:hidden",children:e.jsxs("div",{className:"flex w-full p-1 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>U("ARS"),className:"flex-1 py-2 rounded-md text-xs font-semibold transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:l==="ARS"?"var(--bg-elevated)":"transparent",color:l==="ARS"?"var(--text-primary)":"var(--text-muted)"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"Pesos (ARS)"]}),e.jsxs("button",{onClick:()=>U("USD"),className:"flex-1 py-2 rounded-md text-xs font-semibold transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:l==="USD"?"var(--bg-elevated)":"transparent",color:l==="USD"?"var(--text-primary)":"var(--text-muted)"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"Dólares (USD)"]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>ae(!F),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200",style:{backgroundColor:F?q():"var(--bg-tertiary)",color:F?i():"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{children:"Filtros"}),ee>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:i()},children:ee})]}),e.jsx(Ie,{options:je,value:Y,onChange:ce})]}),F&&e.jsxs("div",{className:"p-4 rounded-2xl space-y-4 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:W,onChange:t=>K(t.target.value),placeholder:a==="transferencia"?"Buscar por cuenta...":"Buscar por nota, categoria, cuenta...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl text-sm",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"}})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:"Cuentas"}),e.jsx("button",{onClick:()=>{const t=g.map(s=>s.nombre);p.length===g.length?v([]):v(t)},className:"text-xs font-medium transition-colors hover:opacity-80",style:{color:i()},children:p.length===g.length?"Ninguna":"Todas"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(t=>e.jsx("button",{onClick:()=>ye(t.nombre),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200",style:{backgroundColor:p.includes(t.nombre)?i():"var(--bg-tertiary)",color:p.includes(t.nombre)?"white":"var(--text-secondary)"},children:t.nombre},t.nombre))})]}),a!=="transferencia"&&x.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:"Categorias"}),e.jsx("button",{onClick:()=>{const t=x.map(s=>typeof s=="object"?s.value||s.label:s);j.length===x.length?k([]):k(t)},className:"text-xs font-medium transition-colors hover:opacity-80",style:{color:i()},children:j.length===x.length?"Ninguna":"Todas"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:x.map((t,s)=>{const r=typeof t=="object"?t.value||t.label:t,d=typeof t=="object"?t.label||t.value:t;return e.jsx("button",{onClick:()=>ke(r),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200",style:{backgroundColor:j.includes(r)?i():"var(--bg-tertiary)",color:j.includes(r)?"white":"var(--text-secondary)"},children:d},r||`cat-${s}`)})})]}),ee>0&&e.jsx("button",{onClick:Ne,className:"text-xs font-medium transition-colors hover:opacity-80",style:{color:i()},children:"Limpiar filtros"})]}),e.jsxs("div",{className:"rounded-2xl p-4 relative overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${q()} 0%, transparent 70%)`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("p",{className:"text-xs mb-3",style:{color:"var(--text-secondary)"},children:[f.length," ",a==="transferencia"?"transferencia":"movimiento",f.length!==1?"s":""]}),a==="transferencia"?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs mb-1 flex items-center gap-1",style:{color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7"})}),"Total saliente"]}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-red)"},children:z(oe.totalSaliente,l)})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs mb-1 flex items-center gap-1 justify-end",style:{color:"var(--accent-green)"},children:["Total entrante",e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l-4-4m0 0l4-4m-4 4h14"})})]}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-green)"},children:z(oe.totalEntrante,l)})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:i()},children:z(oe.total,l)})]})]})]}),f.length===0?Re():e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 text-xs font-semibold",style:{color:"var(--text-secondary)"},children:[b&&e.jsx("div",{className:"w-6"}),e.jsx("div",{className:"w-12"})," ",e.jsx("div",{className:"flex-1",children:"Descripción"}),e.jsx("div",{className:"w-24 text-center",children:"Fecha"}),a!=="transferencia"&&e.jsx("div",{className:"w-32 text-center",children:"Cuenta"}),e.jsx("div",{className:"w-28 text-right",children:"Monto"}),e.jsx("div",{className:"w-10"})," "]}),f.map((t,s)=>{const r=t.rowIndex||t.id,d=h.has(r),o=e.jsx("div",{className:`group rounded-2xl p-4 transition-all duration-200 ${!b&&!N?"hover:scale-[1.01]":""}`,style:{backgroundColor:d?q():"var(--bg-secondary)",border:d?`1px solid ${i()}`:"1px solid transparent"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[b&&e.jsx("button",{onClick:()=>ue(r),className:"w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0 transition-all duration-200",style:{backgroundColor:d?i():"var(--bg-tertiary)",border:d?"none":"2px solid var(--border-subtle)"},children:d&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("button",{onClick:()=>b?ue(r):A==null?void 0:A(t),className:"flex items-center gap-3 flex-1 min-w-0 text-left",style:{backgroundColor:"transparent"},children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-transform duration-200 ${b?"":"group-hover:scale-110"}`,style:{backgroundColor:q()},children:a==="transferencia"?e.jsx("svg",{className:"w-6 h-6",style:{color:i()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}):a==="ingreso"?e.jsx("svg",{className:"w-6 h-6",style:{color:i()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):e.jsx("svg",{className:"w-6 h-6",style:{color:i()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5 flex-wrap",children:[e.jsx("p",{className:"font-semibold truncate",style:{color:"var(--text-primary)"},children:a==="transferencia"?"Transferencia":t.categoria||"-"}),t.isFuture&&e.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-medium flex items-center gap-1",style:{backgroundColor:"var(--accent-yellow-dim)",color:"var(--accent-yellow)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Futuro"]}),t.isRecurring&&e.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-medium flex items-center gap-1",style:{backgroundColor:"var(--accent-purple-dim)",color:"var(--accent-purple)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Recurrente"]}),t.cuota&&e.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-medium flex items-center gap-1",style:{backgroundColor:"rgba(20, 184, 166, 0.15)",color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),t.cuota]}),a!=="transferencia"&&t.categoria&&!t.cuota&&!t.isFuture&&!t.isRecurring&&e.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium hidden sm:inline-block",style:{backgroundColor:q(),color:i()},children:t.categoria.split(" ")[0]})]}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:a==="transferencia"?`${t.cuentaSaliente} → ${t.cuentaEntrante}`:t.cuenta}),t.nota&&e.jsxs("p",{className:"text-xs truncate mt-0.5 italic",style:{color:"var(--text-secondary)",opacity:.7},children:['"',t.nota,'"']})]}),e.jsx("div",{className:"hidden lg:block text-center flex-shrink-0 w-24",children:e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:fe(t.fecha,"short")})}),a!=="transferencia"&&e.jsx("div",{className:"hidden lg:block text-center flex-shrink-0 w-32",children:e.jsx("p",{className:"text-sm truncate",style:{color:"var(--text-secondary)"},children:t.cuenta})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-xl font-bold lg:text-lg",style:{color:i()},children:a==="transferencia"?z(l==="ARS"?t.montoSaliente:t.montoSalienteDolares||0,l):a==="ingreso"?`+${z(l==="ARS"?t.montoPesos||t.monto:t.montoDolares||0,l)}`:`-${z(l==="ARS"?t.montoPesos||t.monto:t.montoDolares||0,l)}`}),e.jsx("p",{className:"text-xs lg:hidden",style:{color:"var(--text-secondary)"},children:fe(t.fecha,"short")})]})]}),t.attachmentUrl&&!b&&e.jsx("button",{onClick:u=>{u.stopPropagation(),He(t.attachmentUrl,t.attachmentName)},className:"p-2 rounded-xl flex-shrink-0 transition-all hover:scale-105",style:{backgroundColor:"var(--bg-tertiary)"},title:t.attachmentName?`Descargar: ${t.attachmentName}`:"Descargar adjunto",children:$e(t.attachmentName)?e.jsx("img",{src:t.attachmentUrl,alt:"Adjunto",className:"w-6 h-6 rounded object-cover"}):e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),!b&&!N&&e.jsx("button",{onClick:u=>Me(u,t),className:"p-2 rounded-xl flex-shrink-0 transition-all duration-200 opacity-0 group-hover:opacity-100 hover:bg-red-500/20",style:{color:"var(--text-secondary)"},title:"Eliminar",children:e.jsx("svg",{className:"w-5 h-5 hover:text-red-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})});return N&&!b?e.jsx(Pe,{onDelete:()=>{re.warning(),T(t)},onEdit:()=>A==null?void 0:A(t),children:o},r):e.jsx("div",{children:o},r)})]}),S&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>T(null)}),e.jsx("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},children:e.jsx("svg",{className:"w-7 h-7",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Eliminar movimiento"}),e.jsxs("p",{className:"text-sm mb-5",style:{color:"var(--text-secondary)"},children:["¿Estas seguro de que quieres eliminar este movimiento?",e.jsx("br",{}),e.jsx("span",{className:"font-semibold text-base",style:{color:i()},children:a==="transferencia"?z(l==="ARS"?S.montoSaliente:S.montoSalienteDolares||0,l):z(l==="ARS"?S.montoPesos||S.monto:S.montoDolares||0,l)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>T(null),className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:De,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90",style:{backgroundColor:"var(--accent-red)"},children:"Eliminar"})]})]})})]}),$==="delete"&&e.jsx(Oe,{isOpen:!0,title:"Eliminar movimientos",message:`¿Estás seguro de que quieres eliminar ${h.size} movimiento${h.size!==1?"s":""}? Esta acción no se puede deshacer.`,confirmText:B?"Eliminando...":"Eliminar todos",variant:"danger",loading:B,onConfirm:Le,onClose:()=>y(null)}),$==="editAccount"&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>{y(null),H("")}}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Cambiar cuenta"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Cambiar la cuenta de ",h.size," movimiento",h.size!==1?"s":""]}),e.jsx("div",{className:"mb-4",children:e.jsx(ge,{value:P,onChange:t=>H(t.target.value),options:g.map(t=>({value:t.nombre,label:t.nombre})),placeholder:"Seleccionar cuenta..."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{y(null),H("")},className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:le,disabled:B||!P,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-blue)"},children:B?"Actualizando...":"Aplicar"})]})]})]}),$==="editCategory"&&e.jsxs("div",{className:"fixed inset-0 z-[130] flex items-start justify-center p-4 pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>{y(null),H("")}}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Cambiar categoría"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Cambiar la categoría de ",h.size," movimiento",h.size!==1?"s":""]}),e.jsx("div",{className:"mb-4",children:e.jsx(ge,{value:P,onChange:t=>H(t.target.value),options:x.map(t=>{const s=typeof t=="object"?t.value||t.label:t,r=typeof t=="object"?t.label||t.value:t,d=typeof t=="object"?t.icon:null;return{value:s,label:r,icon:d}}),placeholder:"Seleccionar categoría..."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{y(null),H("")},className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:le,disabled:B||!P,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)"},children:B?"Actualizando...":"Aplicar"})]})]})]}),$==="editDate"&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>{y(null),G("")}}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Cambiar fecha"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Cambiar la fecha de ",h.size," movimiento",h.size!==1?"s":""]}),e.jsx("div",{className:"mb-4",children:e.jsx(Fe,{value:ne,onChange:t=>G(t.target.value),name:"bulkDate"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{y(null),G("")},className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:le,disabled:B||!ne,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-purple, #a855f7)"},children:B?"Actualizando...":"Aplicar"})]})]})]})]})}export{Ye as M};
