import{r as l,h as k,k as S,a9 as ie,b as de,j as e,ab as xe,f as p,d as _,aa as me,n as he,o as ue,c as ge}from"./index-CKWgcbuo.js";import{D as pe,s as I}from"./DateRangePicker-581Jnx40.js";import{a7 as F,ac as ve,ad as fe,ae as ye,ab as z,af as q,a8 as J,a9 as Q,aa as Z}from"./PieChart-ClTNeDjj.js";import{C as je,L as be}from"./CartesianGrid-BFys7xF_.js";const y=["#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#3b82f6","#14b8a6","#ec4899","#6366f1","#84cc16"],Ne=[{label:"Este mes",getValue:()=>({from:S(new Date),to:k(new Date)})},{label:"Mes anterior",getValue:()=>({from:S(I(new Date,1)),to:k(I(new Date,1))})},{label:"3 meses",getValue:()=>({from:S(I(new Date,2)),to:k(new Date)})},{label:"Este anio",getValue:()=>({from:xe(new Date),to:k(new Date)})}];function De(){var U,H,Y,X;const[W,ee]=l.useState([]),[P,se]=l.useState([]),[D,te]=l.useState({ingresos:[],gastos:[]}),[re,G]=l.useState(!0),[o,V]=l.useState("ARS"),[m,ae]=l.useState({from:S(new Date),to:k(new Date)}),[i,N]=l.useState([]),[h,L]=l.useState([]),[u,M]=l.useState([]),[B,oe]=l.useState(!1),[E,ne]=l.useState(!1);l.useEffect(()=>{async function s(){try{G(!0);const[t,a,r]=await Promise.all([me(2e3),he(),ue()]);ee(t.movements||[]),se(a.accounts||[]),te(r.categorias||{ingresos:[],gastos:[]})}catch(t){console.error("Error loading data:",t)}finally{G(!1)}}s()},[]);const j=(s,t,a)=>{s.includes(a)?t(s.filter(r=>r!==a)):t([...s,a])},c=l.useMemo(()=>{if(!m.from||!m.to)return{gastos:[],ingresos:[]};const s=new Date(m.from);s.setHours(0,0,0,0);const t=new Date(m.to);t.setHours(23,59,59,999);const a=W.filter(r=>{const n=new Date(r.fecha);return!(n<s||n>t||i.length>0&&!i.includes(r.cuenta))});return{gastos:a.filter(r=>r.tipo==="gasto"),ingresos:a.filter(r=>r.tipo==="ingreso")}},[W,m,i]),O=l.useMemo(()=>h.length===0?c.gastos:c.gastos.filter(s=>h.includes(s.categoria)),[c.gastos,h]),T=l.useMemo(()=>u.length===0?c.ingresos:c.ingresos.filter(s=>u.includes(s.categoria)),[c.ingresos,u]),v=l.useMemo(()=>{const s=c.ingresos.reduce((d,f)=>d+(f.montoPesos||f.monto||0),0),t=c.gastos.reduce((d,f)=>d+(f.montoPesos||f.monto||0),0),a=c.ingresos.reduce((d,f)=>d+(f.montoDolares||0),0),r=c.gastos.reduce((d,f)=>d+(f.montoDolares||0),0),n=o==="ARS"?s:a,x=o==="ARS"?t:r,A=n-x,g=n>0?x/n*100:0;return{totalIngresos:n,totalGastos:x,balance:A,ratio:g}},[c,o]),$=l.useMemo(()=>!m.from||!m.to?[]:ie({start:m.from,end:m.to}).map(t=>{const a=S(t),r=k(t),n=de(t,"MMM",{locale:ge});let x=0,A=0;return c.ingresos.forEach(g=>{const d=new Date(g.fecha);d>=a&&d<=r&&(x+=o==="ARS"?g.montoPesos||g.monto||0:g.montoDolares||0)}),c.gastos.forEach(g=>{const d=new Date(g.fecha);d>=a&&d<=r&&(A+=o==="ARS"?g.montoPesos||g.monto||0:g.montoDolares||0)}),{month:n.charAt(0).toUpperCase()+n.slice(1),ingresos:x,gastos:A}}),[m,c,o]),b=l.useMemo(()=>{const s={};let t=0;return c.gastos.forEach(a=>{const r=a.categoria||"Sin categoria",n=r.replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||r,x=o==="ARS"?a.montoPesos||a.monto||0:a.montoDolares||0;t+=x,s[n]||(s[n]=0),s[n]+=x}),Object.entries(s).map(([a,r])=>({name:a,value:r,percentage:t>0?r/t*100:0})).sort((a,r)=>r.value-a.value).slice(0,8)},[c.gastos,o]),R=l.useMemo(()=>{const s={};let t=0;return c.ingresos.forEach(a=>{const r=a.categoria||"Sin categoria",n=r.replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||r,x=o==="ARS"?a.montoPesos||a.monto||0:a.montoDolares||0;t+=x,s[n]||(s[n]=0),s[n]+=x}),Object.entries(s).map(([a,r])=>({name:a,value:r,percentage:t>0?r/t*100:0})).sort((a,r)=>r.value-a.value).slice(0,8)},[c.ingresos,o]),w=l.useMemo(()=>[...O].sort((s,t)=>new Date(t.fecha)-new Date(s.fecha)),[O]),C=l.useMemo(()=>[...T].sort((s,t)=>new Date(t.fecha)-new Date(s.fecha)),[T]),K=({active:s,payload:t,color:a})=>{var r;if(s&&t&&t.length){const n=t[0].payload;return e.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:n.name}),e.jsx("p",{style:{color:a||"var(--accent-primary)"},children:p(n.value,o)}),e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[(r=n.percentage)==null?void 0:r.toFixed(1),"%"]})]})}return null},le=({active:s,payload:t,label:a})=>s&&t&&t.length?e.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[e.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:a}),t.map((r,n)=>e.jsxs("p",{style:{color:r.color},children:[r.name,": ",p(r.value,o)]},n)),t.length===2&&e.jsxs("p",{className:"mt-1 pt-1 text-sm",style:{borderTop:"1px solid var(--border-subtle)",color:t[0].value-t[1].value>=0?"var(--accent-green)":"var(--accent-red)"},children:["Balance: ",p(t[0].value-t[1].value,o)]})]}):null,ce=s=>s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(0)}K`:s;return re?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-7 w-40 skeleton rounded"}),e.jsx("div",{className:"h-10 w-48 skeleton rounded-lg"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[1,2,3,4].map(s=>e.jsx("div",{className:"rounded-2xl p-4 h-24 skeleton"},s))}),e.jsx("div",{className:"h-64 skeleton rounded-2xl"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Comparador"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>V("ARS"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:o==="ARS"?"var(--accent-primary)":"transparent",color:o==="ARS"?"white":"var(--text-secondary)",boxShadow:o==="ARS"?"0 4px 12px var(--accent-primary-glow)":"none"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),e.jsxs("button",{onClick:()=>V("USD"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:o==="USD"?"var(--accent-green)":"transparent",color:o==="USD"?"white":"var(--text-secondary)",boxShadow:o==="USD"?"0 4px 12px rgba(0, 217, 154, 0.3)":"none"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]}),e.jsx(pe,{value:m,onChange:ae,presets:Ne,defaultPreset:"Este mes"})]})]}),e.jsxs("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("button",{onClick:()=>oe(!B),className:"w-full p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:"Filtrar por cuentas"}),i.length>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:i.length})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${B?"rotate-180":""}`,style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),B&&e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(s=>{const t=i.includes(s.nombre);return e.jsx("button",{onClick:()=>j(i,N,s.nombre),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors",style:{backgroundColor:t?"var(--accent-primary)":"var(--bg-tertiary)",color:t?"white":"var(--text-secondary)"},children:s.nombre},s.nombre)})}),i.length>0&&e.jsx("button",{onClick:()=>N([]),className:"text-xs font-medium",style:{color:"var(--accent-primary)"},children:"Limpiar filtros"})]})]}),e.jsxs("div",{className:"rounded-2xl overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("button",{onClick:()=>ne(!E),className:"w-full p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:"Filtrar por categorias"}),h.length+u.length>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:h.length+u.length})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${E?"rotate-180":""}`,style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&e.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium mb-2 flex items-center gap-1.5",style:{color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Categorias de gastos"]}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-24 overflow-y-auto",children:(U=D.gastos)==null?void 0:U.map(s=>{const t=h.includes(s);return e.jsx("button",{onClick:()=>j(h,L,s),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors",style:{backgroundColor:t?"var(--accent-red)":"var(--bg-tertiary)",color:t?"white":"var(--text-secondary)"},children:s.length>20?s.substring(0,20)+"...":s},s)})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium mb-2 flex items-center gap-1.5",style:{color:"var(--accent-green)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"Categorias de ingresos"]}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-24 overflow-y-auto",children:(H=D.ingresos)==null?void 0:H.map(s=>{const t=u.includes(s);return e.jsx("button",{onClick:()=>j(u,M,s),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-colors",style:{backgroundColor:t?"var(--accent-green)":"var(--bg-tertiary)",color:t?"white":"var(--text-secondary)"},children:s.length>20?s.substring(0,20)+"...":s},s)})})]}),h.length+u.length>0&&e.jsx("button",{onClick:()=>{L([]),M([])},className:"text-xs font-medium",style:{color:"var(--accent-primary)"},children:"Limpiar filtros de categorias"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"rounded-2xl p-4 relative overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, transparent 70%)"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"rgba(34, 197, 94, 0.15)"},children:e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-green)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),e.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Ingresos"})]}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-green)"},children:p(v.totalIngresos,o)})]})]}),e.jsxs("div",{className:"rounded-2xl p-4 relative overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, transparent 70%)"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},children:e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Gastos"})]}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-red)"},children:p(v.totalGastos,o)})]})]}),e.jsxs("div",{className:"rounded-2xl p-4 relative overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:v.balance>=0?"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, transparent 70%)":"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, transparent 70%)"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:v.balance>=0?"rgba(34, 197, 94, 0.15)":"rgba(239, 68, 68, 0.15)"},children:v.balance>=0?e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-green)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Balance"})]}),e.jsxs("p",{className:"text-xl font-bold",style:{color:v.balance>=0?"var(--accent-green)":"var(--accent-red)"},children:[v.balance>=0?"+":"",p(v.balance,o)]})]})]}),e.jsxs("div",{className:"rounded-2xl p-4 relative overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, rgba(20, 184, 166, 0.1) 0%, transparent 70%)"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"rgba(20, 184, 166, 0.15)"},children:e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-purple)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Ratio"})]}),e.jsxs("p",{className:"text-lg font-bold",style:{color:"var(--accent-purple)"},children:[v.ratio.toFixed(0),"%"]}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"de tus ingresos"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Ingresos vs Gastos"}),$.length>0?e.jsx(F,{width:"100%",height:250,children:e.jsxs(ve,{data:$,margin:{top:10,right:10,left:-10,bottom:0},children:[e.jsx(je,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",vertical:!1}),e.jsx(fe,{dataKey:"month",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:{stroke:"var(--border-subtle)"},tickLine:!1}),e.jsx(ye,{tickFormatter:ce,tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(z,{content:e.jsx(le,{}),cursor:{fill:"var(--bg-tertiary)",opacity:.5}}),e.jsx(be,{wrapperStyle:{paddingTop:"10px"},formatter:s=>e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:s})}),e.jsx(q,{dataKey:"ingresos",name:"Ingresos",fill:"var(--accent-green)",radius:[4,4,0,0],maxBarSize:50}),e.jsx(q,{dataKey:"gastos",name:"Gastos",fill:"var(--accent-red)",radius:[4,4,0,0],maxBarSize:50})]})}):e.jsx("div",{className:"h-[250px] flex items-center justify-center",style:{color:"var(--text-secondary)"},children:"No hay datos disponibles"})]}),e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Gastos por Categoria"}),b.length>0?e.jsx(F,{width:"100%",height:250,children:e.jsxs(J,{children:[e.jsx(Q,{data:b,cx:"50%",cy:"45%",innerRadius:45,outerRadius:80,paddingAngle:2,dataKey:"value",nameKey:"name",children:b.map((s,t)=>e.jsx(Z,{fill:y[t%y.length],stroke:"transparent"},`cell-${t}`))}),e.jsx(z,{content:e.jsx(K,{color:"var(--accent-red)"})})]})}):e.jsx("div",{className:"h-[250px] flex items-center justify-center",style:{color:"var(--text-secondary)"},children:"No hay gastos en este periodo"}),b.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-2",children:[b.slice(0,4).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:y[t%y.length]}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:s.name.length>10?s.name.substring(0,10)+"...":s.name})]},`legend-${t}`)),b.length>4&&e.jsxs("div",{className:"px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:["+",b.length-4," mas"]})]})]})]}),R.length>0&&e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Ingresos por Categoria"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(F,{width:"100%",height:200,children:e.jsxs(J,{children:[e.jsx(Q,{data:R,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,paddingAngle:2,dataKey:"value",nameKey:"name",children:R.map((s,t)=>e.jsx(Z,{fill:y[(t+3)%y.length],stroke:"transparent"},`cell-income-${t}`))}),e.jsx(z,{content:e.jsx(K,{color:"var(--accent-green)"})})]})})}),e.jsx("div",{className:"md:col-span-3 flex flex-col justify-center gap-2",children:R.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:y[(t+3)%y.length]}}),e.jsx("span",{className:"text-sm truncate",style:{color:"var(--text-primary)"},title:s.name,children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[s.percentage.toFixed(1),"%"]}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--accent-green)"},children:p(s.value,o)})]})]},`income-legend-${t}`))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx("div",{className:"w-6 h-6 rounded-lg flex items-center justify-center",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},children:e.jsx("svg",{className:"w-3 h-3",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),"Gastos",e.jsxs("span",{className:"text-sm font-normal",style:{color:"var(--text-secondary)"},children:["(",w.length,")"]})]})}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Filtrar por cuenta:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto",children:P.map(s=>{const t=i.includes(s.nombre);return e.jsx("button",{onClick:()=>j(i,N,s.nombre),className:"px-2 py-1 rounded-full text-xs font-medium transition-colors",style:{backgroundColor:t?"var(--accent-primary)":"var(--bg-tertiary)",color:t?"white":"var(--text-secondary)"},children:s.nombre.length>15?s.nombre.substring(0,15)+"...":s.nombre},s.nombre)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Filtrar por categoria:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto",children:(Y=D.gastos)==null?void 0:Y.map(s=>{const t=h.includes(s);return e.jsx("button",{onClick:()=>j(h,L,s),className:"px-2 py-1 rounded-full text-xs font-medium transition-colors",style:{backgroundColor:t?"var(--accent-red)":"var(--bg-tertiary)",color:t?"white":"var(--text-secondary)"},children:s.length>15?s.substring(0,15)+"...":s},s)})})]}),(i.length>0||h.length>0)&&e.jsx("button",{onClick:()=>{N([]),L([])},className:"text-xs font-medium",style:{color:"var(--accent-red)"},children:"Limpiar filtros"})]}),e.jsx("div",{className:"max-h-72 overflow-y-auto space-y-2 pr-1",children:w.length===0?e.jsx("p",{className:"text-center py-8 text-sm",style:{color:"var(--text-secondary)"},children:"Sin gastos en este periodo"}):w.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl transition-colors hover:bg-[var(--bg-tertiary)]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",style:{color:"var(--text-primary)"},children:s.categoria||"Sin categoria"}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:s.cuenta}),s.nota&&e.jsxs("p",{className:"text-xs truncate italic mt-0.5",style:{color:"var(--text-secondary)",opacity:.7},children:['"',s.nota,'"']})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"font-bold",style:{color:"var(--accent-red)"},children:["-",p(o==="ARS"?s.montoPesos||s.monto:s.montoDolares||0,o)]}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:_(s.fecha,"short")})]})]},s.rowIndex||t))}),w.length>0&&e.jsxs("div",{className:"mt-4 pt-4 flex items-center justify-between",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("span",{className:"font-medium",style:{color:"var(--text-secondary)"},children:"Total"}),e.jsx("span",{className:"text-xl font-bold",style:{color:"var(--accent-red)"},children:p(w.reduce((s,t)=>s+(o==="ARS"?t.montoPesos||t.monto||0:t.montoDolares||0),0),o)})]})]}),e.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"font-semibold flex items-center gap-2",style:{color:"var(--text-primary)"},children:[e.jsx("div",{className:"w-6 h-6 rounded-lg flex items-center justify-center",style:{backgroundColor:"rgba(34, 197, 94, 0.15)"},children:e.jsx("svg",{className:"w-3 h-3",style:{color:"var(--accent-green)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),"Ingresos",e.jsxs("span",{className:"text-sm font-normal",style:{color:"var(--text-secondary)"},children:["(",C.length,")"]})]})}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Filtrar por cuenta:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto",children:P.map(s=>{const t=i.includes(s.nombre);return e.jsx("button",{onClick:()=>j(i,N,s.nombre),className:"px-2 py-1 rounded-full text-xs font-medium transition-colors",style:{backgroundColor:t?"var(--accent-primary)":"var(--bg-tertiary)",color:t?"white":"var(--text-secondary)"},children:s.nombre.length>15?s.nombre.substring(0,15)+"...":s.nombre},s.nombre)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Filtrar por categoria:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto",children:(X=D.ingresos)==null?void 0:X.map(s=>{const t=u.includes(s);return e.jsx("button",{onClick:()=>j(u,M,s),className:"px-2 py-1 rounded-full text-xs font-medium transition-colors",style:{backgroundColor:t?"var(--accent-green)":"var(--bg-tertiary)",color:t?"white":"var(--text-secondary)"},children:s.length>15?s.substring(0,15)+"...":s},s)})})]}),(i.length>0||u.length>0)&&e.jsx("button",{onClick:()=>{N([]),M([])},className:"text-xs font-medium",style:{color:"var(--accent-green)"},children:"Limpiar filtros"})]}),e.jsx("div",{className:"max-h-72 overflow-y-auto space-y-2 pr-1",children:C.length===0?e.jsx("p",{className:"text-center py-8 text-sm",style:{color:"var(--text-secondary)"},children:"Sin ingresos en este periodo"}):C.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl transition-colors hover:bg-[var(--bg-tertiary)]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",style:{color:"var(--text-primary)"},children:s.categoria||"Sin categoria"}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:s.cuenta}),s.nota&&e.jsxs("p",{className:"text-xs truncate italic mt-0.5",style:{color:"var(--text-secondary)",opacity:.7},children:['"',s.nota,'"']})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"font-bold",style:{color:"var(--accent-green)"},children:["+",p(o==="ARS"?s.montoPesos||s.monto:s.montoDolares||0,o)]}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:_(s.fecha,"short")})]})]},s.rowIndex||t))}),C.length>0&&e.jsxs("div",{className:"mt-4 pt-4 flex items-center justify-between",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("span",{className:"font-medium",style:{color:"var(--text-secondary)"},children:"Total"}),e.jsx("span",{className:"text-xl font-bold",style:{color:"var(--accent-green)"},children:p(C.reduce((s,t)=>s+(o==="ARS"?t.montoPesos||t.monto||0:t.montoDolares||0),0),o)})]})]})]})]})}export{De as default};
