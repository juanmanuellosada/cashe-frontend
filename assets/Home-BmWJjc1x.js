import{r as i,j as e,f as R,u as ce,i as pe,a as he,b as F,e as ge,c as ke,d as K,g as ve,h as Ce,k as Se,l as De,m as Me,n as Ee,o as Ae,p as de,s as me,q as Le,t as fe,v as Re,w as Be,x as Ie,L as xe,E as Pe,y as ye,z as $e,A as Te,D as G,B as oe,C as Ve,F as Ue}from"./index-BMb4UKgp.js";import{D as je}from"./DateRangePicker-C9XXCEIw.js";import{A as We}from"./AccountModal-BuM4elMU.js";import{P as _e}from"./PullToRefresh-G2kwOm4_.js";import"./IconPicker-DcdoMY2D.js";const Oe={oficial:"Oficial",blue:"Blue",bolsa:"MEP",contadoconliqui:"CCL"};function He({accounts:h=[],dashboard:v,currency:m="ARS",onCurrencyChange:p,accountFilters:o=[],onAccountFiltersChange:f}){const[d,M]=i.useState(!1),s=i.useMemo(()=>{const r=h.filter(t=>!t.ocultaDelBalance),n=o.length>0?r.filter(t=>o.includes(t.nombre)):r,l=(v==null?void 0:v.tipoCambio)||1e3,D=n.filter(t=>t.moneda==="Peso").reduce((t,a)=>t+(a.balanceActual||0),0),P=n.filter(t=>t.moneda==="D√≥lar").reduce((t,a)=>t+(a.balanceActual||0),0),O=D+P*l,x=P+D/l;return{totalPesos:D,totalDolares:P,totalGeneralPesos:O,totalGeneralDolares:x,tipoCambio:l,filteredAccounts:n}},[h,o,v]),j=m==="ARS"?s.totalGeneralPesos:s.totalGeneralDolares,y=o.length>0?o.length:0,g=r=>{if(f)if(o.length===0)f([r]);else if(o.includes(r)){const n=o.filter(l=>l!==r);f(n)}else f([...o,r])},S=r=>o.length===0||o.includes(r),b=h.filter(r=>!r.ocultaDelBalance),A=()=>{if(!f)return;const r=b.map(l=>l.nombre),n=r.length>0&&r.every(l=>o.includes(l));f(n?[]:r)},I=()=>{f&&f([])};return e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg min-[400px]:rounded-xl overflow-hidden",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex flex-col min-[400px]:flex-row min-[400px]:items-center min-[400px]:justify-between gap-2 mb-2 sm:mb-3 min-w-0",children:[e.jsx("span",{className:"text-xs flex-shrink-0",style:{color:"var(--text-muted)"},children:"Saldo actual"}),e.jsxs("div",{className:"inline-flex p-0.5 rounded-lg self-start min-[400px]:self-auto flex-shrink-0",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>p==null?void 0:p("ARS"),className:"px-2 sm:px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors duration-150 flex items-center gap-1",style:{backgroundColor:m==="ARS"?"var(--bg-elevated)":"transparent",color:m==="ARS"?"var(--text-primary)":"var(--text-muted)"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),e.jsxs("button",{onClick:()=>p==null?void 0:p("USD"),className:"px-2 sm:px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors duration-150 flex items-center gap-1",style:{backgroundColor:m==="USD"?"var(--bg-elevated)":"transparent",color:m==="USD"?"var(--text-primary)":"var(--text-muted)"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]})]}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight mb-3 sm:mb-4 truncate",style:{color:"var(--text-primary)"},children:R(j,m)}),e.jsxs("div",{className:"grid grid-cols-1 min-[400px]:grid-cols-2 gap-2 sm:gap-3 mb-3",children:[e.jsxs("div",{className:"p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wide mb-1",style:{color:"var(--text-muted)"},children:"En pesos"}),e.jsx("p",{className:"text-sm sm:text-base font-medium truncate",style:{color:"var(--text-primary)"},children:R(s.totalPesos,"ARS")})]}),e.jsxs("div",{className:"p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wide mb-1",style:{color:"var(--text-muted)"},children:"En d√≥lares"}),e.jsx("p",{className:"text-sm sm:text-base font-medium truncate",style:{color:"var(--text-primary)"},children:R(s.totalDolares,"USD")})]})]}),s.tipoCambio&&e.jsxs("div",{className:"flex flex-col min-[400px]:flex-row min-[400px]:items-center min-[400px]:justify-between gap-1 min-[400px]:gap-2 py-2 min-w-0",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink min-w-0",children:[e.jsx("span",{className:"text-xs whitespace-nowrap",style:{color:"var(--text-muted)"},children:"Tipo de cambio"}),(v==null?void 0:v.tipoUsado)&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium flex-shrink-0",style:{backgroundColor:"var(--accent-primary-dim)",color:"var(--accent-primary)"},children:Oe[v.tipoUsado]||v.tipoUsado})]}),e.jsxs("span",{className:"text-sm min-[400px]:text-xs font-medium whitespace-nowrap flex-shrink-0",style:{color:"var(--text-secondary)"},children:[R(s.tipoCambio)," / USD"]})]}),e.jsxs("div",{className:"mt-3 pt-3",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsxs("button",{onClick:()=>M(!d),className:"w-full flex items-center justify-between gap-2 px-3 py-2.5 rounded-md min-[400px]:rounded-lg text-sm transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.99]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"font-medium",children:"Filtrar cuentas"}),y>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:y})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&e.jsxs("div",{className:"mt-2 p-3 rounded-md min-[400px]:rounded-lg space-y-2 animate-scale-in",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-secondary)"},children:"Cuentas incluidas"}),e.jsx("button",{onClick:A,className:"text-xs font-semibold transition-colors hover:opacity-80",style:{color:"var(--accent-primary)"},children:b.length>0&&b.every(r=>o.includes(r.nombre))?"Deseleccionar":"Seleccionar todos"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scrollbar",children:b.map(r=>{const n=S(r.nombre);return e.jsx("button",{onClick:()=>g(r.nombre),className:"px-3 py-2 rounded-md min-[400px]:rounded-lg text-xs font-semibold transition-all duration-200 active:scale-95",style:{backgroundColor:n?"var(--accent-primary)":"var(--bg-secondary)",color:n?"white":"var(--text-secondary)",boxShadow:n?"0 2px 8px var(--accent-primary-glow)":"none",opacity:o.length===0?.7:1},children:r.nombre},r.nombre)})}),y>0&&e.jsxs("button",{onClick:I,className:"text-xs font-semibold flex items-center gap-1 transition-all duration-200 hover:opacity-80 mt-2",style:{color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Mostrar todas"]})]})]})]})}function ze({accounts:h=[],dashboard:v,currency:m="ARS",dateRange:p,onDateRangeChange:o,accountFilters:f=[]}){const d=i.useMemo(()=>{const S=h.filter(r=>!r.ocultaDelBalance),b=f.length>0?S.filter(r=>f.includes(r.nombre)):S,A=b.reduce((r,n)=>r+(n.totalIngresos||0),0),I=b.reduce((r,n)=>r+(n.totalGastos||0),0);return{ingresos:A,gastos:I,flujoNeto:A-Math.abs(I)}},[h,f]),{ingresos:M,gastos:s,flujoNeto:j}=d,y=Math.abs(M)+Math.abs(s),g=y>0?Math.abs(M)/y*100:50;return e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg min-[400px]:rounded-xl overflow-hidden",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex flex-col min-[400px]:flex-row min-[400px]:items-center min-[400px]:justify-between gap-2 mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Flujo del per√≠odo"}),e.jsx("div",{className:"self-start min-[400px]:self-auto",children:e.jsx(je,{value:p,onChange:o,defaultPreset:"Este mes"})})]}),e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsxs("div",{className:"h-2 rounded-full overflow-hidden flex",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${g}%`,backgroundColor:"var(--accent-green)"}}),e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${100-g}%`,backgroundColor:"var(--accent-red)"}})]})}),e.jsxs("div",{className:"grid grid-cols-1 min-[400px]:grid-cols-2 gap-2 sm:gap-3 mb-3",children:[e.jsxs("div",{className:"p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg",style:{backgroundColor:"var(--accent-green-dim)"},children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wide mb-1",style:{color:"var(--text-muted)"},children:"Ingresos"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold truncate",style:{color:"var(--accent-green)"},children:["+",R(Math.abs(M),m)]})]}),e.jsxs("div",{className:"p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg",style:{backgroundColor:"var(--accent-red-dim)"},children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wide mb-1",style:{color:"var(--text-muted)"},children:"Gastos"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold truncate",style:{color:"var(--accent-red)"},children:["-",R(Math.abs(s),m)]})]})]}),e.jsxs("div",{className:"p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg",style:{backgroundColor:j>=0?"var(--accent-green-dim)":"var(--accent-red-dim)",border:`1px solid ${j>=0?"var(--accent-green)":"var(--accent-red)"}20`},children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium mb-1",style:{color:"var(--text-secondary)"},children:"Flujo neto"}),e.jsxs("p",{className:"text-base sm:text-lg font-bold truncate",style:{color:j>=0?"var(--accent-green)":"var(--accent-red)"},children:[j>=0?"+":"",R(j,m)]})]}),f.length>0&&e.jsxs("p",{className:"text-[10px] mt-2 text-center",style:{color:"var(--text-muted)"},children:["Mostrando flujo de ",f.length," cuenta",f.length!==1?"s":""," seleccionada",f.length!==1?"s":""]})]})}function Ge({accounts:h,loading:v,onAccountClick:m}){const[p,o]=i.useState(!0),f=ce(),d=(h||[]).filter(s=>!s.ocultaDelBalance);if(v)return e.jsx("div",{className:"card-glass overflow-hidden",children:e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsx("div",{className:"h-4 w-24 skeleton-shimmer rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsx("div",{className:"h-4 w-16 skeleton-shimmer rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"}})]})});if(!d||d.length===0)return null;const M=s=>{m&&m(s)};return e.jsxs("div",{className:"card-glass overflow-hidden transition-all duration-300 rounded-lg min-[400px]:rounded-xl",children:[e.jsxs("button",{onClick:()=>o(!p),className:"w-full px-3 py-3 sm:p-4 flex flex-col min-[400px]:flex-row min-[400px]:items-center min-[400px]:justify-between gap-2 text-left transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.99]",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 rounded-lg sm:rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--accent-primary-dim)"},children:e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm sm:text-[15px]",style:{color:"var(--text-primary)"},children:"Cuentas"}),e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:d.length})]})]}),e.jsxs("div",{className:"flex items-center gap-2 self-end min-[400px]:self-auto",children:[e.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:p?"Ocultar":"Ver todas"}),e.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center transition-colors",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${p?"rotate-180":""}`,style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),p&&e.jsxs("div",{className:"animate-scale-in",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("div",{className:"hidden lg:grid lg:grid-cols-2 xl:grid-cols-3 gap-px",style:{backgroundColor:"var(--border-subtle)"},children:d.map((s,j)=>{const y=s.moneda==="Peso",g=s.esTarjetaCredito,S=g?"#a855f7":y?"#75AADB":"#3CB371",b=!!s.icon,A=b&&pe(s.icon);return e.jsxs("button",{onClick:()=>M(s),className:"p-4 flex items-center gap-3 text-left transition-all duration-200 hover:bg-[var(--bg-tertiary)] group",style:{backgroundColor:"var(--bg-secondary)",animationDelay:`${j*50}ms`},children:[e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center flex-shrink-0 transition-transform duration-200 group-hover:scale-110 overflow-hidden",style:{backgroundColor:b&&!A?"transparent":`${S}15`,boxShadow:`0 0 20px ${S}10`},children:b?A?e.jsx("span",{className:"text-xl",children:s.icon}):e.jsx("img",{src:he(s.icon),alt:s.nombre,className:"w-full h-full object-cover rounded-xl"}):e.jsx("span",{className:"text-sm font-bold",style:{color:S},children:g?"üí≥":y?"$":"US$"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold truncate text-[15px]",style:{color:"var(--text-primary)"},children:s.nombre}),e.jsx("p",{className:"text-[11px] mt-0.5",style:{color:"var(--text-secondary)"},children:g?"Pr√≥ximo resumen":e.jsxs(e.Fragment,{children:[y?"Pesos":"D√≥lares",s.tipo&&` ¬∑ ${s.tipo}`]})})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:g?e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[s.proximoResumenPesos>0&&e.jsxs("p",{className:"font-bold text-[14px]",style:{color:"var(--accent-red)"},children:["-",R(s.proximoResumenPesos,"ARS")]}),s.proximoResumenDolares>0&&e.jsxs("p",{className:"font-bold text-[14px]",style:{color:"#3CB371"},children:["-",R(s.proximoResumenDolares,"USD")]}),s.proximoResumenPesos===0&&s.proximoResumenDolares===0&&e.jsx("p",{className:"font-bold text-[14px]",style:{color:"var(--text-muted)"},children:"$0"})]}):e.jsx("p",{className:"font-bold text-[15px]",style:{color:S},children:R(s.balanceActual,y?"ARS":"USD")})})]},s.nombre)})}),e.jsx("div",{className:"lg:hidden overflow-hidden",children:d.map((s,j)=>{const y=s.moneda==="Peso",g=s.esTarjetaCredito,S=g?"#a855f7":y?"#75AADB":"#3CB371",b=!!s.icon,A=b&&pe(s.icon);return e.jsx("button",{onClick:()=>M(s),className:"w-full px-3 py-2.5 text-left transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.99] group",style:{borderBottom:j<d.length-1?"1px solid var(--border-subtle)":"none"},children:e.jsxs("div",{className:"flex items-center gap-2.5 w-full min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-md min-[400px]:rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden",style:{backgroundColor:b&&!A?"transparent":`${S}15`},children:b?A?e.jsx("span",{className:"text-lg",children:s.icon}):e.jsx("img",{src:he(s.icon),alt:s.nombre,className:"w-full h-full object-cover rounded-md min-[400px]:rounded-lg"}):e.jsx("span",{className:"text-[11px] font-bold",style:{color:S},children:g?"üí≥":y?"$":"US$"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm leading-tight truncate",style:{color:"var(--text-primary)"},children:s.nombre}),e.jsx("p",{className:"text-[11px] mt-0.5",style:{color:"var(--text-secondary)"},children:g?"Pr√≥ximo resumen":y?"Pesos":"D√≥lares"})]}),e.jsx("div",{className:"text-right flex-shrink-0 ml-auto",children:g?e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[s.proximoResumenPesos>0&&e.jsxs("p",{className:"font-bold text-[13px]",style:{color:"var(--accent-red)"},children:["-",R(s.proximoResumenPesos,"ARS")]}),s.proximoResumenDolares>0&&e.jsxs("p",{className:"font-bold text-[13px]",style:{color:"#3CB371"},children:["-",R(s.proximoResumenDolares,"USD")]}),s.proximoResumenPesos===0&&s.proximoResumenDolares===0&&e.jsx("p",{className:"font-bold text-[13px]",style:{color:"var(--text-muted)"},children:"$0"})]}):e.jsx("p",{className:"font-bold text-[13px]",style:{color:S},children:R(s.balanceActual,y?"ARS":"USD")})})]})},s.nombre)})}),e.jsx("button",{onClick:()=>f("/cuentas"),className:"w-full py-3 sm:p-3.5 text-center text-sm font-semibold transition-all duration-200 hover:bg-[var(--accent-primary-dim)] active:scale-[0.99]",style:{color:"var(--accent-primary)",borderTop:"1px solid var(--border-subtle)"},children:"Ver detalles de cuentas ‚Üí"})]})]})}function Je({movements:h,accounts:v=[],categories:m={ingresos:[],gastos:[]},loading:p}){var n,l,D,P,O;const[o,f]=i.useState("ARS"),[d,M]=i.useState(!1),[s,j]=i.useState(()=>{try{const x=localStorage.getItem("cashe_weekly_filters");if(x)return JSON.parse(x)}catch(x){console.warn("Error loading weekly filters:",x)}return{cuentas:[],categorias:[]}});i.useEffect(()=>{try{localStorage.setItem("cashe_weekly_filters",JSON.stringify(s))}catch(x){console.warn("Error saving weekly filters:",x)}},[s]);const y=m.gastos||[],g=(v||[]).filter(x=>!x.ocultaDelBalance),S=[((n=s.cuentas)==null?void 0:n.length)>0,((l=s.categorias)==null?void 0:l.length)>0].filter(Boolean).length,b=i.useMemo(()=>{var B,_;if(!h||h.length===0)return null;const x=g.map(u=>u.nombre),t=h.filter(u=>x.includes(u.cuenta));let a=t.filter(u=>u.tipo==="gasto"),C=t.filter(u=>u.tipo==="ingreso");((B=s.cuentas)==null?void 0:B.length)>0&&(a=a.filter(u=>s.cuentas.includes(u.cuenta)),C=C.filter(u=>s.cuentas.includes(u.cuenta))),((_=s.categorias)==null?void 0:_.length)>0&&(a=a.filter(u=>s.categorias.includes(u.categoria)));const T=a.reduce((u,k)=>u+(k.montoPesos||k.monto||0),0),W=a.reduce((u,k)=>u+(k.montoDolares||0),0),H=C.reduce((u,k)=>u+(k.montoPesos||k.monto||0),0),X=C.reduce((u,k)=>u+(k.montoDolares||0),0),Q=T/7,Z=W/7,ee=H/7,z=X/7,N=new Set(a.map(u=>u.fecha)).size,E=u=>{if(/^\d{4}-\d{2}-\d{2}$/.test(u)){const[k,q,re]=u.split("-").map(Number),ne=new Date(k,q-1,re);return F(ne,"EEEE",{locale:ge})}return F(new Date(u),"EEEE",{locale:ge})},L={};a.forEach(u=>{const k=u.fecha,q=E(u.fecha);L[k]||(L[k]={name:q,amount:0,amountDolares:0,date:k}),L[k].amount+=u.montoPesos||u.monto||0,L[k].amountDolares+=u.montoDolares||0});const J=Object.values(L).sort((u,k)=>k.amount-u.amount)[0]||null,U={};a.forEach(u=>{const k=u.categoria||"Sin categor√≠a";U[k]||(U[k]={name:k,amount:0,amountDolares:0}),U[k].amount+=u.montoPesos||u.monto||0,U[k].amountDolares+=u.montoDolares||0});const Y=Object.values(U).sort((u,k)=>k.amount-u.amount)[0]||null;return{avgDailyExpense:Q,avgDailyExpenseDolares:Z,avgDailyIncome:ee,avgDailyIncomeDolares:z,maxDay:J,topCategory:Y,totalExpenses:T,totalExpensesDolares:W,totalIncome:H,totalIncomeDolares:X,daysWithExpenses:N}},[h,s,g]),A=(x,t)=>{const a=s[x]||[];let C;a.includes(t)?C=a.filter(T=>T!==t):C=[...a,t],j(T=>({...T,[x]:C}))},I=(x,t)=>(s[x]||[]).includes(t),r=()=>{j({cuentas:[],categorias:[]})};return p?e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-md min-[400px]:rounded-lg skeleton-shimmer",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsx("div",{className:"h-4 w-28 skeleton-shimmer rounded-md min-[400px]:rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"}})]}),e.jsx("div",{className:"card-glass p-3 sm:p-4 rounded-lg min-[400px]:rounded-xl",children:e.jsx("div",{className:"grid grid-cols-1 min-[400px]:grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:[1,2,3].map(x=>e.jsxs("div",{className:"space-y-2 p-2.5",children:[e.jsx("div",{className:"h-3 w-20 skeleton-shimmer rounded-md",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsx("div",{className:"h-5 w-24 skeleton-shimmer rounded-md",style:{backgroundColor:"var(--bg-tertiary)"}})]},x))})})]}):e.jsxs("div",{className:"space-y-2 sm:space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col min-[400px]:flex-row min-[400px]:items-center min-[400px]:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--accent-primary-dim)"},children:e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-sm sm:text-[15px] font-semibold",style:{color:"var(--text-primary)"},children:"Resumen semanal"})]}),e.jsxs("div",{className:"inline-flex rounded-lg p-0.5 self-start min-[400px]:self-auto",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>f("ARS"),className:"px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors duration-150 flex items-center gap-1.5",style:{backgroundColor:o==="ARS"?"var(--bg-elevated)":"transparent",color:o==="ARS"?"var(--text-primary)":"var(--text-muted)"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),e.jsxs("button",{onClick:()=>f("USD"),className:"px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors duration-150 flex items-center gap-1.5",style:{backgroundColor:o==="USD"?"var(--bg-elevated)":"transparent",color:o==="USD"?"var(--text-primary)":"var(--text-muted)"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]})]}),e.jsxs("button",{onClick:()=>M(!d),className:"flex items-center gap-2 px-3.5 py-2.5 rounded-lg min-[400px]:rounded-xl text-sm transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.98]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"font-medium",children:"Filtros"}),S>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold",style:{backgroundColor:"var(--accent-primary)",color:"white",boxShadow:"0 2px 8px var(--accent-primary-glow)"},children:S}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&e.jsxs("div",{className:"p-4 rounded-lg min-[400px]:rounded-xl space-y-4 animate-scale-in card-glass",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wider",style:{color:"var(--text-secondary)"},children:"Cuentas"}),e.jsx("button",{onClick:()=>{const x=v.map(a=>a.nombre),t=x.length>0&&x.every(a=>{var C;return(C=s.cuentas)==null?void 0:C.includes(a)});j(a=>({...a,cuentas:t?[]:x}))},className:"text-[10px] font-semibold transition-colors hover:opacity-80",style:{color:"var(--accent-primary)"},children:v.length>0&&v.every(x=>{var t;return(t=s.cuentas)==null?void 0:t.includes(x.nombre)})?"Deseleccionar todos":"Seleccionar todos"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scrollbar",children:v.map(x=>{const t=I("cuentas",x.nombre),a=x.ocultaDelBalance;return e.jsxs("button",{onClick:()=>A("cuentas",x.nombre),className:"px-3 py-2 min-h-[44px] rounded-md min-[400px]:rounded-lg text-xs font-semibold transition-all duration-200 active:scale-95 flex items-center gap-1",style:{backgroundColor:t?"var(--accent-primary)":"var(--bg-secondary)",color:t?"white":"var(--text-secondary)",boxShadow:t?"0 4px 16px var(--accent-primary-glow)":"none",opacity:a&&!t?.6:1},title:a?"Cuenta oculta del balance":"",children:[x.nombre,a&&e.jsx("svg",{className:"w-3 h-3",style:{color:t?"white":"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.542 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})]},x.nombre)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wider",style:{color:"var(--text-secondary)"},children:"Categor√≠as"}),(()=>{const x=y.map(a=>typeof a=="string"?a:a.value),t=x.length>0&&x.every(a=>{var C;return(C=s.categorias)==null?void 0:C.includes(a)});return e.jsx("button",{onClick:()=>{j(a=>({...a,categorias:t?[]:x}))},className:"text-[10px] font-semibold transition-colors hover:opacity-80",style:{color:"var(--accent-primary)"},children:t?"Deseleccionar todos":"Seleccionar todos"})})()]}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scrollbar",children:y.map(x=>{const t=typeof x=="string"?x:x.value,a=typeof x=="string"?x:x.label,C=I("categorias",t);return e.jsx("button",{onClick:()=>A("categorias",t),className:"px-3 py-2 min-h-[44px] rounded-md min-[400px]:rounded-lg text-xs font-semibold transition-all duration-200 active:scale-95",style:{backgroundColor:C?"var(--accent-red)":"var(--bg-secondary)",color:C?"white":"var(--text-secondary)",boxShadow:C?"0 4px 16px rgba(255, 92, 114, 0.3)":"none"},children:a},t)})})]}),S>0&&e.jsx("div",{className:"pt-3",style:{borderTop:"1px solid var(--border-subtle)"},children:e.jsxs("button",{onClick:r,className:"text-xs font-semibold flex items-center gap-1.5 transition-all duration-200 hover:opacity-80 active:scale-95",style:{color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Limpiar filtros"]})})]}),!b||b.totalExpenses===0&&b.totalIncome===0?e.jsxs("div",{className:"card-glass p-4 sm:p-6 text-center rounded-lg min-[400px]:rounded-xl",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 sm:mb-3 rounded-md min-[400px]:rounded-lg sm:rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-xs sm:text-sm font-medium",style:{color:"var(--text-secondary)"},children:S>0?"Sin movimientos con filtros":"Sin movimientos esta semana"})]}):e.jsx("div",{className:"card-glass p-3 sm:p-4 rounded-lg min-[400px]:rounded-xl",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:[e.jsxs("div",{className:"group p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg transition-all duration-200 hover:bg-[var(--bg-tertiary)]",children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wider font-medium mb-1",style:{color:"var(--text-secondary)"},children:"Prom. Ing."}),e.jsxs("p",{className:"text-sm sm:text-base font-bold truncate",style:{color:"var(--accent-green)"},children:["+",R(o==="ARS"?b.avgDailyIncome:b.avgDailyIncomeDolares,o)]})]}),e.jsxs("div",{className:"group p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg transition-all duration-200 hover:bg-[var(--bg-tertiary)]",children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wider font-medium mb-1",style:{color:"var(--text-secondary)"},children:"Prom. Gasto"}),e.jsxs("p",{className:"text-sm sm:text-base font-bold truncate",style:{color:"var(--accent-red)"},children:["-",R(o==="ARS"?b.avgDailyExpense:b.avgDailyExpenseDolares,o)]})]}),e.jsxs("div",{className:"group p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg transition-all duration-200 hover:bg-[var(--bg-tertiary)]",children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wider font-medium mb-1",style:{color:"var(--text-secondary)"},children:"D√≠a pico"}),e.jsx("p",{className:"text-sm sm:text-base font-bold capitalize truncate",style:{color:"var(--accent-red)"},children:((D=b.maxDay)==null?void 0:D.name)||"-"}),e.jsx("p",{className:"text-[11px] sm:text-xs truncate",style:{color:"var(--text-secondary)"},children:b.maxDay?R(o==="ARS"?b.maxDay.amount:b.maxDay.amountDolares,o):"-"})]}),e.jsxs("div",{className:"group p-2.5 sm:p-3 rounded-md min-[400px]:rounded-lg transition-all duration-200 hover:bg-[var(--bg-tertiary)]",children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wider font-medium mb-1",style:{color:"var(--text-secondary)"},children:"Top categor√≠a"}),e.jsx("p",{className:"text-sm sm:text-base font-bold truncate",style:{color:"var(--accent-primary)"},children:((O=(P=b.topCategory)==null?void 0:P.name)==null?void 0:O.replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim())||"-"}),e.jsx("p",{className:"text-[11px] sm:text-xs truncate",style:{color:"var(--text-secondary)"},children:b.topCategory?R(o==="ARS"?b.topCategory.amount:b.topCategory.amountDolares,o):"-"})]})]})})]})}function Ye({accounts:h=[],categories:v={ingresos:[],gastos:[]},filters:m,onFilterChange:p}){var y,g,S,b,A,I;const[o,f]=i.useState(!1);[...v.ingresos||[],...v.gastos||[]];const d=(r,n)=>{const l=m[r]||[];let D;l.includes(n)?D=l.filter(P=>P!==n):D=[...l,n],p==null||p({...m,[r]:D})},M=(r,n)=>(m[r]||[]).includes(n),s=[((y=m.tipos)==null?void 0:y.length)>0&&((g=m.tipos)==null?void 0:g.length)<3,((S=m.cuentas)==null?void 0:S.length)>0,((b=m.categorias)==null?void 0:b.length)>0].filter(Boolean).length,j=()=>{p==null||p({tipos:[],cuentas:[],categorias:[]})};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>f(!o),className:"flex items-center gap-2 px-3.5 py-2.5 min-h-[44px] rounded-lg min-[400px]:rounded-xl text-sm transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.98]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"font-medium",children:"Filtros"}),s>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold",style:{backgroundColor:"var(--accent-primary)",color:"white",boxShadow:"0 2px 8px var(--accent-primary-glow)"},children:s}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&e.jsxs("div",{className:"p-4 rounded-lg min-[400px]:rounded-xl space-y-4 animate-scale-in card-glass",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-semibold uppercase tracking-wider mb-2.5",style:{color:"var(--text-secondary)"},children:"Tipo de movimiento"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"ingreso",label:"Ingresos",color:"var(--accent-green)",glow:"rgba(0, 217, 154, 0.3)"},{value:"gasto",label:"Gastos",color:"var(--accent-red)",glow:"rgba(255, 92, 114, 0.3)"},{value:"transferencia",label:"Transferencias",color:"var(--accent-blue)",glow:"rgba(59, 130, 246, 0.3)"}].map(r=>{const n=M("tipos",r.value);return e.jsx("button",{onClick:()=>d("tipos",r.value),className:"px-3.5 py-2.5 min-h-[44px] rounded-lg min-[400px]:rounded-xl text-xs font-semibold transition-all duration-200 active:scale-95",style:{backgroundColor:n?r.color:"var(--bg-secondary)",color:n?"white":"var(--text-secondary)",boxShadow:n?`0 4px 16px ${r.glow}`:"none"},children:r.label},r.value)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wider",style:{color:"var(--text-secondary)"},children:"Cuentas"}),e.jsx("button",{onClick:()=>{const r=h.map(l=>l.nombre),n=r.every(l=>{var D;return(D=m.cuentas)==null?void 0:D.includes(l)});p==null||p({...m,cuentas:n?[]:r})},className:"text-[10px] font-semibold transition-colors hover:opacity-80",style:{color:"var(--accent-primary)"},children:h.length>0&&h.every(r=>{var n;return(n=m.cuentas)==null?void 0:n.includes(r.nombre)})?"Deseleccionar todos":"Seleccionar todos"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scrollbar",children:h.map(r=>{const n=M("cuentas",r.nombre),l=r.ocultaDelBalance;return e.jsxs("button",{onClick:()=>d("cuentas",r.nombre),className:"px-3.5 py-2.5 min-h-[44px] rounded-lg min-[400px]:rounded-xl text-xs font-semibold transition-all duration-200 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:n?"var(--accent-primary)":"var(--bg-secondary)",color:n?"white":"var(--text-secondary)",boxShadow:n?"0 4px 16px var(--accent-primary-glow)":"none",opacity:l&&!n?.6:1},title:l?"Cuenta oculta del balance":"",children:[r.nombre,l&&e.jsx("svg",{className:"w-3 h-3",style:{color:n?"white":"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.542 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})]},r.nombre)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wider",style:{color:"var(--text-secondary)"},children:"Categor√≠as"}),(()=>{const r=[...(v.ingresos||[]).map(l=>typeof l=="string"?l:l.value),...(v.gastos||[]).map(l=>typeof l=="string"?l:l.value)],n=r.length>0&&r.every(l=>{var D;return(D=m.categorias)==null?void 0:D.includes(l)});return e.jsx("button",{onClick:()=>{p==null||p({...m,categorias:n?[]:r})},className:"text-[10px] font-semibold transition-colors hover:opacity-80",style:{color:"var(--accent-primary)"},children:n?"Deseleccionar todos":"Seleccionar todos"})})()]}),e.jsxs("div",{className:"flex flex-wrap gap-2 max-h-36 overflow-y-auto custom-scrollbar",children:[((A=v.ingresos)==null?void 0:A.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full text-[10px] font-semibold uppercase tracking-wider",style:{color:"var(--accent-green)"},children:"Ingresos:"}),v.ingresos.map(r=>{const n=typeof r=="string"?r:r.value,l=typeof r=="string"?r:r.label,D=M("categorias",n);return e.jsx("button",{onClick:()=>d("categorias",n),className:"px-3.5 py-2.5 min-h-[44px] rounded-lg min-[400px]:rounded-xl text-xs font-semibold transition-all duration-200 active:scale-95",style:{backgroundColor:D?"var(--accent-green)":"var(--bg-secondary)",color:D?"white":"var(--text-secondary)",boxShadow:D?"0 4px 16px rgba(0, 217, 154, 0.3)":"none"},children:l},n)})]}),((I=v.gastos)==null?void 0:I.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full text-[10px] font-semibold uppercase tracking-wider mt-2",style:{color:"var(--accent-red)"},children:"Gastos:"}),v.gastos.map(r=>{const n=typeof r=="string"?r:r.value,l=typeof r=="string"?r:r.label,D=M("categorias",n);return e.jsx("button",{onClick:()=>d("categorias",n),className:"px-3.5 py-2.5 min-h-[44px] rounded-lg min-[400px]:rounded-xl text-xs font-semibold transition-all duration-200 active:scale-95",style:{backgroundColor:D?"var(--accent-red)":"var(--bg-secondary)",color:D?"white":"var(--text-secondary)",boxShadow:D?"0 4px 16px rgba(255, 92, 114, 0.3)":"none"},children:l},n)})]})]})]}),s>0&&e.jsx("div",{className:"pt-3",style:{borderTop:"1px solid var(--border-subtle)"},children:e.jsxs("button",{onClick:j,className:"text-xs font-semibold flex items-center gap-1.5 transition-all duration-200 hover:opacity-80 active:scale-95",style:{color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Limpiar filtros"]})})]})]})}function qe({movements:h,dateRange:v,onDateRangeChange:m,filters:p,onFilterChange:o,accounts:f,categories:d,onMovementClick:M,onMovementDelete:s,loading:j=!1,currency:y="ARS"}){const[g,S]=i.useState(null),b=t=>f==null?void 0:f.find(a=>a.nombre===t),A=t=>{const a=b(t);return(a==null?void 0:a.moneda)==="D√≥lar"},I=t=>{const a=b(t);return a!=null&&a.icon?a.icon:null},r=t=>{const a=I(t);return a?pe(a)?e.jsx("span",{className:"text-[10px] sm:text-xs",children:a}):e.jsx("img",{src:he(a),alt:"",className:"w-3.5 h-3.5 sm:w-4 sm:h-4 rounded object-cover"}):null},n=t=>{const a=t.tipo==="transferencia"?t.cuentaSaliente:t.cuenta;return A(a)},l=t=>{switch(t){case"ingreso":return{color:"var(--accent-green)",bgColor:"rgba(0, 217, 154, 0.12)",glowColor:"rgba(0, 217, 154, 0.3)",prefix:"+",icon:"up"};case"gasto":return{color:"var(--accent-red)",bgColor:"rgba(255, 92, 114, 0.12)",glowColor:"rgba(255, 92, 114, 0.3)",prefix:"-",icon:"down"};case"transferencia":return{color:"var(--accent-blue)",bgColor:"rgba(59, 130, 246, 0.12)",glowColor:"rgba(59, 130, 246, 0.3)",prefix:"",icon:"transfer"};default:return{color:"var(--accent-blue)",bgColor:"rgba(59, 130, 246, 0.12)",glowColor:"rgba(59, 130, 246, 0.3)",prefix:"",icon:"down"}}},D=(t,a)=>{t.stopPropagation(),S(a)},P=()=>{g&&(s==null||s(g),S(null))},O=(t,a)=>{const C="w-4 h-4 sm:w-5 sm:h-5";return t==="transferencia"?e.jsx("svg",{className:C,style:{color:a},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}):t==="ingreso"?e.jsx("svg",{className:C,style:{color:a},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):e.jsx("svg",{className:C,style:{color:a},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})},x=()=>e.jsx("div",{className:"card-glass overflow-hidden rounded-lg min-[400px]:rounded-xl",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-3 px-3 py-2.5 sm:p-4",style:{borderBottom:t<3?"1px solid var(--border-subtle)":"none"},children:[e.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-md min-[400px]:rounded-lg sm:rounded-xl skeleton-shimmer",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-24 sm:w-28 skeleton-shimmer rounded-md min-[400px]:rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsx("div",{className:"h-3 w-32 sm:w-36 skeleton-shimmer rounded-md min-[400px]:rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"}})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"h-4 sm:h-5 w-20 sm:w-24 skeleton-shimmer rounded-md min-[400px]:rounded-lg ml-auto",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsx("div",{className:"h-3 w-14 sm:w-16 skeleton-shimmer rounded-md min-[400px]:rounded-lg ml-auto",style:{backgroundColor:"var(--bg-tertiary)"}})]})]},t))});return e.jsxs("div",{className:"space-y-2 sm:space-y-4 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col min-[400px]:flex-row min-[400px]:items-center min-[400px]:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--accent-primary-dim)"},children:e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("h3",{className:"text-sm sm:text-[15px] font-semibold",style:{color:"var(--text-primary)"},children:"Movimientos"})]}),e.jsx("div",{className:"self-start min-[400px]:self-auto",children:e.jsx(je,{value:v,onChange:m,defaultPreset:"Este mes"})})]}),e.jsx(Ye,{accounts:f,categories:d,filters:p,onFilterChange:o}),j?x():!h||h.length===0?e.jsxs("div",{className:"card-glass p-6 sm:p-8 text-center rounded-lg min-[400px]:rounded-xl",children:[e.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-lg min-[400px]:rounded-xl sm:rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-7 h-7 sm:w-8 sm:h-8",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("p",{className:"font-semibold text-base mb-1",style:{color:"var(--text-primary)"},children:"Sin movimientos"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"No hay movimientos en este periodo"})]}):e.jsx("div",{className:"card-glass overflow-hidden rounded-lg min-[400px]:rounded-xl",children:h.map((t,a)=>{const C=l(t.tipo);return e.jsxs("div",{className:`group flex items-start min-[400px]:items-center gap-2 px-3 py-2.5 sm:p-4 transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.995] ${a!==h.length-1?"border-b":""}`,style:{borderColor:"var(--border-subtle)"},children:[e.jsxs("button",{onClick:()=>M==null?void 0:M(t),className:"flex flex-col min-[400px]:flex-row min-[400px]:items-center gap-2 sm:gap-3 flex-1 min-w-0 min-h-[48px] text-left transition-transform duration-200",style:{backgroundColor:"transparent"},children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-md min-[400px]:rounded-lg sm:rounded-xl flex items-center justify-center flex-shrink-0 transition-all duration-200 group-hover:scale-110",style:{backgroundColor:C.bgColor},children:O(t.tipo,C.color)}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("p",{className:"font-semibold text-sm sm:text-[15px]",style:{color:"var(--text-primary)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.tipo==="transferencia"?"Transfer":t.categoria||""}),e.jsx("p",{className:"text-[11px] sm:text-xs truncate flex items-center gap-1",style:{color:"var(--text-secondary)"},children:t.tipo==="transferencia"?e.jsxs(e.Fragment,{children:[r(t.cuentaSaliente),e.jsx("span",{children:t.cuentaSaliente}),e.jsx("span",{children:"‚Üí"}),r(t.cuentaEntrante),e.jsx("span",{children:t.cuentaEntrante})]}):e.jsxs(e.Fragment,{children:[r(t.cuenta),e.jsx("span",{children:t.cuenta})]})})]})]}),e.jsxs("div",{className:"text-left min-[400px]:text-right flex-shrink-0 pl-11 min-[400px]:pl-0 max-w-[45%] sm:max-w-none",children:[(()=>{const W=n(t)?"USD":"ARS",H=t.monto||t.montoSaliente;return e.jsxs("div",{className:"flex items-center gap-1 min-[400px]:justify-end",children:[e.jsx("img",{src:`/icons/catalog/${W}.svg`,alt:W,className:"w-3.5 h-3.5 sm:w-4 sm:h-4 rounded-sm flex-shrink-0"}),e.jsxs("p",{className:"font-bold text-[13px] xs:text-sm sm:text-lg truncate",style:{color:C.color},children:[C.prefix,R(H,W)]})]})})(),e.jsx("p",{className:"text-[11px] sm:text-xs",style:{color:"var(--text-secondary)"},children:ke(t.fecha,"short")})]})]}),e.jsx("button",{onClick:T=>D(T,t),className:"p-2 sm:p-2.5 rounded-md min-[400px]:rounded-lg sm:rounded-xl flex-shrink-0 transition-all duration-200 hover:bg-red-500/15 active:scale-95 self-start min-[400px]:self-center",style:{color:"var(--text-muted)"},title:"Eliminar",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-colors hover:text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t.rowIndex||a)})}),h&&h.length>0&&e.jsxs("p",{className:"text-xs text-center font-medium",style:{color:"var(--text-secondary)"},children:["Mostrando ",h.length," movimiento",h.length!==1?"s":""]}),g&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md animate-fade-in",onClick:()=>S(null)}),e.jsx("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in card-elevated",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"rgba(255, 92, 114, 0.12)",boxShadow:"0 0 30px rgba(255, 92, 114, 0.2)"},children:e.jsx("svg",{className:"w-8 h-8",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("h3",{className:"text-lg font-bold font-display mb-2",style:{color:"var(--text-primary)"},children:"Eliminar movimiento"}),e.jsxs("p",{className:"text-sm mb-5",style:{color:"var(--text-secondary)"},children:["¬øEst√°s seguro de que quieres eliminar ",g.tipo==="transferencia"?"esta":"este"," ",g.tipo,"?",e.jsx("br",{}),e.jsx("span",{className:"font-bold text-base mt-1 inline-block",style:{color:l(g.tipo).color},children:g.tipo==="transferencia"?R(g.montoSaliente):R(g.montoPesos||g.monto)})," - ",g.tipo==="transferencia"?`${g.cuentaSaliente} ‚Üí ${g.cuentaEntrante}`:g.categoria]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>S(null),className:"flex-1 py-3.5 rounded-xl font-semibold transition-all duration-200 hover:bg-[var(--bg-tertiary)] active:scale-[0.98]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:P,className:"flex-1 py-3.5 rounded-xl font-semibold text-white transition-all duration-200 hover:opacity-90 active:scale-[0.98]",style:{backgroundColor:"var(--accent-red)",boxShadow:"0 4px 20px rgba(255, 92, 114, 0.3)"},children:"Eliminar"})]})]})})]})]})}function Fe({accounts:h}){const v=ce(),m=i.useMemo(()=>{if(!h||h.length===0)return[];const p=new Date,o=p.getDate(),f=p.getMonth(),d=p.getFullYear(),M=new Date(d,f+1,0).getDate(),s=o+1>M?1:o+1;return h.filter(j=>{if(!j.esTarjetaCredito||!j.diaVencimiento)return!1;const y=Math.min(j.diaVencimiento,M);return y===o||y===s}).map(j=>{const g=Math.min(j.diaVencimiento,M)===o;return{...j,isDueToday:g,isDueTomorrow:!g}}).sort((j,y)=>j.isDueToday&&!y.isDueToday?-1:!j.isDueToday&&y.isDueToday?1:0)},[h]);return m.length===0?null:e.jsx("div",{className:"space-y-2",children:m.map(p=>{const o=p.resumenVencePesos||0,f=p.resumenVenceDolares||0,d=p.resumenVencePagado,M=o>0||f>0,j=d?{bg:"var(--accent-green-dim)",border:"var(--accent-green)",iconBg:"rgba(34, 197, 94, 0.2)",textColor:"var(--accent-green)",icon:"‚úÖ"}:p.isDueToday?{bg:"var(--accent-red-dim)",border:"var(--accent-red)",iconBg:"rgba(239, 68, 68, 0.2)",textColor:"var(--accent-red)",icon:"‚ö†Ô∏è"}:{bg:"var(--accent-yellow-dim)",border:"var(--accent-yellow)",iconBg:"rgba(234, 179, 8, 0.2)",textColor:"var(--accent-yellow)",icon:"üí≥"};return e.jsx("button",{onClick:()=>v("/tarjetas"),className:"w-full rounded-lg min-[400px]:rounded-xl p-2.5 min-[400px]:p-3 sm:p-4 transition-all hover:opacity-90 overflow-hidden",style:{backgroundColor:j.bg,border:`1px solid ${j.border}`},children:e.jsxs("div",{className:"flex items-start min-[400px]:items-center gap-2 min-[400px]:gap-3 min-w-0",children:[e.jsx("div",{className:"w-7 h-7 min-[400px]:w-8 min-[400px]:h-8 sm:w-10 sm:h-10 rounded-md min-[400px]:rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:j.iconBg},children:e.jsx("span",{className:"text-sm min-[400px]:text-base sm:text-xl",children:j.icon})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsxs("div",{className:"flex flex-col min-[400px]:flex-row min-[400px]:items-center gap-0 min-[400px]:gap-1 sm:gap-2",children:[e.jsx("p",{className:"text-[11px] min-[400px]:text-xs sm:text-sm font-semibold",style:{color:j.textColor},children:d?p.isDueToday?"Vence HOY ¬∑ Pagado":"Vence ma√±ana ¬∑ Pagado":p.isDueToday?"Vence HOY":"Vence ma√±ana"}),e.jsxs("span",{className:"text-[11px] min-[400px]:text-xs sm:text-sm font-medium truncate",style:{color:"var(--text-secondary)"},children:[e.jsx("span",{className:"hidden min-[400px]:inline",children:"¬∑ "}),p.nombre]})]}),e.jsx("div",{className:"flex items-center gap-1.5 min-[400px]:gap-2 sm:gap-3 mt-0.5",children:M?e.jsxs(e.Fragment,{children:[o>0&&e.jsxs("span",{className:"text-xs min-[400px]:text-sm sm:text-base font-semibold",style:{color:d?"var(--text-secondary)":"var(--text-primary)",textDecoration:d?"line-through":"none"},children:["$",K(o)]}),f>0&&e.jsxs("span",{className:"text-[11px] min-[400px]:text-xs sm:text-sm font-semibold",style:{color:d?"var(--text-secondary)":"var(--accent-green)",textDecoration:d?"line-through":"none"},children:["USD $",K(f)]})]}):e.jsx("span",{className:"text-[11px] min-[400px]:text-xs sm:text-sm",style:{color:"var(--text-secondary)"},children:"Sin gastos"})})]}),e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 self-center",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},p.id)})})}const le={oficial:{nombre:"Oficial",descripcion:"Banco Naci√≥n"},blue:{nombre:"Blue",descripcion:"Informal"},bolsa:{nombre:"MEP",descripcion:"Bolsa/MEP"},contadoconliqui:{nombre:"CCL",descripcion:"Contado con liquidaci√≥n"}},ue="cashe_economic_indicators",Ke=1800*1e3,Ne=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],be=h=>{if(!h)return"";const v=new Date(h);return`${Ne[v.getMonth()]} ${v.getFullYear()}`},Xe=h=>{if(!h)return"";const v=new Date(h);return`${v.getDate()} de ${Ne[v.getMonth()]} ${v.getFullYear()}`};function ie({children:h,title:v,description:m,details:p}){const[o,f]=i.useState(!1);return e.jsxs("div",{className:"relative group",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onTouchStart:()=>f(!o),children:[h,o&&e.jsxs("div",{className:"absolute left-0 bottom-full mb-2 w-56 p-3 rounded-xl shadow-lg z-[9999] animate-scale-in",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)"},children:[e.jsx("p",{className:"text-xs font-semibold mb-1",style:{color:"var(--text-primary)"},children:v}),e.jsx("p",{className:"text-[11px] leading-relaxed mb-2",style:{color:"var(--text-secondary)"},children:m}),p&&e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:p}),e.jsx("div",{className:"absolute left-4 -bottom-1.5 w-3 h-3 rotate-45",style:{backgroundColor:"var(--bg-elevated)",borderRight:"1px solid var(--border-subtle)",borderBottom:"1px solid var(--border-subtle)"}})]})]})}function Qe({onExchangeRateChange:h}){var C,T,W,H,X,Q,Z,ee,z;const v=ce(),[m,p]=i.useState(null),[o,f]=i.useState(null),[d,M]=i.useState(null),[s,j]=i.useState("oficial"),[y,g]=i.useState(null),[S,b]=i.useState(!0),[A,I]=i.useState(null),[r,n]=i.useState(!1),[l,D]=i.useState(!1);i.useEffect(()=>{P()},[]);const P=async()=>{var N;b(!0),I(null);try{const E=sessionStorage.getItem(ue);if(E){const{data:B,timestamp:_}=JSON.parse(E);if(Date.now()-_<Ke){p(B.dollarRates),f(B.inflation),M(B.riesgoPais);const u=await ve(),k=u.tipoUsado||"oficial";j(k);const q=(N=B.dollarRates)==null?void 0:N.find(re=>re.casa===k);g((q==null?void 0:q.venta)||u.tipoCambio),b(!1);return}}const[L,V,J,U]=await Promise.all([Ce(),Se(),De(),ve()]);p(L),f(V),M(J);const se=U.tipoUsado||"oficial";j(se);const Y=L==null?void 0:L.find(B=>B.casa===se);Y!=null&&Y.venta&&Y.venta!==U.tipoCambio?(Me(se).catch(()=>{}),g(Y.venta),h&&h()):g(U.tipoCambio),sessionStorage.setItem(ue,JSON.stringify({data:{dollarRates:L,inflation:V,riesgoPais:J},timestamp:Date.now()}))}catch(E){console.error("Error loading economic data:",E),I("No se pudieron cargar los indicadores")}finally{b(!1)}},O=async N=>{if(!(N===s||r)){n(!0),D(!1);try{const E=await Ee(N);j(N),g(E.tipoCambio),h&&await h()}catch(E){console.error("Error updating exchange rate type:",E)}finally{n(!1)}}},x=async()=>{sessionStorage.removeItem(ue),await P()};i.useMemo(()=>m?m.find(N=>N.casa===s):null,[m,s]);const t=i.useMemo(()=>m?m.filter(N=>le[N.casa]):[],[m]),a=i.useMemo(()=>{if(!m)return null;const N=m.find(V=>V.casa==="oficial"),E=m.find(V=>V.casa==="blue");return!(N!=null&&N.venta)||!(E!=null&&E.venta)?null:{valor:(E.venta-N.venta)/N.venta*100,oficialVenta:N.venta,blueVenta:E.venta}},[m]);return S?e.jsxs("div",{className:"p-4 sm:p-5 rounded-xl sm:rounded-2xl animate-pulse",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"h-5 w-24 rounded",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsx("div",{className:"h-5 w-5 rounded",style:{backgroundColor:"var(--bg-tertiary)"}})]}),e.jsxs("div",{className:"grid grid-cols-1 min-[400px]:grid-cols-2 gap-3",children:[e.jsx("div",{className:"h-32 rounded-xl",style:{backgroundColor:"var(--bg-tertiary)"}}),e.jsx("div",{className:"h-32 rounded-xl",style:{backgroundColor:"var(--bg-tertiary)"}})]}),e.jsx("div",{className:"h-12 rounded-xl mt-3",style:{backgroundColor:"var(--bg-tertiary)"}})]}):A&&!m&&!o?e.jsx("div",{className:"p-4 sm:p-5 rounded-xl sm:rounded-2xl",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:A}),e.jsx("button",{onClick:x,className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Reintentar"})]})}):e.jsxs("div",{className:"p-4 sm:p-5 rounded-xl sm:rounded-2xl relative",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"üìä"}),e.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Econom√≠a"})]}),e.jsx("button",{onClick:()=>v("/configuracion"),className:"p-1.5 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]",title:"Ir a configuraci√≥n",children:e.jsxs("svg",{className:"w-4 h-4",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 min-[400px]:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"p-3 sm:p-4 rounded-xl flex flex-col",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{className:"mb-3 pb-3",style:{borderBottom:"1px solid var(--border-subtle)"},children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wide font-semibold mb-2.5",style:{color:"var(--text-muted)"},children:"Inflaci√≥n"}),o?e.jsxs("div",{className:"space-y-2.5",children:[e.jsx(ie,{title:"Inflaci√≥n Mensual",description:"Variaci√≥n de precios respecto al mes anterior. Mide cu√°nto aumentaron los precios en un solo mes.",details:`Dato de ${be((C=o.mensual)==null?void 0:C.fecha)}`,children:e.jsxs("div",{className:"flex items-center justify-between cursor-help py-0.5",children:[e.jsxs("span",{className:"text-xs sm:text-sm flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:["Mensual",e.jsx("svg",{className:"w-3.5 h-3.5 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:"text-sm sm:text-base font-semibold",style:{color:"var(--text-primary)"},children:[(W=(T=o.mensual)==null?void 0:T.valor)==null?void 0:W.toFixed(1),"%"]}),o.mensualAnterior!==null&&e.jsx("span",{className:"text-xs flex items-center",style:{color:((H=o.mensual)==null?void 0:H.valor)<o.mensualAnterior?"var(--accent-green)":"var(--accent-red)"},children:((X=o.mensual)==null?void 0:X.valor)<o.mensualAnterior?"‚Üì":"‚Üë"})]})]})}),e.jsx(ie,{title:"Inflaci√≥n Interanual",description:"Variaci√≥n de precios respecto al mismo mes del a√±o anterior. Muestra cu√°nto aumentaron los precios en los √∫ltimos 12 meses.",details:`Comparando ${be((Q=o.interanual)==null?void 0:Q.fecha)} con el mismo mes del a√±o anterior`,children:e.jsxs("div",{className:"flex items-center justify-between cursor-help py-0.5",children:[e.jsxs("span",{className:"text-xs sm:text-sm flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:["Interanual",e.jsx("svg",{className:"w-3.5 h-3.5 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("span",{className:"text-sm sm:text-base font-semibold",style:{color:"var(--text-primary)"},children:[(ee=(Z=o.interanual)==null?void 0:Z.valor)==null?void 0:ee.toFixed(1),"%"]})]})})]}):e.jsx("p",{className:"text-xs sm:text-sm",style:{color:"var(--text-muted)"},children:"No disponible"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wide font-semibold mb-2.5",style:{color:"var(--text-muted)"},children:"Indicadores"}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsx(ie,{title:"Riesgo Pa√≠s",description:"Mide la diferencia de tasa que paga Argentina para endeudarse respecto a los bonos del Tesoro de EE.UU. A menor valor, mejor percepci√≥n de los mercados.",details:d!=null&&d.fecha?`Dato del ${Xe(d.fecha)}`:null,children:e.jsxs("div",{className:"flex items-center justify-between cursor-help py-0.5",children:[e.jsxs("span",{className:"text-xs sm:text-sm flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:["Riesgo Pa√≠s",e.jsx("svg",{className:"w-3.5 h-3.5 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),d!=null&&d.valor?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:"text-sm sm:text-base font-semibold",style:{color:"var(--text-primary)"},children:[d.valor," pts"]}),d.valorAnterior&&d.valor!==d.valorAnterior&&e.jsx("span",{className:"text-xs flex items-center",style:{color:d.valor<d.valorAnterior?"var(--accent-green)":"var(--accent-red)"},children:d.valor<d.valorAnterior?"‚Üì":"‚Üë"})]}):e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"-"})]})}),e.jsx(ie,{title:"Brecha Cambiaria",description:"Diferencia porcentual entre el d√≥lar blue y el oficial. Indica la distorsi√≥n del mercado cambiario.",details:a?`Blue $${K(a.blueVenta)} vs Oficial $${K(a.oficialVenta)}`:null,children:e.jsxs("div",{className:"flex items-center justify-between cursor-help py-0.5",children:[e.jsxs("span",{className:"text-xs sm:text-sm flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:["Brecha",e.jsx("svg",{className:"w-3.5 h-3.5 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),a?e.jsxs("span",{className:"text-sm sm:text-base font-semibold",style:{color:a.valor>50?"var(--accent-red)":a.valor>20?"var(--accent-yellow)":"var(--accent-green)"},children:[a.valor.toFixed(1),"%"]}):e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"-"})]})})]})]})]}),e.jsxs("div",{className:"p-3 sm:p-4 rounded-xl flex flex-col",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("p",{className:"text-[10px] sm:text-[11px] uppercase tracking-wide font-semibold mb-2.5",style:{color:"var(--text-muted)"},children:"D√≥lar"}),t.length>0?e.jsx("div",{className:"flex-1 flex flex-col justify-between",children:t.slice(0,4).map(N=>{var L;const E=N.casa===s;return e.jsxs("div",{className:"flex items-center justify-between py-1.5 sm:py-2 px-2 -mx-2 rounded-lg transition-colors",style:{backgroundColor:E?"var(--accent-primary-dim)":"transparent"},children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",style:{color:E?"var(--accent-primary)":"var(--text-secondary)"},children:((L=le[N.casa])==null?void 0:L.nombre)||N.nombre}),e.jsxs("span",{className:"text-xs sm:text-sm tabular-nums font-medium truncate",style:{color:"var(--text-primary)"},children:["$",K(N.compra)," / $",K(N.venta)]})]},N.casa)})}):e.jsx("p",{className:"text-xs sm:text-sm",style:{color:"var(--text-muted)"},children:"No disponible"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>D(!l),disabled:r,className:"w-full flex items-center justify-between gap-2 px-3 py-2.5 rounded-xl transition-colors overflow-hidden",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("span",{className:"text-xs flex-shrink-0",style:{color:"var(--text-muted)"},children:"Usando:"}),e.jsx("span",{className:"text-sm font-medium truncate",style:{color:"var(--accent-primary)"},children:((z=le[s])==null?void 0:z.nombre)||s}),y&&e.jsxs("span",{className:"text-xs flex-shrink-0",style:{color:"var(--text-secondary)"},children:["$",K(y),"/USD"]})]}),e.jsx("div",{className:"flex items-center gap-1",children:r?e.jsx("div",{className:"w-4 h-4 border-2 border-[var(--accent-primary)]/30 border-t-[var(--accent-primary)] rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{role:"button",tabIndex:0,onClick:N=>{N.stopPropagation(),x()},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.stopPropagation(),x())},className:"p-1 rounded hover:bg-[var(--bg-secondary)] transition-colors cursor-pointer",title:"Actualizar cotizaciones",children:e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${l?"rotate-180":""}`,style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]}),l&&e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-1 p-2 rounded-xl shadow-lg z-[9998] animate-scale-in overflow-hidden",style:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-subtle)"},children:Object.entries(le).map(([N,{nombre:E,descripcion:L}])=>{const V=m==null?void 0:m.find(U=>U.casa===N),J=N===s;return e.jsxs("button",{onClick:()=>O(N),className:"w-full flex items-center justify-between p-2 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]",style:{backgroundColor:J?"var(--accent-primary-dim)":"transparent"},children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:J?"var(--accent-primary)":"var(--text-primary)"},children:E}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:L})]}),V&&e.jsxs("span",{className:"text-xs tabular-nums",style:{color:"var(--text-secondary)"},children:["$",K(V.venta)]})]},N)})})]})]})}function as(){const h=ce(),{showError:v}=Ae(),[m,p]=i.useState("ARS"),[o,f]=i.useState(()=>{try{const c=localStorage.getItem("cashe_balance_account_filters");if(c)return JSON.parse(c)}catch(c){console.warn("Error loading balance account filters:",c)}return[]});i.useEffect(()=>{try{localStorage.setItem("cashe_balance_account_filters",JSON.stringify(o))}catch(c){console.warn("Error saving balance account filters:",c)}},[o]);const[d,M]=i.useState({from:me(new Date),to:de(new Date)}),[s,j]=i.useState(()=>{try{const c=localStorage.getItem("cashe_home_movement_dates");if(c){const w=JSON.parse(c);return{from:w.from?new Date(w.from):me(new Date),to:w.to?new Date(w.to):de(new Date)}}}catch(c){console.warn("Error loading saved date range:",c)}return{from:me(new Date),to:de(new Date)}});i.useEffect(()=>{var c,w;try{localStorage.setItem("cashe_home_movement_dates",JSON.stringify({from:((c=s.from)==null?void 0:c.toISOString())||null,to:((w=s.to)==null?void 0:w.toISOString())||null}))}catch($){console.warn("Error saving date range:",$)}},[s]);const[y,g]=i.useState(()=>{try{const c=localStorage.getItem("cashe_home_filters");if(c){const w=JSON.parse(c);return{tipos:w.tipos||[],cuentas:w.cuentas||[],categorias:w.categorias||[]}}}catch(c){console.warn("Error loading saved filters:",c)}return{tipos:[],cuentas:[],categorias:[]}});i.useEffect(()=>{try{localStorage.setItem("cashe_home_filters",JSON.stringify(y))}catch(c){console.warn("Error saving filters:",c)}},[y]);const[S,b]=i.useState(null),[A,I]=i.useState([]),[r,n]=i.useState([]),[l,D]=i.useState([]),[P,O]=i.useState({ingresos:[],gastos:[]}),[x,t]=i.useState(!0),[a,C]=i.useState(!0),[T,W]=i.useState(!0),[H,X]=i.useState(!0),[Q,Z]=i.useState(null),[ee,z]=i.useState(null),[N,E]=i.useState(!1),[L,V]=i.useState(null),[J,U]=i.useState(!1),[se,Y]=i.useState(!1);i.useEffect(()=>{async function c(){try{const[w,$]=await Promise.all([ye(),$e()]);D(w.accounts||[]),O($.categorias||{ingresos:[],gastos:[]})}catch(w){console.error("Error fetching initial data:",w)}finally{X(!1)}}c()},[]),i.useEffect(()=>{if(l.length>0&&!se){const c=y.cuentas||[],w=l.map(te=>te.nombre),$=c.filter(te=>w.includes(te));if($.length===0){const te=l.filter(ae=>!ae.ocultaDelBalance).map(ae=>ae.nombre);g(ae=>({...ae,cuentas:te}))}else $.length!==c.length&&g(te=>({...te,cuentas:$}));Y(!0)}},[l,se,y.cuentas]);const B=i.useCallback(async()=>{try{t(!0);const c=await Le({fromDate:d.from?F(d.from,"yyyy-MM-dd"):null,toDate:d.to?F(d.to,"yyyy-MM-dd"):null});b(c.dashboard),Z(null)}catch(c){Z(c.message),console.error("Error fetching dashboard:",c)}finally{t(!1)}},[d]);i.useEffect(()=>{B()},[B]);const _=i.useCallback(async()=>{try{C(!0);const c=await fe({fromDate:s.from?F(s.from,"yyyy-MM-dd"):null,toDate:s.to?F(s.to,"yyyy-MM-dd"):null,tipos:y.tipos,cuentas:y.cuentas,categorias:y.categorias});I(c.movements||[])}catch(c){console.error("Error fetching movements:",c)}finally{C(!1)}},[s,y]);i.useEffect(()=>{_()},[_]);const u=i.useCallback(async()=>{try{W(!0);const c=Re(new Date,{weekStartsOn:1}),w=Be(new Date,{weekStartsOn:1}),$=await fe({fromDate:F(c,"yyyy-MM-dd"),toDate:F(w,"yyyy-MM-dd"),tipos:[],cuentas:[],categorias:[]});n($.movements||[])}catch(c){console.error("Error fetching weekly movements:",c)}finally{W(!1)}},[]);i.useEffect(()=>{u()},[u]);const k=i.useCallback(async()=>{await Promise.all([B(),_(),u()])},[B,_,u]);Ie(G.ALL_DATA_CHANGED,k);const q=async c=>{try{E(!0),await Ve(c),z(null);const w=c.tipo==="ingreso"?G.INCOMES_CHANGED:c.tipo==="gasto"?G.EXPENSES_CHANGED:G.TRANSFERS_CHANGED;oe(w),oe(G.ACCOUNTS_CHANGED),await Promise.all([B(),_(),u()])}catch(w){console.error("Error updating movement:",w),v("No se pudo guardar el movimiento",w.message)}finally{E(!1)}},re=async c=>{try{U(!0),await Ue(c),V(null),oe(G.ACCOUNTS_CHANGED);const w=await ye();D(w.accounts||[]),await B()}catch(w){console.error("Error updating account:",w),v("No se pudo guardar la cuenta",w.message)}finally{U(!1)}},ne=async c=>{z(null),I(w=>w.filter($=>!($.tipo===c.tipo&&$.rowIndex===c.rowIndex))),n(w=>w.filter($=>!($.tipo===c.tipo&&$.rowIndex===c.rowIndex)));try{await Te(c);const w=c.tipo==="ingreso"?G.INCOMES_CHANGED:c.tipo==="gasto"?G.EXPENSES_CHANGED:G.TRANSFERS_CHANGED;oe(w),oe(G.ACCOUNTS_CHANGED),await Promise.all([B(),_(),u()])}catch(w){console.error("Error deleting movement:",w),v("No se pudo eliminar el movimiento",w.message),await Promise.all([_(),u()])}},we=c=>{z(null),h("/nuevo",{state:{prefill:c}})};return H&&x?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(xe,{size:"lg"})}):Q&&!S?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[e.jsxs("p",{style:{color:"var(--accent-red)"},children:["Error: ",Q]}),e.jsx("button",{onClick:B,className:"px-4 py-2 rounded-lg font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Reintentar"})]}):e.jsx(_e,{onRefresh:k,disabled:x&&a,children:e.jsxs("div",{className:"space-y-3 sm:space-y-6 w-full max-w-full overflow-x-hidden",children:[e.jsx("h1",{className:"text-base sm:text-lg font-medium",style:{color:"var(--text-primary)"},children:"Dashboard"}),e.jsx(Fe,{accounts:l}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4",children:[x?e.jsx("div",{className:"rounded-xl p-12 flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:e.jsx(xe,{})}):e.jsx(He,{accounts:l,dashboard:S,currency:m,onCurrencyChange:p,accountFilters:o,onAccountFiltersChange:f}),x?e.jsx("div",{className:"rounded-xl p-12 flex items-center justify-center",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:e.jsx(xe,{})}):e.jsx(ze,{accounts:l,dashboard:S,currency:m,dateRange:d,onDateRangeChange:M,accountFilters:o})]}),e.jsx(Qe,{onExchangeRateChange:async()=>{await B()}}),e.jsx(Ge,{accounts:l,loading:H,onAccountClick:c=>{V(c)}}),e.jsx(Je,{movements:r,accounts:l,categories:P,loading:T}),e.jsx(qe,{movements:A,dateRange:s,onDateRangeChange:j,filters:y,onFilterChange:g,accounts:l,categories:P,onMovementClick:z,onMovementDelete:ne,loading:a,currency:m}),ee&&e.jsx(Pe,{movement:ee,accounts:l,categories:P,onSave:q,onDelete:ne,onDuplicate:we,onClose:()=>z(null),onConvertedToRecurring:k,loading:N}),L&&e.jsx(We,{account:L,onSave:re,onClose:()=>V(null),loading:J})]})})}export{as as default};
