import{r as l,j as o,f as L,h as C,k as R,a8 as Je,n as Qe,a9 as de,b as Y,c as ue,D as et}from"./index-Eh7_dahB.js";import{D as tt}from"./DateRangePicker-D_Mrk7B1.js";import{c as F,i as X,a as Ne,s as Ae,D as V,b as Oe,d as rt,Z as G,L as U,u as _,e as at,f as nt,g as J,h as De,r as ee,j as st,k as ot,l as it,m as te,n as lt,o as ct,p as dt,q as pe,t as ut,v as pt,w as Ee,C as mt,x as ft,y as M,z as me,A as Se,B as vt,E as re,F as Ie,G as ke,H as Ce,I as xt,J as yt,K as ht,M as fe,N as gt,R as bt,S as jt,O as Pt,P as Le,Q as wt,T as Nt,U as At,V as Ot,W as Dt,X as Et,Y as Re,_ as ve,$ as St,a0 as It,a1 as K,a2 as kt,a3 as Ct,a4 as Lt,a5 as Rt,a6 as _t,a7 as ae,a8 as Tt,a9 as Kt,aa as $t,ab as ne,ac as Mt,ad as _e,ae as Te,af as xe}from"./PieChart-BoguNUhD.js";import{L as Ke,C as $e}from"./CartesianGrid-DpB4n-X_.js";import{s as W}from"./subMonths-Cn0fN_IX.js";function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q.apply(null,arguments)}var Me=e=>{var{cx:t,cy:r,r:a,className:n}=e,i=F("recharts-dot",n);return X(t)&&X(r)&&X(a)?l.createElement("circle",Q({},Ae(e),Ne(e),{className:i,cx:t,cy:r,r:a})):null},Wt=["points"];function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ye(Object(r),!0).forEach(function(a){Bt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Bt(e,t,r){return(t=zt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zt(e){var t=Ft(e,"string");return typeof t=="symbol"?t:t+""}function Ft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B.apply(null,arguments)}function Vt(e,t){if(e==null)return{};var r,a,n=Gt(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gt(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Ut(e){var{option:t,dotProps:r,className:a}=e;if(l.isValidElement(t))return l.cloneElement(t,r);if(typeof t=="function")return t(r);var n=F(a,typeof t!="boolean"?t.className:""),i=r??{},{points:s}=i,d=Vt(i,Wt);return l.createElement(Me,B({},d,{className:n}))}function Ht(e,t){return e==null?!1:t?!0:e.length===1}function Yt(e){var{points:t,dot:r,className:a,dotClassName:n,dataKey:i,baseProps:s,needClip:d,clipPathId:c,zIndex:u=V.scatter}=e;if(!Ht(t,r))return null;var p=Oe(r),x=rt(r),h=t.map((m,y)=>{var P,N,j=Z(Z(Z({r:3},s),x),{},{index:y,cx:(P=m.x)!==null&&P!==void 0?P:void 0,cy:(N=m.y)!==null&&N!==void 0?N:void 0,dataKey:i,value:m.value,payload:m.payload,points:t});return l.createElement(Ut,{key:"dot-".concat(y),option:r,dotProps:j,className:n})}),g={};return d&&c!=null&&(g.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(c,")")),l.createElement(G,{zIndex:u},l.createElement(U,B({className:a},g),h))}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?he(Object(r),!0).forEach(function(a){Xt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Xt(e,t,r){return(t=Zt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e){var t=qt(e,"string");return typeof t=="symbol"?t:t+""}function qt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jt=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:n,dataKey:i,clipPath:s}=e;if(n===!1||t.x==null||t.y==null)return null;var d={index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=q(q(q({},d),De(n)),Ne(n)),u;return l.isValidElement(n)?u=l.cloneElement(n,c):typeof n=="function"?u=n(c):u=l.createElement(Me,c),l.createElement(U,{className:"recharts-active-dot",clipPath:s},u)};function Qt(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:n,clipPath:i,zIndex:s=V.activeDot}=e,d=_(at),c=nt();if(t==null||c==null)return null;var u=t.find(p=>c.includes(p.payload));return J(u)?null:l.createElement(G,{zIndex:s},l.createElement(Jt,{point:u,childIndex:Number(d),mainColor:r,dataKey:n,activeDot:a,clipPath:i}))}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ge(Object(r),!0).forEach(function(a){er(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function er(e,t,r){return(t=tr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(e){var t=rr(e,"string");return typeof t=="symbol"?t:t+""}function rr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z.apply(null,arguments)}var ar=(e,t)=>{var r;if(l.isValidElement(e))r=l.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{if(!M(t.x1)||!M(t.y1)||!M(t.x2)||!M(t.y2))return null;r=l.createElement("line",z({},t,{className:"recharts-reference-line-line"}))}return r},nr=(e,t,r,a,n,i)=>{var{x:s,width:d}=i,c=n.y.apply(e,{position:r});if(Se(c)||t==="discard"&&!n.y.isInRange(c))return null;var u=[{x:s+d,y:c},{x:s,y:c}];return a==="left"?u.reverse():u},sr=(e,t,r,a,n,i)=>{var{y:s,height:d}=i,c=n.x.apply(e,{position:r});if(Se(c)||t==="discard"&&!n.x.isInRange(c))return null;var u=[{x:c,y:s+d},{x:c,y:s}];return a==="top"?u.reverse():u},or=(e,t,r,a)=>{var n=e.map(i=>a.apply(i,{position:r}));return t==="discard"&&n.some(i=>!a.isInRange(i))?null:n},ir=(e,t,r,a,n,i)=>{var{x:s,y:d,segment:c,ifOverflow:u}=i,p=me(s),x=me(d);return x?nr(d,u,r,n,e,t):p?sr(s,u,r,a,e,t):c!=null&&c.length===2?or(c,u,r,e):null};function lr(e){var t=st();return l.useEffect(()=>(t(ot(e)),()=>{t(it(e))})),null}function cr(e){var{xAxisId:t,yAxisId:r,shape:a,className:n,ifOverflow:i}=e,s=te(),d=lt(),c=_(w=>ct(w,t)),u=_(w=>dt(w,r)),p=_(w=>pe(w,"xAxis",t,s)),x=_(w=>pe(w,"yAxis",r,s)),h=ut();if(!d||!h||c==null||u==null||p==null||x==null)return null;var g=pt({x:p,y:x}),m=ir(g,h,e.position,c.orientation,u.orientation,e);if(!m)return null;var[{x:y,y:P},{x:N,y:j}]=m,b=i==="hidden"?"url(#".concat(d,")"):void 0,f=be(be({clipPath:b},Ee(e)),{},{x1:y,y1:P,x2:N,y2:j}),v=vt({x1:y,y1:P,x2:N,y2:j});return l.createElement(G,{zIndex:e.zIndex},l.createElement(U,{className:F("recharts-reference-line",n)},ar(a,f),l.createElement(mt,z({},v,{lowerWidth:v.width,upperWidth:v.width}),l.createElement(ft,{label:e.label}),e.children)))}var dr={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:V.line};function We(e){var t=ee(e,dr);return l.createElement(l.Fragment,null,l.createElement(lr,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),l.createElement(cr,t))}We.displayName="ReferenceLine";var Be=(e,t,r,a)=>ke(e,"xAxis",t,a),ze=(e,t,r,a)=>Ce(e,"xAxis",t,a),Fe=(e,t,r,a)=>ke(e,"yAxis",r,a),Ve=(e,t,r,a)=>Ce(e,"yAxis",r,a),ur=re([Ie,Be,Fe,ze,Ve],(e,t,r,a,n)=>ht(e,"xAxis")?fe(t,a,!1):fe(r,n,!1)),pr=(e,t,r,a,n)=>n;function mr(e){return e.type==="line"}var fr=re([yt,pr],(e,t)=>e.filter(mr).find(r=>r.id===t)),vr=re([Ie,Be,Fe,ze,Ve,fr,ur,xt],(e,t,r,a,n,i,s,d)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:p}=d;if(!(i==null||t==null||r==null||a==null||n==null||a.length===0||n.length===0||s==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:x,data:h}=i,g;if(h!=null&&h.length>0?g=h:g=c==null?void 0:c.slice(u,p+1),g!=null)return Tr({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:n,dataKey:x,bandSize:s,displayedData:g})}});function xr(e){var t=De(e),r=3,a=2;if(t!=null){var{r:n,strokeWidth:i}=t,s=Number(n),d=Number(i);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(d)||d<0)&&(d=a),{r:s,strokeWidth:d}}return{r,strokeWidth:a}}var yr=["id"],hr=["type","layout","connectNulls","needClip","shape"],gr=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$.apply(null,arguments)}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?je(Object(r),!0).forEach(function(a){br(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function br(e,t,r){return(t=jr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jr(e){var t=Pr(e,"string");return typeof t=="symbol"?t:t+""}function Pr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function se(e,t){if(e==null)return{};var r,a,n=wr(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wr(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Nr=e=>{var{dataKey:t,name:r,stroke:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:a,value:Le(r,t),payload:e}]},Ar=l.memo(e=>{var{dataKey:t,data:r,stroke:a,strokeWidth:n,fill:i,name:s,hide:d,unit:c,tooltipType:u,id:p}=e,x={dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Le(s,t),hide:d,type:u,color:a,unit:c,graphicalItemId:p}};return l.createElement(wt,{tooltipEntrySettings:x})}),Ge=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Or(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],n=0;n<t;++n)a=[...a,...r];return a}var Dr=(e,t,r)=>{var a=r.reduce((x,h)=>x+h);if(!a)return Ge(t,e);for(var n=Math.floor(e/a),i=e%a,s=t-e,d=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){d=[...r.slice(0,c),i-u];break}var p=d.length%2===0?[0,s]:[s];return[...Or(r,n),...d,...p].map(x=>"".concat(x,"px")).join(", ")};function Er(e){var{clipPathId:t,points:r,props:a}=e,{dot:n,dataKey:i,needClip:s}=a,{id:d}=a,c=se(a,yr),u=Ae(c);return l.createElement(Yt,{points:r,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:s,clipPathId:t})}function Sr(e){var{showLabels:t,children:r,points:a}=e,n=l.useMemo(()=>a==null?void 0:a.map(i=>{var s,d,c={x:(s=i.x)!==null&&s!==void 0?s:0,y:(d=i.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return S(S({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[a]);return l.createElement(Ct,{value:t?n:void 0},r)}function Pe(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:n,props:i}=e,{type:s,layout:d,connectNulls:c,needClip:u,shape:p}=i,x=se(i,hr),h=S(S({},Ee(x)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:a,type:s,layout:d,connectNulls:c,strokeDasharray:n??i.strokeDasharray});return l.createElement(l.Fragment,null,(a==null?void 0:a.length)>1&&l.createElement(Lt,$({shapeType:"curve",option:p},h,{pathRef:r})),l.createElement(Er,{points:a,clipPathId:t,props:i}))}function Ir(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function kr(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:n,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:d,isAnimationActive:c,animationBegin:u,animationDuration:p,animationEasing:x,animateNewValues:h,width:g,height:m,onAnimationEnd:y,onAnimationStart:P}=r,N=n.current,j=St(s,"recharts-line-"),b=l.useRef(j),[f,v]=l.useState(!1),w=!f,A=l.useCallback(()=>{typeof y=="function"&&y(),v(!1)},[y]),O=l.useCallback(()=>{typeof P=="function"&&P(),v(!0)},[P]),E=Ir(a.current),I=l.useRef(0);b.current!==j&&(I.current=i.current,b.current=j);var oe=I.current;return l.createElement(Sr,{points:s,showLabels:w},r.children,l.createElement(It,{animationId:j,begin:u,duration:p,isActive:c,easing:x,onAnimationEnd:A,onAnimationStart:O,key:j},k=>{var Ye=K(oe,E+oe,k),H=Math.min(Ye,E),T;if(c)if(d){var Xe="".concat(d).split(/[,\s]+/gim).map(D=>parseFloat(D));T=Dr(H,E,Xe)}else T=Ge(E,H);else T=d==null?void 0:String(d);if(k>0&&E>0&&(n.current=s,i.current=Math.max(i.current,H)),N){var Ze=N.length/s.length,ie=k===1?s:s.map((D,qe)=>{var le=Math.floor(qe*Ze);if(N[le]){var ce=N[le];return S(S({},D),{},{x:K(ce.x,D.x,k),y:K(ce.y,D.y,k)})}return h?S(S({},D),{},{x:K(g*2,D.x,k),y:K(m/2,D.y,k)}):S(S({},D),{},{x:D.x,y:D.y})});return n.current=ie,l.createElement(Pe,{props:r,points:ie,clipPathId:t,pathRef:a,strokeDasharray:T})}return l.createElement(Pe,{props:r,points:s,clipPathId:t,pathRef:a,strokeDasharray:T})}),l.createElement(kt,{label:r.label}))}function Cr(e){var{clipPathId:t,props:r}=e,a=l.useRef(null),n=l.useRef(0),i=l.useRef(null);return l.createElement(kr,{props:r,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:n,pathRef:i})}var Lr=(e,t)=>{var r,a;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Re(e.payload,t)}};class Rr extends l.Component{render(){var{hide:t,dot:r,points:a,className:n,xAxisId:i,yAxisId:s,top:d,left:c,width:u,height:p,id:x,needClip:h,zIndex:g}=this.props;if(t)return null;var m=F("recharts-line",n),y=x,{r:P,strokeWidth:N}=xr(r),j=Oe(r),b=P*2+N,f=h?"url(#clipPath-".concat(j?"":"dots-").concat(y,")"):void 0;return l.createElement(G,{zIndex:g},l.createElement(U,{className:m},h&&l.createElement("defs",null,l.createElement(Dt,{clipPathId:y,xAxisId:i,yAxisId:s}),!j&&l.createElement("clipPath",{id:"clipPath-dots-".concat(y)},l.createElement("rect",{x:c-b/2,y:d-b/2,width:u+b,height:p+b}))),l.createElement(Et,{xAxisId:i,yAxisId:s,data:a,dataPointFormatter:Lr,errorBarOffset:0},l.createElement(Cr,{props:this.props,clipPathId:y}))),l.createElement(Qt,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:f}))}}var Ue={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:V.line,type:"linear"};function _r(e){var t=ee(e,Ue),{activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:i,animationEasing:s,connectNulls:d,dot:c,hide:u,isAnimationActive:p,label:x,legendType:h,xAxisId:g,yAxisId:m,id:y}=t,P=se(t,gr),{needClip:N}=Nt(g,m),j=At(),b=Ot(),f=te(),v=_(I=>vr(I,g,m,f,y));if(b!=="horizontal"&&b!=="vertical"||v==null||j==null)return null;var{height:w,width:A,x:O,y:E}=j;return l.createElement(Rr,$({},P,{id:y,connectNulls:d,dot:c,activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:i,animationEasing:s,isAnimationActive:p,hide:u,label:x,legendType:h,xAxisId:g,yAxisId:m,points:v,layout:b,height:w,width:A,left:O,top:E,needClip:N}))}function Tr(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:n,yAxisTicks:i,dataKey:s,bandSize:d,displayedData:c}=e;return c.map((u,p)=>{var x=Re(u,s);if(t==="horizontal"){var h=ve({axis:r,ticks:n,bandSize:d,entry:u,index:p}),g=J(x)?null:a.scale(x);return{x:h,y:g,value:x,payload:u}}var m=J(x)?null:r.scale(x),y=ve({axis:a,ticks:i,bandSize:d,entry:u,index:p});return m==null||y==null?null:{x:m,y,value:x,payload:u}}).filter(Boolean)}function Kr(e){var t=ee(e,Ue),r=te();return l.createElement(bt,{id:t.id,type:"line"},a=>l.createElement(l.Fragment,null,l.createElement(jt,{legendPayload:Nr(t)}),l.createElement(Ar,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),l.createElement(Pt,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),l.createElement(_r,$({},t,{id:a}))))}var He=l.memo(Kr,gt);He.displayName="Line";var $r=["axis"],Mr=l.forwardRef((e,t)=>l.createElement(Rt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:$r,tooltipPayloadSearcher:_t,categoricalChartProps:e,ref:t}));const we=["#f43f5e","#f97316","#eab308","#10b981","#14b8a6","#0ea5e9","#14b8a6","#ec4899","#6366f1","#84cc16"];function Wr({data:e,loading:t,currency:r="ARS"}){if(t)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("div",{className:"h-4 w-32 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),o.jsx("div",{className:"h-64 flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!e||e.length===0)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Gastos por Categoria"}),o.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:o.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:i,payload:s})=>{if(i&&s&&s.length){const d=s[0].payload;return o.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:d.name}),o.jsx("p",{style:{color:"var(--accent-red)"},children:L(d.value)}),o.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[d.percentage.toFixed(1),"%"]})]})}return null},n=i=>{const{payload:s}=i;return o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:[s.slice(0,6).map((d,c)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)"},children:[o.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:d.color}}),o.jsx("span",{style:{color:"var(--text-secondary)"},children:d.value.length>12?d.value.substring(0,12)+"...":d.value})]},`legend-${c}`)),s.length>6&&o.jsxs("div",{className:"px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:["+",s.length-6," mas"]})]})};return o.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Gastos por categoría"}),o.jsx(ae,{width:"100%",height:240,children:o.jsxs(Tt,{children:[o.jsx(Kt,{data:e,cx:"50%",cy:"45%",innerRadius:45,outerRadius:80,paddingAngle:2,dataKey:"value",nameKey:"name",children:e.map((i,s)=>o.jsx($t,{fill:we[s%we.length],stroke:"transparent"},`cell-${s}`))}),o.jsx(ne,{content:o.jsx(a,{})}),o.jsx(Ke,{content:n})]})})]})}function Br({data:e,loading:t,currency:r="ARS"}){if(t)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("div",{className:"h-4 w-40 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),o.jsx("div",{className:"h-64 flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!e||e.length===0)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Ingresos vs Gastos"}),o.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:o.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:i,payload:s,label:d})=>i&&s&&s.length?o.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:d}),s.map((c,u)=>o.jsxs("p",{style:{color:c.color},children:[c.name,": ",L(c.value)]},u)),s.length===2&&o.jsxs("p",{className:"mt-1 pt-1 text-sm",style:{borderTop:"1px solid var(--border-subtle)",color:s[0].value-s[1].value>=0?"var(--accent-green)":"var(--accent-red)"},children:["Balance: ",L(s[0].value-s[1].value)]})]}):null,n=i=>{const s=Math.round(i*100)/100;return Math.abs(s)<.01?"0":s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(0)}K`:s.toFixed(0)};return o.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Ingresos vs Gastos"}),o.jsx(ae,{width:"100%",height:240,children:o.jsxs(Mt,{data:e,margin:{top:5,right:5,left:-15,bottom:0},children:[o.jsx($e,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",strokeOpacity:.5,vertical:!1}),o.jsx(_e,{dataKey:"month",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),o.jsx(Te,{tickFormatter:n,tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),o.jsx(ne,{content:o.jsx(a,{}),cursor:{fill:"var(--bg-tertiary)",opacity:.3}}),o.jsx(Ke,{wrapperStyle:{paddingTop:"8px"},formatter:i=>o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"11px"},children:i})}),o.jsx(xe,{dataKey:"ingresos",name:"Ingresos",fill:"var(--accent-green)",radius:[3,3,0,0],maxBarSize:32}),o.jsx(xe,{dataKey:"gastos",name:"Gastos",fill:"var(--accent-red)",radius:[3,3,0,0],maxBarSize:32})]})})]})}function zr({data:e,loading:t,currency:r="ARS"}){if(t)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("div",{className:"h-4 w-36 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),o.jsx("div",{className:"h-64 flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!e||e.length===0)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Evolucion del Balance"}),o.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:o.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:u,payload:p,label:x})=>{if(u&&p&&p.length){const h=p[0].value;return o.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:x}),o.jsxs("p",{style:{color:h>=0?"var(--accent-green)":"var(--accent-red)"},children:["Balance: ",L(h)]})]})}return null},n=u=>{const p=Math.round(u*100)/100;return Math.abs(p)<.01?"0":p>=1e6||p<=-1e6?`${(p/1e6).toFixed(1)}M`:p>=1e3||p<=-1e3?`${(p/1e3).toFixed(0)}K`:p.toFixed(0)},i=e.map(u=>u.balance),s=Math.min(...i),d=Math.max(...i),c=(d-s)*.1||1e3;return o.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Evolución del balance"}),o.jsx(ae,{width:"100%",height:240,children:o.jsxs(Mr,{data:e,margin:{top:5,right:5,left:-15,bottom:0},children:[o.jsx($e,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",strokeOpacity:.5,vertical:!1}),o.jsx(_e,{dataKey:"month",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),o.jsx(Te,{tickFormatter:n,tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1,domain:[s-c,d+c]}),o.jsx(ne,{content:o.jsx(a,{})}),o.jsx(We,{y:0,stroke:"var(--text-muted)",strokeDasharray:"3 3",strokeOpacity:.3}),o.jsx(He,{type:"monotone",dataKey:"balance",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:0,r:3},activeDot:{r:5,fill:"var(--accent-primary)",stroke:"var(--bg-secondary)",strokeWidth:2}})]})})]})}const Fr=[{label:"Este mes",getValue:()=>({from:R(new Date),to:C(new Date)})},{label:"3 meses",getValue:()=>({from:R(W(new Date,2)),to:C(new Date)})},{label:"6 meses",getValue:()=>({from:R(W(new Date,5)),to:C(new Date)})},{label:"12 meses",getValue:()=>({from:R(W(new Date,11)),to:C(new Date)})}];function Xr(){const[e,t]=l.useState([]),[r,a]=l.useState(!0),[n,i]=l.useState({from:R(W(new Date,5)),to:C(new Date)}),[s,d]=l.useState("ARS"),c=l.useCallback(async(g=!0)=>{try{g&&a(!0);const m=await Je(1e3,!0);t(m.movimientos||[])}catch(m){console.error("Error loading movements:",m)}finally{g&&a(!1)}},[]);l.useEffect(()=>{c()},[c]),Qe(et.ALL_DATA_CHANGED,()=>c(!1));const u=l.useMemo(()=>{if(!n.from||!n.to)return[];const g=new Date(n.from);g.setHours(0,0,0,0);const m=new Date(n.to);m.setHours(23,59,59,999);const y=e.filter(f=>{if(f.tipo!=="gasto")return!1;const v=new Date(f.fecha);return v>=g&&v<=m}),P={};let N=0,j=0;y.forEach(f=>{const v=f.categoria||"Sin categoria",w=v.replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||v,A=f.montoPesos||f.monto||0,O=f.montoDolares||0;N+=A,j+=O,P[w]||(P[w]={pesos:0,dolares:0}),P[w].pesos+=A,P[w].dolares+=O});const b=s==="ARS"?N:j;return Object.entries(P).map(([f,v])=>{const w=s==="ARS"?v.pesos:v.dolares;return{name:f,value:w,pesos:v.pesos,dolares:v.dolares,percentage:b>0?w/b*100:0}}).sort((f,v)=>v.value-f.value).slice(0,10)},[e,n,s]),p=l.useMemo(()=>!n.from||!n.to?[]:de({start:n.from,end:n.to}).map(m=>{const y=R(m),P=C(m),N=Y(m,"yyyy-MM"),j=Y(m,"MMM",{locale:ue});let b=0,f=0,v=0,w=0;return e.forEach(A=>{const O=new Date(A.fecha);if(O>=y&&O<=P){const E=A.montoPesos||A.monto||0,I=A.montoDolares||0;A.tipo==="ingreso"?(b+=E,v+=I):A.tipo==="gasto"&&(f+=E,w+=I)}}),{month:j.charAt(0).toUpperCase()+j.slice(1),monthKey:N,ingresos:s==="ARS"?b:v,gastos:s==="ARS"?f:w,ingresosPesos:b,gastosPesos:f,ingresosDolares:v,gastosDolares:w}}),[e,n,s]),x=l.useMemo(()=>{if(!n.from||!n.to)return[];const g=de({start:n.from,end:n.to}),m=[...e].sort((y,P)=>new Date(y.fecha)-new Date(P.fecha));return g.map(y=>{const P=C(y),N=Y(y,"MMM",{locale:ue});let j=0,b=0;return m.forEach(f=>{if(new Date(f.fecha)<=P){const w=f.montoPesos||f.monto||0,A=f.montoDolares||0;f.tipo==="ingreso"?(j+=w,b+=A):f.tipo==="gasto"&&(j-=w,b-=A)}}),{month:N.charAt(0).toUpperCase()+N.slice(1),balance:s==="ARS"?j:b,balancePesos:j,balanceDolares:b}})},[e,n,s]),h=l.useMemo(()=>{if(!n.from||!n.to)return{totalIngresos:0,totalGastos:0,balance:0,savingsRate:0};const g=new Date(n.from);g.setHours(0,0,0,0);const m=new Date(n.to);m.setHours(23,59,59,999);let y=0,P=0,N=0,j=0;e.forEach(v=>{const w=new Date(v.fecha);if(w>=g&&w<=m){const A=v.montoPesos||v.monto||0,O=v.montoDolares||0;v.tipo==="ingreso"?(y+=A,N+=O):v.tipo==="gasto"&&(P+=A,j+=O)}});const b=s==="ARS"?y:N,f=s==="ARS"?P:j;return{totalIngresos:b,totalGastos:f,balance:b-f,savingsRate:b>0?(b-f)/b*100:0}},[e,n,s]);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[o.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Estadisticas"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:"var(--bg-tertiary)"},children:[o.jsxs("button",{onClick:()=>d("ARS"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:s==="ARS"?"var(--accent-primary)":"transparent",color:s==="ARS"?"white":"var(--text-secondary)",boxShadow:s==="ARS"?"0 4px 12px var(--accent-primary-glow)":"none"},children:[o.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),o.jsxs("button",{onClick:()=>d("USD"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:s==="USD"?"var(--accent-green)":"transparent",color:s==="USD"?"white":"var(--text-secondary)",boxShadow:s==="USD"?"0 4px 12px rgba(0, 217, 154, 0.3)":"none"},children:[o.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tt,{value:n,onChange:i,presets:Fr,defaultPreset:"6 meses"}),(n.from||n.to)&&o.jsx("button",{onClick:()=>i({from:null,to:null}),className:"p-1.5 rounded-lg transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},title:"Limpiar fechas",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Total Ingresos"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:"var(--accent-green)"},children:r?"...":L(h.totalIngresos,s)})]}),o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Total Gastos"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:"var(--accent-red)"},children:r?"...":L(h.totalGastos,s)})]}),o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Balance"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:h.balance>=0?"var(--accent-green)":"var(--accent-red)"},children:r?"...":L(h.balance,s)})]}),o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Tasa de Ahorro"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:h.savingsRate>=0?"var(--accent-primary)":"var(--accent-red)"},children:r?"...":`${h.savingsRate.toFixed(1)}%`})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx(Wr,{data:u,loading:r,currency:s}),o.jsx(Br,{data:p,loading:r,currency:s})]}),o.jsx(zr,{data:x,loading:r,currency:s})]})}export{Xr as default};
