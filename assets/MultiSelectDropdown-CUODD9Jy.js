import{j as e,r as u,i as g,a as j}from"./index-Dq2VYX45.js";function k({value:o,onChange:r,showCustom:s=!0,className:c=""}){const i=[{value:"weekly",label:"Sem",labelFull:"Semanal"},{value:"monthly",label:"Mes",labelFull:"Mensual"},{value:"yearly",label:"AÃ±o",labelFull:"Anual"}];return s&&i.push({value:"custom",label:"Otro",labelFull:"Personalizado"}),e.jsx("div",{className:`flex gap-1 sm:gap-2 ${c}`,children:i.map(a=>{const n=o===a.value;return e.jsxs("button",{type:"button",onClick:()=>r(a.value),className:`
              flex-1 px-2 sm:px-4 py-1.5 sm:py-2.5 rounded-lg sm:rounded-xl text-[11px] sm:text-sm font-medium transition-all
              ${n?"ring-2 ring-offset-1":"hover:opacity-80"}
            `,style:{backgroundColor:n?"var(--accent-primary-dim)":"var(--bg-tertiary)",color:n?"var(--accent-primary)":"var(--text-secondary)","--tw-ring-color":"var(--accent-primary)","--tw-ring-offset-color":"var(--bg-primary)"},children:[e.jsx("span",{className:"sm:hidden",children:a.label}),e.jsx("span",{className:"hidden sm:inline",children:a.labelFull})]},a.value)})})}function w({items:o=[],selectedIds:r=[],onChange:s,label:c,placeholder:i="Seleccionar...",emptyMessage:a="No hay opciones"}){const[n,x]=u.useState(!1),[m,p]=u.useState(""),d=u.useRef(null),v=o.filter(t=>t.name.toLowerCase().includes(m.toLowerCase()));u.useEffect(()=>{const t=l=>{d.current&&!d.current.contains(l.target)&&(x(!1),p(""))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const h=t=>{r.includes(t)?s(r.filter(l=>l!==t)):s([...r,t])},y=()=>s(o.map(t=>t.id)),b=()=>s([]),f=()=>{if(r.length===0)return i;if(r.length===1){const t=o.find(l=>l.id===r[0]);return(t==null?void 0:t.name)||"1 seleccionado"}return`${r.length} seleccionados`};return e.jsxs("div",{ref:d,className:"relative",children:[c&&e.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--text-muted)"},children:c}),e.jsxs("button",{type:"button",onClick:()=>x(!n),className:"w-full px-3 py-2.5 rounded-lg text-left flex items-center gap-2 text-sm transition-all",style:{backgroundColor:"var(--bg-tertiary)",color:r.length>0?"var(--text-primary)":"var(--text-secondary)"},children:[e.jsx("span",{className:"flex-1 truncate",children:f()}),r.length>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:r.length}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${n?"rotate-180":""}`,style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-lg shadow-xl overflow-hidden animate-scale-in",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsx("div",{className:"p-2",style:{borderBottom:"1px solid var(--border-subtle)"},children:e.jsx("input",{type:"text",value:m,onChange:t=>p(t.target.value),placeholder:"Buscar...",className:"w-full px-2.5 py-1.5 rounded-md text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},autoFocus:!0})}),o.length>0&&e.jsxs("div",{className:"flex gap-2 px-2 py-1.5 text-xs",style:{borderBottom:"1px solid var(--border-subtle)"},children:[e.jsx("button",{type:"button",onClick:y,className:"hover:underline",style:{color:"var(--accent-primary)"},children:"Todos"}),e.jsx("button",{type:"button",onClick:b,className:"hover:underline",style:{color:"var(--text-muted)"},children:"Ninguno"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:v.length===0?e.jsx("p",{className:"px-3 py-2 text-xs text-center",style:{color:"var(--text-muted)"},children:a}):v.map(t=>{const l=r.includes(t.id);return e.jsxs("button",{type:"button",onClick:()=>h(t.id),className:"w-full px-3 py-2 text-left text-xs flex items-center gap-2 transition-colors hover:bg-black/5",style:{backgroundColor:l?"var(--accent-primary-dim)":"transparent",color:l?"var(--accent-primary)":"var(--text-primary)"},children:[e.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center flex-shrink-0 ${l?"":"border"}`,style:{backgroundColor:l?"var(--accent-primary)":"transparent",borderColor:"var(--text-muted)"},children:l&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),t.icon&&(g(t.icon)?e.jsx("span",{className:"text-sm",children:t.icon}):e.jsx("img",{src:j(t.icon),alt:"",className:"w-4 h-4 rounded-sm object-contain"})),e.jsx("span",{className:"truncate",children:t.name})]},t.id)})})]})]})}export{w as M,k as P};
