import{C as ve,r as l,D as ge,j as e,F as me,a as Z,G as ce,H as ye,I as fe,J as je,K as ke,N as Ne,g as we,n as Ce,i as ee,f as F,O as Se,P as Be,Q as Ae,R as $e}from"./index-CKWgcbuo.js";import{S as Ee}from"./SortDropdown-8-fXskt5.js";const n="/icons/catalog",L={bancos:[{id:"galicia",name:"Banco Galicia",icon:`${n}/banco-galicia.svg`,keywords:["galicia","banco"]},{id:"santander",name:"Santander",icon:`${n}/SAN.svg`,keywords:["santander","banco"]},{id:"bbva",name:"BBVA",icon:`${n}/banco-bbva.svg`,keywords:["bbva","frances","banco"]},{id:"macro",name:"Banco Macro",icon:`${n}/BMA.svg`,keywords:["macro","banco"]},{id:"hsbc",name:"HSBC",icon:`${n}/HSBC.svg`,keywords:["hsbc","banco"]},{id:"nacion",name:"Banco NaciÃ³n",icon:`${n}/banco-nacion.svg`,keywords:["nacion","bna","banco"]},{id:"provincia",name:"Banco Provincia",icon:`${n}/banco-provincia.svg`,keywords:["provincia","bapro","banco"]},{id:"ciudad",name:"Banco Ciudad",icon:`${n}/banco-ciudad.svg`,keywords:["ciudad","banco"]},{id:"supervielle",name:"Supervielle",icon:`${n}/banco-supervielle.svg`,keywords:["supervielle","banco"]},{id:"patagonia",name:"Banco Patagonia",icon:`${n}/BPAT.svg`,keywords:["patagonia","banco"]},{id:"comafi",name:"Banco Comafi",icon:`${n}/banco-comafi.svg`,keywords:["comafi","banco"]},{id:"icbc",name:"ICBC",icon:`${n}/banco-icbc.svg`,keywords:["icbc","banco"]},{id:"credicoop",name:"Banco Credicoop",icon:`${n}/banco-credicoop.svg`,keywords:["credicoop","banco"]},{id:"hipotecario",name:"Banco Hipotecario",icon:`${n}/BHIP.svg`,keywords:["hipotecario","banco"]},{id:"itau",name:"ItaÃº",icon:`${n}/banco-itau.svg`,keywords:["itau","banco"]},{id:"bind",name:"BIND",icon:`${n}/bind.svg`,keywords:["bind","banco","industrial"]},{id:"piano",name:"Banco Piano",icon:`${n}/banco-piano.svg`,keywords:["piano","banco"]},{id:"columbia",name:"Banco Columbia",icon:`${n}/banco-columbia.svg`,keywords:["columbia","banco"]},{id:"bica",name:"BICA",icon:`${n}/banco-bica.svg`,keywords:["bica","banco"]},{id:"coinag",name:"Banco Coinag",icon:`${n}/banco-coinag.svg`,keywords:["coinag","banco"]},{id:"del_sol",name:"Banco del Sol",icon:`${n}/banco-del-sol.svg`,keywords:["sol","banco"]},{id:"san_juan",name:"Banco San Juan",icon:`${n}/banco-san-juan.svg`,keywords:["san juan","banco"]},{id:"santa_cruz",name:"Banco Santa Cruz",icon:`${n}/banco-santa-cruz.svg`,keywords:["santa cruz","banco"]},{id:"corrientes",name:"Banco Corrientes",icon:`${n}/banco-corrientes.svg`,keywords:["corrientes","banco"]},{id:"entre_rios",name:"Banco Entre RÃ­os",icon:`${n}/banco-entre-rios.svg`,keywords:["entre rios","banco"]}],fintechs:[{id:"mercadopago",name:"Mercado Pago",icon:`${n}/mercadopago.svg`,keywords:["mercado pago","mp","mercadolibre"]},{id:"uala",name:"UalÃ¡",icon:`${n}/uala.svg`,keywords:["uala","fintech"]},{id:"naranja_x",name:"Naranja X",icon:`${n}/naranja-x.svg`,keywords:["naranja","naranja x","fintech"]},{id:"personal_pay",name:"Personal Pay",icon:`${n}/personal-pay.svg`,keywords:["personal","personal pay","fintech"]},{id:"brubank",name:"Brubank",icon:`${n}/brubank.svg`,keywords:["brubank","fintech"]},{id:"lemon",name:"Lemon",icon:`${n}/lemon.svg`,keywords:["lemon","fintech"]},{id:"belo",name:"Belo",icon:`${n}/belo.svg`,keywords:["belo","fintech"]},{id:"prex",name:"Prex",icon:`${n}/prex.svg`,keywords:["prex","fintech"]},{id:"cuenta_dni",name:"Cuenta DNI",icon:`${n}/cuenta-dni.svg`,keywords:["cuenta dni","dni","fintech"]},{id:"modo",name:"MODO",icon:`${n}/modo.svg`,keywords:["modo","fintech"]},{id:"openbank",name:"Openbank",icon:`${n}/openbank.svg`,keywords:["openbank","fintech"]},{id:"claro_pay",name:"Claro Pay",icon:`${n}/claro-pay.svg`,keywords:["claro","claro pay","fintech"]}],crypto:[{id:"ripio",name:"Ripio",icon:`${n}/ripio.svg`,keywords:["ripio","crypto"]},{id:"buenbit",name:"Buenbit",icon:`${n}/buenbit.svg`,keywords:["buenbit","crypto"]},{id:"fiwind",name:"Fiwind",icon:`${n}/fiwind.svg`,keywords:["fiwind","crypto"]},{id:"cocos",name:"Cocos",icon:`${n}/cocos.svg`,keywords:["cocos","crypto","capital"]},{id:"satoshitango",name:"Satoshi Tango",icon:`${n}/satoshi-tango.svg`,keywords:["satoshitango","satoshi","crypto"]},{id:"takenos",name:"Takenos",icon:`${n}/takenos.svg`,keywords:["takenos","crypto"]},{id:"wallbit",name:"Wallbit",icon:`${n}/wallbit-new.svg`,keywords:["wallbit","crypto"]},{id:"ieb",name:"IEB",icon:`${n}/ieb.svg`,keywords:["ieb","invertir","broker"]},{id:"balanz",name:"Balanz",icon:`${n}/balanz.svg`,keywords:["balanz","broker","inversiones"]}],metodosPago:[{id:"visa",name:"Visa",icon:`${n}/V.svg`,keywords:["visa","tarjeta","credito","debito"]},{id:"mastercard",name:"Mastercard",icon:`${n}/MA.svg`,keywords:["mastercard","master","tarjeta","credito","debito"]},{id:"amex",name:"American Express",icon:`${n}/AXP.svg`,keywords:["amex","american express","tarjeta","credito"]},{id:"cabal",name:"Cabal",icon:`${n}/cabal.svg`,keywords:["cabal","tarjeta","credito","debito","argentina"]},{id:"paypal",name:"PayPal",icon:`${n}/PYPL.svg`,keywords:["paypal","pago","online"]}],monedas:[{id:"ars",name:"Peso Argentino",icon:`${n}/ARS.svg`,keywords:["peso","ars","argentina","moneda"]},{id:"usd",name:"DÃ³lar",icon:`${n}/USD.svg`,keywords:["dolar","usd","dollar","moneda"]}]},de=()=>[...L.bancos,...L.fintechs,...L.crypto,...L.metodosPago,...L.monedas],Le=a=>{if(!a)return de();const i=a.toLowerCase().trim();return de().filter(j=>j.name.toLowerCase().includes(i)||j.keywords.some(k=>k.includes(i)))},xe=[{id:"bancos",name:"Bancos",icons:L.bancos},{id:"fintechs",name:"Fintechs",icons:L.fintechs},{id:"crypto",name:"Crypto/Brokers",icons:L.crypto},{id:"metodosPago",name:"Tarjetas",icons:L.metodosPago},{id:"monedas",name:"Monedas",icons:L.monedas}],ue=({size:a=20})=>e.jsx("svg",{width:a,height:a,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Pe=({size:a=18})=>e.jsx("svg",{width:a,height:a,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Ie=({size:a=32})=>e.jsx("svg",{width:a,height:a,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),pe=({size:a=24,className:i=""})=>e.jsx("svg",{width:a,height:a,className:i,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}),De=({size:a=12})=>e.jsx("svg",{width:a,height:a,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});function Me({isOpen:a,onClose:i,onSelect:j,currentValue:k,showPredefined:C=!0,title:B="Seleccionar Ã­cono"}){const{user:t}=ve(),[x,A]=l.useState(C?"predefined":"emoji"),[h,p]=l.useState(""),[m,$]=l.useState("all"),[N,T]=l.useState(!1),[d,S]=l.useState([]),[v,P]=l.useState(!1),[f,E]=l.useState(null),[I,z]=l.useState({isOpen:!1,iconPath:null}),[G,D]=l.useState(!1),R=l.useRef(null),_=l.useRef(null);l.useEffect(()=>{a&&t&&M()},[a,t]),l.useEffect(()=>{a||(p(""),$("all"),E(null))},[a]),l.useEffect(()=>{const s=u=>{I.isOpen||_.current&&!_.current.contains(u.target)&&i()};if(a)return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[a,i,I.isOpen]),l.useEffect(()=>{const s=u=>{I.isOpen||u.key==="Escape"&&i()};if(a)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[a,i,I.isOpen]);const M=async()=>{if(t){P(!0);try{const s=await ge(t.id);S(s)}catch(s){console.error("Error loading uploaded icons:",s)}finally{P(!1)}}},K=async s=>{var H;const u=(H=s.target.files)==null?void 0:H[0];if(!(!u||!t)){T(!0),E(null);try{const{url:O}=await ye(u,t.id);await M(),j(O),i()}catch(O){E(O.message)}finally{T(!1),R.current&&(R.current.value="")}}},V=(s,u)=>{u.stopPropagation(),z({isOpen:!0,iconPath:s})},U=async()=>{const s=I.iconPath;if(s){D(!0);try{await fe(s),S(u=>u.filter(H=>H.path!==s)),k&&je(k)===s&&j(null),z({isOpen:!1,iconPath:null})}catch(u){E(u.message)}finally{D(!1)}}},re=s=>{j(s.icon),i()},W=s=>{j(s.emoji),i()},ae=s=>{j(s.url),i()},X=()=>{if(h)return Le(h);if(m==="all")return de();const s=xe.find(u=>u.id===m);return s?s.icons:[]},Q=()=>{if(h)return ke(h);if(m==="all")return Ne();const s=me.find(u=>u.id===m);return s?s.emojis:[]};if(!a)return null;const q=[...C?[{id:"predefined",label:"Ãconos"}]:[],{id:"emoji",label:"Emojis"},{id:"upload",label:"Subir"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:[e.jsxs("div",{ref:_,className:"w-full max-w-md rounded-2xl overflow-hidden shadow-2xl",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",style:{borderBottom:"1px solid var(--border-color)"},children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:B}),e.jsx("button",{onClick:i,className:"p-2 rounded-lg transition-colors hover:bg-white/10",style:{color:"var(--text-secondary)"},children:e.jsx(ue,{size:20})})]}),e.jsx("div",{className:"flex px-5 pt-3 gap-2",children:q.map(s=>e.jsx("button",{onClick:()=>{A(s.id),p(""),$("all")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${x===s.id?"bg-teal-500/20 text-teal-400":"hover:bg-white/5"}`,style:{color:x===s.id?void 0:"var(--text-secondary)"},children:s.label},s.id))}),(x==="predefined"||x==="emoji")&&e.jsx("div",{className:"px-5 pt-4",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-color)"},children:[e.jsx(Pe,{size:18,style:{color:"var(--text-muted)"}}),e.jsx("input",{type:"text",value:h,onChange:s=>p(s.target.value),placeholder:x==="predefined"?"Buscar banco, fintech...":"Buscar emoji...",className:"flex-1 bg-transparent outline-none text-sm",style:{color:"var(--text-primary)"}}),h&&e.jsx("button",{onClick:()=>p(""),className:"p-1 rounded hover:bg-white/10",children:e.jsx(ue,{size:14,style:{color:"var(--text-muted)"}})})]})}),(x==="predefined"||x==="emoji")&&!h&&e.jsx("div",{className:"px-5 pt-3",children:e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[e.jsx("button",{onClick:()=>$("all"),className:`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${m==="all"?"bg-teal-500/20 text-teal-400":"hover:bg-white/5"}`,style:{color:m==="all"?void 0:"var(--text-secondary)"},children:"Todos"}),(x==="predefined"?xe:me).map(s=>e.jsx("button",{onClick:()=>$(s.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${m===s.id?"bg-teal-500/20 text-teal-400":"hover:bg-white/5"}`,style:{color:m===s.id?void 0:"var(--text-secondary)"},children:s.name},s.id))]})}),f&&e.jsx("div",{className:"mx-5 mt-3 px-4 py-3 rounded-lg bg-red-500/10 border border-red-500/20",children:e.jsx("p",{className:"text-sm text-red-400",children:f})}),e.jsxs("div",{className:"p-5 max-h-[50vh] overflow-y-auto",children:[x==="predefined"&&e.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[X().map(s=>e.jsxs("button",{onClick:()=>re(s),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all hover:bg-white/10 ${k===s.icon?"ring-2 ring-teal-500 bg-teal-500/10":""}`,title:s.name,children:[e.jsx("img",{src:Z(s.icon),alt:s.name,className:"w-10 h-10 rounded-lg"}),e.jsx("span",{className:"text-[10px] text-center truncate w-full leading-tight",style:{color:"var(--text-muted)"},children:s.name})]},s.id)),X().length===0&&e.jsx("div",{className:"col-span-5 py-8 text-center",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"No se encontraron Ã­conos"})})]}),x==="emoji"&&e.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[Q().map((s,u)=>e.jsx("button",{onClick:()=>W(s),className:`flex items-center justify-center p-3 rounded-xl text-2xl transition-all hover:bg-white/10 ${k===s.emoji?"ring-2 ring-teal-500 bg-teal-500/10":""}`,title:s.keywords.join(", "),children:s.emoji},`${s.emoji}-${u}`)),Q().length===0&&e.jsx("div",{className:"col-span-6 py-8 text-center",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"No se encontraron emojis"})})]}),x==="upload"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{onClick:()=>{var s;return!N&&((s=R.current)==null?void 0:s.click())},className:`flex flex-col items-center justify-center gap-3 p-8 rounded-xl border-2 border-dashed transition-all cursor-pointer ${N?"opacity-50 cursor-wait":"hover:bg-white/5 hover:border-teal-500/50"}`,style:{borderColor:"var(--border-color)"},children:[N?e.jsx(pe,{size:32,className:"animate-spin text-teal-500"}):e.jsx(Ie,{size:32,style:{color:"var(--text-muted)"}}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:N?"Subiendo...":"Click para subir imagen"}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"PNG, JPG, GIF, WebP o SVG (mÃ¡x. 2MB)"})]}),e.jsx("input",{ref:R,type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp,image/svg+xml",onChange:K,className:"hidden"})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium mb-3",style:{color:"var(--text-muted)"},children:"Ãconos subidos anteriormente"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:d.map(s=>e.jsxs("div",{className:`relative group rounded-xl overflow-hidden transition-all ${k===s.url?"ring-2 ring-teal-500":""}`,children:[e.jsx("button",{onClick:()=>ae(s),className:"w-full aspect-square p-2 hover:bg-white/10",children:e.jsx("img",{src:s.url,alt:"Uploaded icon",className:"w-full h-full object-cover rounded-lg"})}),e.jsx("button",{onClick:u=>V(s.path,u),className:"absolute top-1 right-1 p-1 rounded bg-red-500/80 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(De,{size:12,className:"text-white"})})]},s.path))})]}),v&&e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(pe,{size:24,className:"animate-spin text-teal-500"})}),!v&&d.length===0&&e.jsx("p",{className:"text-center text-sm py-4",style:{color:"var(--text-muted)"},children:"No tenÃ©s Ã­conos subidos"})]})]}),k&&e.jsx("div",{className:"px-5 py-3",style:{borderTop:"1px solid var(--border-color)"},children:e.jsx("button",{onClick:()=>{j(null),i()},className:"w-full py-2.5 rounded-xl text-sm font-medium text-red-400 hover:bg-red-500/10 transition-colors",children:"Quitar Ã­cono"})})]}),e.jsx(ce,{isOpen:I.isOpen,onClose:()=>z({isOpen:!1,iconPath:null}),onConfirm:U,title:"Eliminar Ã­cono",message:"Â¿EstÃ¡s seguro de que querÃ©s eliminar este Ã­cono? Esta acciÃ³n no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar",variant:"danger",loading:G})]})}function Oe(){const{showError:a}=we(),[i,j]=l.useState([]),[k,C]=l.useState(!0),[B,t]=l.useState(null),[x,A]=l.useState(!1),[h,p]=l.useState(!1),[m,$]=l.useState({}),[N,T]=l.useState("original"),[d,S]=l.useState(null),[v,P]=l.useState(!1),[f,E]=l.useState(new Set),[I,z]=l.useState(!1),G="cashe-sort-accounts",[D,R]=l.useState({sortBy:"balance",sortOrder:"desc"}),_=[{id:"balance",label:"Saldo",defaultOrder:"desc"},{id:"name",label:"Nombre",defaultOrder:"asc"},{id:"type",label:"Tipo",defaultOrder:"asc"},{id:"currency",label:"Moneda",defaultOrder:"asc"}];l.useEffect(()=>{const r=localStorage.getItem(G);if(r)try{const o=JSON.parse(r);o.sortBy&&o.sortOrder&&R(o)}catch(o){console.error("Error parsing sort preference:",o)}},[]),l.useEffect(()=>{localStorage.setItem(G,JSON.stringify(D))},[D]),l.useEffect(()=>{M()},[]);const M=async()=>{try{C(!0);const r=await Ce();j(r.accounts||[])}catch(r){console.error("Error fetching accounts:",r)}finally{C(!1)}},K=l.useMemo(()=>i.reduce((r,o)=>{const c=o.balanceActual||0,b=o.tipoCambio||1e3;return N==="original"||N==="ARS"?o.moneda==="Peso"?r+c:r+c*b:o.moneda==="Peso"?r+c/b:r+c},0),[i,N]),V=l.useMemo(()=>{const r=[...i],{sortBy:o,sortOrder:c}=D,b=c==="asc"?1:-1;return r.sort((g,y)=>{let w=0;switch(o){case"balance":const J=g.balanceActual||0,Y=y.balanceActual||0,ne=g.tipoCambio||1e3,te=y.tipoCambio||1e3,le=g.moneda==="Peso"?J:J*ne,ie=y.moneda==="Peso"?Y:Y*te;w=le-ie;break;case"name":w=(g.nombre||"").localeCompare(y.nombre||"");break;case"type":w=(g.tipo||"").localeCompare(y.tipo||"");break;case"currency":w=(g.moneda||"").localeCompare(y.moneda||"");break;default:w=0}return w*b}),r},[i,D]),U=r=>{const o=r.balanceActual||0,c=r.tipoCambio||1e3,b=r.moneda==="Peso";return N==="original"?{value:o,currency:b?"ARS":"USD"}:N==="ARS"?{value:b?o:o*c,currency:"ARS"}:{value:b?o/c:o,currency:"USD"}},re=async r=>{try{p(!0),await Be(r),A(!1),M()}catch(o){console.error("Error adding account:",o),a("No se pudo crear la cuenta",o.message)}finally{p(!1)}},W=async r=>{try{p(!0),await Se(r),t(null),M()}catch(o){console.error("Error updating account:",o),a("No se pudo guardar la cuenta",o.message)}finally{p(!1)}},ae=async r=>{S(r)},X=async()=>{if(d)try{p(!0),await Ae(d.id),S(null),t(null),M()}catch(r){console.error("Error deleting account:",r),a("No se pudo eliminar la cuenta",r.message)}finally{p(!1)}},Q=()=>{P(!v),E(new Set)},q=r=>{E(o=>{const c=new Set(o);return c.has(r)?c.delete(r):c.add(r),c})},s=()=>{f.size===i.length?E(new Set):E(new Set(i.map(r=>r.id)))},u=async()=>{i.filter(o=>f.has(o.id)).length!==0&&z(!0)},H=async()=>{try{p(!0);const r=i.filter(o=>f.has(o.id));await $e(r),z(!1),E(new Set),P(!1),M()}catch(r){console.error("Error bulk deleting accounts:",r),a("No se pudieron eliminar las cuentas",r.message)}finally{p(!1)}},O=r=>{$(o=>!!o[r]?{}:{[r]:!0})},se=r=>{if(K===0)return 0;const{value:o}=U(r);return Math.min(100,Math.max(0,o/K*100))},be=()=>e.jsx("div",{className:"space-y-3",children:[1,2,3].map(r=>e.jsx("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl skeleton"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-32 skeleton"}),e.jsx("div",{className:"h-3 w-24 skeleton"})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"h-5 w-28 skeleton ml-auto"}),e.jsx("div",{className:"h-3 w-20 skeleton ml-auto"})]})]})},r))});if(k)return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-6 w-24 skeleton"}),e.jsx("div",{className:"h-10 w-24 skeleton"})]}),be()]});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsx("h2",{className:"text-base font-medium",style:{color:"var(--text-primary)"},children:"Cuentas"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"inline-flex p-1 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[{id:"original",label:"Original",icon:null},{id:"ARS",label:"ARS",icon:"/icons/catalog/ARS.svg"},{id:"USD",label:"USD",icon:"/icons/catalog/USD.svg"}].map(r=>e.jsxs("button",{onClick:()=>T(r.id),className:"px-3 py-1.5 rounded-md text-xs font-medium transition-colors duration-150 flex items-center gap-1.5",style:{backgroundColor:N===r.id?"var(--bg-elevated)":"transparent",color:N===r.id?"var(--text-primary)":"var(--text-muted)"},children:[r.icon&&e.jsx("img",{src:Z(r.icon),alt:r.label,className:"w-4 h-4 rounded-sm"}),r.label]},r.id))}),i.length>0&&e.jsx(Ee,{options:_,value:D,onChange:R,storageKey:G}),i.length>0&&e.jsx("button",{onClick:Q,className:"p-2 rounded-lg transition-colors duration-150",style:{backgroundColor:v?"var(--accent-primary-dim)":"var(--bg-tertiary)",color:v?"var(--accent-primary)":"var(--text-muted)"},title:v?"Cancelar selecciÃ³n":"Seleccionar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h7M4 12h7m-7 7h7m5-14v14m0-14l3 3m-3-3l-3 3m3 11l3-3m-3 3l-3-3"})})}),e.jsxs("button",{onClick:()=>A(!0),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center gap-1.5",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-medium)"},children:[e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nueva"]})]})]}),v&&f.size>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl animate-scale-in",style:{backgroundColor:"var(--accent-primary-dim)",border:"1px solid var(--accent-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:s,className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-all",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:f.size===i.length?"Deseleccionar todo":"Seleccionar todo"}),e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--accent-primary)"},children:[f.size," ",f.size===1?"cuenta seleccionada":"cuentas seleccionadas"]})]}),e.jsxs("button",{onClick:u,className:"px-4 py-2 rounded-xl text-sm font-medium transition-all hover:opacity-80 flex items-center gap-2",style:{backgroundColor:"var(--accent-red)",color:"white"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})]}),i.length===0?e.jsxs("div",{className:"rounded-2xl p-8 text-center",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"var(--accent-primary-dim)"},children:e.jsx("svg",{className:"w-10 h-10",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Sin cuentas"}),e.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-secondary)"},children:"Agrega tu primera cuenta para comenzar"}),e.jsx("button",{onClick:()=>A(!0),className:"px-6 py-3 rounded-xl font-medium text-white transition-all duration-200 hover:opacity-90",style:{backgroundColor:"var(--accent-primary)"},children:"Agregar cuenta"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 lg:hidden",children:V.map(r=>{const o=r.id??r.rowIndex??r.nombre,c=se(r),b=m[o],g=U(r),y=f.has(r.id);return e.jsx(oe,{account:r,expansionKey:o,percentage:c,isExpanded:b,displayBalance:g,isSelected:y,selectionMode:v,toggleAccountSelection:q,toggleDetails:O,setEditingAccount:t,handleSave:W,saving:h},r.id||r.rowIndex||r.nombre)})}),e.jsx("div",{className:"hidden lg:flex xl:hidden gap-4",children:[0,1].map(r=>e.jsx("div",{className:"flex-1 space-y-4",children:V.filter((o,c)=>c%2===r).map(o=>{const c=o.id??o.rowIndex??o.nombre,b=se(o),g=m[c],y=U(o),w=f.has(o.id);return e.jsx(oe,{account:o,expansionKey:c,percentage:b,isExpanded:g,displayBalance:y,isSelected:w,selectionMode:v,toggleAccountSelection:q,toggleDetails:O,setEditingAccount:t,handleSave:W,saving:h},o.id||o.rowIndex||o.nombre)})},r))}),e.jsx("div",{className:"hidden xl:flex gap-4",children:[0,1,2].map(r=>e.jsx("div",{className:"flex-1 space-y-4",children:V.filter((o,c)=>c%3===r).map(o=>{const c=o.id??o.rowIndex??o.nombre,b=se(o),g=m[c],y=U(o),w=f.has(o.id);return e.jsx(oe,{account:o,expansionKey:c,percentage:b,isExpanded:g,displayBalance:y,isSelected:w,selectionMode:v,toggleAccountSelection:q,toggleDetails:O,setEditingAccount:t,handleSave:W,saving:h},o.id||o.rowIndex||o.nombre)})},r))})]}),x&&e.jsx(he,{onSave:re,onClose:()=>A(!1),loading:h}),B&&e.jsx(he,{account:B,onSave:W,onDelete:()=>ae(B),onClose:()=>t(null),loading:h}),e.jsx(ce,{isOpen:!!d,onClose:()=>S(null),onConfirm:X,title:"Eliminar cuenta",message:e.jsxs(e.Fragment,{children:["Â¿EstÃ¡s seguro de que quieres eliminar la cuenta"," ",e.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:d==null?void 0:d.nombre}),"?",e.jsx("br",{}),e.jsx("span",{className:"text-xs mt-1 block",children:"Los movimientos asociados no se eliminarÃ¡n."})]}),confirmText:"Eliminar",loading:h,icon:e.jsx("svg",{className:"w-7 h-7",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsx(ce,{isOpen:I,onClose:()=>z(!1),onConfirm:H,title:"Eliminar cuentas",message:e.jsxs(e.Fragment,{children:["Â¿EstÃ¡s seguro de que quieres eliminar"," ",e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-red)"},children:[f.size," ",f.size===1?"cuenta":"cuentas"]}),"?",e.jsx("br",{}),e.jsx("span",{className:"text-xs mt-1 block",children:"Esta acciÃ³n no se puede deshacer. Los movimientos asociados no se eliminarÃ¡n."})]}),confirmText:`Eliminar ${f.size}`,loading:h,icon:e.jsx("svg",{className:"w-7 h-7",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]});function oe({account:r,expansionKey:o,percentage:c,isExpanded:b,displayBalance:g,isSelected:y,selectionMode:w,toggleAccountSelection:J,toggleDetails:Y,setEditingAccount:ne,handleSave:te,saving:le}){return e.jsxs("div",{className:`rounded-2xl overflow-hidden transition-all duration-200 ${y?"ring-2":""}`,style:{backgroundColor:"var(--bg-secondary)",ringColor:"var(--accent-primary)"},children:[e.jsxs("div",{className:"flex items-center",children:[w&&e.jsx("button",{onClick:()=>J(r.id),className:"pl-4 pr-2 py-4 flex items-center",children:e.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center transition-all duration-200 ${y?"":"border-2"}`,style:{backgroundColor:y?"var(--accent-primary)":"transparent",borderColor:"var(--text-secondary)"},children:y&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("button",{onClick:()=>w?J(r.id):Y(o),className:`flex-1 p-4 ${w?"pl-0":""} flex items-center gap-3 text-left transition-colors hover:bg-[var(--bg-tertiary)]`,children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center overflow-hidden flex-shrink-0",style:{backgroundColor:r.icon?ee(r.icon)?"var(--bg-tertiary)":"transparent":r.moneda==="Peso"?"rgba(117, 170, 219, 0.15)":"rgba(60, 179, 113, 0.15)"},children:r.icon?ee(r.icon)?e.jsx("span",{className:"text-2xl",children:r.icon}):e.jsx("img",{src:Z(r.icon),alt:r.nombre,className:"w-full h-full object-cover rounded-xl"}):e.jsx("span",{className:"text-lg font-bold",style:{color:r.moneda==="Peso"?"#75AADB":"#3CB371"},children:r.moneda==="Peso"?"$":"US$"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm leading-tight",style:{color:"var(--text-primary)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word"},title:r.nombre,children:r.nombre}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[r.moneda==="Peso"?"ARS":"USD"," ",r.tipo&&`Â· ${r.tipo}`]}),e.jsx("div",{className:"mt-2 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${c}%`,backgroundColor:"var(--accent-primary)"}})})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-lg font-bold",style:{color:"var(--accent-primary)"},children:F(g.value,g.currency)}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[c.toFixed(1),"% del total"]})]}),e.jsx("svg",{className:`w-5 h-5 ml-1 flex-shrink-0 transition-transform duration-300 ${b?"rotate-180":""}`,style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),b&&!w&&e.jsxs("div",{className:"px-4 pb-4 pt-2 animate-scale-in",style:{borderTop:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-4",children:[e.jsxs("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Balance Inicial"}),e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:F(r.balanceInicial,r.moneda==="Peso"?"ARS":"USD")})]}),e.jsxs("div",{className:"p-3 rounded-xl",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Numero de Cuenta"}),e.jsx("p",{className:"font-medium truncate",style:{color:"var(--text-primary)"},children:r.numeroCuenta||"-"})]}),e.jsxs("div",{className:"p-3 rounded-xl",style:{backgroundColor:"rgba(34, 197, 94, 0.1)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Total Ingresos"}),e.jsxs("p",{className:"font-medium",style:{color:"var(--accent-green)"},children:["+",F(r.totalIngresos,r.moneda==="Peso"?"ARS":"USD")]})]}),e.jsxs("div",{className:"p-3 rounded-xl",style:{backgroundColor:"rgba(239, 68, 68, 0.1)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Total Gastos"}),e.jsxs("p",{className:"font-medium",style:{color:"var(--accent-red)"},children:["-",F(r.totalGastos,r.moneda==="Peso"?"ARS":"USD")]})]}),e.jsxs("div",{className:"p-3 rounded-xl",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Transf. Entrantes"}),e.jsxs("p",{className:"font-medium",style:{color:"var(--accent-blue)"},children:["+",F(r.totalTransfEntrantes,r.moneda==="Peso"?"ARS":"USD")]})]}),e.jsxs("div",{className:"p-3 rounded-xl",style:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Transf. Salientes"}),e.jsxs("p",{className:"font-medium",style:{color:"var(--accent-blue)"},children:["-",F(r.totalTransfSalientes,r.moneda==="Peso"?"ARS":"USD")]})]})]}),r.esTarjetaCredito&&e.jsx(Te,{account:r,onSave:te,loading:le}),e.jsxs("button",{onClick:ie=>{ie.stopPropagation(),ne(r)},className:"w-full py-3 rounded-xl text-sm font-medium transition-all duration-200 hover:opacity-80 flex items-center justify-center gap-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Editar cuenta"]})]})]})}}function he({account:a,onSave:i,onDelete:j,onClose:k,loading:C}){var N,T;const B=!!a,[t,x]=l.useState({id:a==null?void 0:a.id,rowIndex:a==null?void 0:a.rowIndex,nombre:(a==null?void 0:a.nombre)||"",balanceInicial:((N=a==null?void 0:a.balanceInicial)==null?void 0:N.toString())||"0",moneda:(a==null?void 0:a.moneda)||"Peso",numeroCuenta:(a==null?void 0:a.numeroCuenta)||"",tipo:(a==null?void 0:a.tipo)||"",esTarjetaCredito:(a==null?void 0:a.esTarjetaCredito)||!1,diaCierre:((T=a==null?void 0:a.diaCierre)==null?void 0:T.toString())||"1",icon:(a==null?void 0:a.icon)||null}),[A,h]=l.useState(!1),p=d=>{const{name:S,value:v}=d.target;x(P=>({...P,[S]:v}))},m=d=>{d.preventDefault(),i({...t,balanceInicial:parseFloat(t.balanceInicial)||0,diaCierre:t.esTarjetaCredito?parseInt(t.diaCierre)||1:null,icon:t.icon})},$=d=>{x(S=>({...S,icon:d}))};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:k}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl p-6 max-h-[90vh] overflow-y-auto animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:B?"Editar Cuenta":"Nueva Cuenta"}),e.jsx("button",{onClick:k,className:"p-2 rounded-xl transition-colors hover:bg-[var(--bg-tertiary)]",style:{color:"var(--text-secondary)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Ãcono"}),e.jsxs("button",{type:"button",onClick:()=>h(!0),className:"w-full px-4 py-4 rounded-xl transition-all duration-200 border-2 border-dashed hover:border-solid flex items-center gap-4",style:{backgroundColor:"var(--bg-tertiary)",borderColor:t.icon?"var(--accent-primary)":"var(--border-medium)"},children:[e.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center overflow-hidden flex-shrink-0",style:{backgroundColor:t.icon?ee(t.icon)?"var(--bg-secondary)":"transparent":"var(--bg-secondary)"},children:t.icon?ee(t.icon)?e.jsx("span",{className:"text-3xl",children:t.icon}):e.jsx("img",{src:Z(t.icon),alt:"Ãcono",className:"w-full h-full object-cover rounded-xl"}):e.jsx("svg",{className:"w-7 h-7",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:t.icon?"Cambiar Ã­cono":"Seleccionar Ã­cono"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Bancos, fintechs, emojis o imagen"})]}),e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Nombre"}),e.jsx("input",{type:"text",name:"nombre",value:t.nombre,onChange:p,className:"w-full px-4 py-3 rounded-xl transition-all duration-200 border-2 border-transparent focus:border-[var(--accent-primary)]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Balance Inicial"}),e.jsx("input",{type:"number",name:"balanceInicial",value:t.balanceInicial,onChange:p,step:"0.01",className:"w-full px-4 py-3 rounded-xl transition-all duration-200 border-2 border-transparent focus:border-[var(--accent-primary)]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:["Moneda",t.esTarjetaCredito&&e.jsx("span",{className:"ml-2 text-xs font-normal",style:{color:"var(--accent-purple)"},children:"(Solo ARS para tarjetas)"})]}),e.jsxs("div",{className:`grid gap-3 ${t.esTarjetaCredito?"grid-cols-1":"grid-cols-2"}`,children:[e.jsxs("button",{type:"button",onClick:()=>x(d=>({...d,moneda:"Peso"})),className:"flex items-center justify-center gap-3 py-3 rounded-xl font-medium transition-all duration-200",style:{backgroundColor:t.moneda==="Peso"?"rgba(117, 170, 219, 0.2)":"var(--bg-tertiary)",color:t.moneda==="Peso"?"#75AADB":"var(--text-secondary)",border:t.moneda==="Peso"?"2px solid #75AADB":"2px solid transparent"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-7 h-7 rounded"}),e.jsx("span",{className:"font-semibold",children:"ARS"})]}),!t.esTarjetaCredito&&e.jsxs("button",{type:"button",onClick:()=>x(d=>({...d,moneda:"DÃ³lar"})),className:"flex items-center justify-center gap-3 py-3 rounded-xl font-medium transition-all duration-200",style:{backgroundColor:t.moneda==="DÃ³lar"?"rgba(60, 179, 113, 0.2)":"var(--bg-tertiary)",color:t.moneda==="DÃ³lar"?"#3CB371":"var(--text-secondary)",border:t.moneda==="DÃ³lar"?"2px solid #3CB371":"2px solid transparent"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-7 h-7 rounded"}),e.jsx("span",{className:"font-semibold",children:"USD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Numero de Cuenta (opcional)"}),e.jsx("input",{type:"text",name:"numeroCuenta",value:t.numeroCuenta,onChange:p,className:"w-full px-4 py-3 rounded-xl transition-all duration-200 border-2 border-transparent focus:border-[var(--accent-primary)]",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Tipo de cuenta"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"Caja de ahorro",icon:"ðŸ¦",label:"Caja de ahorro"},{value:"Cuenta corriente",icon:"ðŸ’¼",label:"Cuenta corriente"},{value:"Tarjeta de crÃ©dito",icon:"ðŸ’³",label:"Tarjeta de crÃ©dito"},{value:"Billetera virtual",icon:"ðŸ“±",label:"Billetera virtual"},{value:"Efectivo",icon:"ðŸ’µ",label:"Efectivo"},{value:"Inversiones",icon:"ðŸ“ˆ",label:"Inversiones"}].map(d=>{const S=t.tipo===d.value,v=d.value==="Tarjeta de crÃ©dito";return e.jsxs("button",{type:"button",onClick:()=>x(P=>({...P,tipo:d.value,esTarjetaCredito:v,...v?{moneda:"Peso"}:{}})),className:"flex items-center gap-2 p-3 rounded-xl font-medium transition-all duration-200 text-left",style:{backgroundColor:S?v?"var(--accent-purple)":"var(--accent-primary)":"var(--bg-tertiary)",color:S?"white":"var(--text-secondary)",border:S?"none":"1px solid var(--border-subtle)"},children:[e.jsx("span",{className:"text-lg",children:d.icon}),e.jsx("span",{className:"text-sm",children:d.label})]},d.value)})})]}),t.esTarjetaCredito&&e.jsxs("div",{className:"p-4 rounded-xl",style:{backgroundColor:"var(--accent-purple-dim)",border:"1px solid var(--accent-purple)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--accent-purple)"},children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"DÃ­a de cierre"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Para calcular resÃºmenes"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",name:"diaCierre",value:t.diaCierre,onChange:p,min:"1",max:"31",className:"flex-1 px-4 py-3 rounded-xl transition-all duration-200 border-2 border-transparent focus:border-[var(--accent-purple)] text-center text-lg font-semibold",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"de cada mes"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[B&&j&&e.jsx("button",{type:"button",onClick:j,disabled:C,className:"px-4 py-3 rounded-xl font-medium disabled:opacity-50 transition-all duration-200 hover:opacity-80",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:"Eliminar"}),e.jsx("button",{type:"submit",disabled:C||!t.nombre,className:"flex-1 py-3 rounded-xl font-semibold text-white disabled:opacity-50 transition-all duration-200 hover:opacity-90 flex items-center justify-center gap-2",style:{backgroundColor:"var(--accent-primary)"},children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Guardando..."]}):B?"Guardar":"Crear"})]})]}),e.jsx(Me,{isOpen:A,onClose:()=>h(!1),onSelect:$,currentValue:t.icon,showPredefined:!0,title:"Ãcono de cuenta"})]})]})}function Te({account:a,onSave:i,loading:j}){var p;const[k,C]=l.useState(!1),[B,t]=l.useState(((p=a.diaCierre)==null?void 0:p.toString())||"1"),[x,A]=l.useState(!1),h=async()=>{const m=parseInt(B)||1;if(m===a.diaCierre){C(!1);return}A(!0);try{await i({id:a.id,rowIndex:a.rowIndex,nombre:a.nombre,balanceInicial:a.balanceInicial,moneda:a.moneda,numeroCuenta:a.numeroCuenta,tipo:a.tipo,esTarjetaCredito:a.esTarjetaCredito,diaCierre:m}),C(!1)}catch($){console.error("Error updating closing day:",$)}finally{A(!1)}};return k?e.jsxs("div",{className:"p-4 rounded-xl mb-4",style:{backgroundColor:"rgba(20, 184, 166, 0.1)"},onClick:m=>m.stopPropagation(),children:[e.jsx("p",{className:"text-sm font-medium mb-3",style:{color:"var(--text-primary)"},children:"DÃ­a de cierre del resumen"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:B,onChange:m=>t(m.target.value),min:"1",max:"31",className:"flex-1 px-3 py-2 rounded-lg text-center font-semibold transition-all duration-200 border-2 border-transparent focus:border-[var(--accent-purple)]",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},autoFocus:!0}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"de cada mes"})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>{var m;t(((m=a.diaCierre)==null?void 0:m.toString())||"1"),C(!1)},className:"flex-1 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Cancelar"}),e.jsx("button",{onClick:h,disabled:x,className:"flex-1 py-2 rounded-lg text-sm font-medium text-white transition-colors disabled:opacity-50",style:{backgroundColor:"var(--accent-purple)"},children:x?"Guardando...":"Guardar"})]})]}):e.jsxs("button",{onClick:m=>{m.stopPropagation(),C(!0)},className:"w-full p-3 rounded-xl mb-4 flex items-center justify-between transition-colors hover:opacity-80",style:{backgroundColor:"rgba(20, 184, 166, 0.1)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--accent-purple)"},children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"DÃ­a de cierre"}),e.jsxs("p",{className:"font-semibold",style:{color:"var(--accent-purple)"},children:[a.diaCierre||1," de cada mes"]})]})]}),e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--accent-purple)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]})}export{Oe as default};
