import{aU as L,u as B,r as c,j as e,bl as T,d as N,g as H,h as w,n as P}from"./index-MY64-eYD.js";const U="2026.01.31-e",$={oficial:{nombre:"Oficial",descripcion:"Banco Naci贸n"},blue:{nombre:"Blue",descripcion:"Informal"},bolsa:{nombre:"MEP",descripcion:"Bolsa/MEP"},contadoconliqui:{nombre:"CCL",descripcion:"Contado con liquidaci贸n"}};function _({darkMode:i,toggleDarkMode:C}){const{user:m,profile:r,signOut:h}=L(),z=B(),[y,k]=c.useState(!1),[v,p]=c.useState("oficial"),[x,f]=c.useState(null),[o,d]=c.useState(!0),[g,j]=c.useState(!1),[b,u]=c.useState(null);c.useEffect(()=>{(async()=>{d(!0);try{const[s,n]=await Promise.all([H(),w()]);p(s.tipoUsado||"oficial"),f(n),s.fechaActualizacion&&u(new Date(s.fechaActualizacion))}catch(s){console.error("Error loading exchange data:",s)}finally{d(!1)}})()},[]);const A=async a=>{if(!(a===v||g)){j(!0);try{const s=await P(a);p(a),s.fechaActualizacion&&u(new Date(s.fechaActualizacion))}catch(s){console.error("Error updating exchange rate type:",s)}finally{j(!1)}}},R=async()=>{d(!0);try{const a=await w();f(a),u(new Date)}catch(a){console.error("Error refreshing rates:",a)}finally{d(!1)}},M=a=>{if(!a)return null;const n=new Date-a,l=Math.floor(n/6e4);if(l<1)return"hace un momento";if(l<60)return`hace ${l} min`;const t=Math.floor(l/60);return t<24?`hace ${t}h`:`hace ${Math.floor(t/24)}d`},E=async()=>{k(!0);try{if(await h(),"serviceWorker"in navigator){const a=await navigator.serviceWorker.getRegistrations();for(const s of a)await s.unregister()}if("caches"in window){const a=await caches.keys();for(const s of a)await caches.delete(s)}localStorage.clear(),sessionStorage.clear(),window.location.href="/"}catch(a){console.error("Error during force update:",a),window.location.href="/"}},S=async()=>{await h(),z("/")};return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-medium",style:{color:"var(--text-primary)"},children:"Configuraci贸n"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Preferencias y opciones de la aplicaci贸n"})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-secondary)"},children:"Cuenta"}),m&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{src:r==null?void 0:r.avatar_url,name:r==null?void 0:r.full_name,email:m.email,size:"lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-lg",style:{color:"var(--text-primary)"},children:(r==null?void 0:r.full_name)||"Usuario"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:m.email})]}),e.jsx("button",{onClick:S,className:"px-4 py-2 rounded-xl text-sm font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--accent-red-dim)",color:"var(--accent-red)"},children:"Cerrar sesi贸n"})]})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-secondary)"},children:"Apariencia"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--bg-tertiary)"},children:i?e.jsx("svg",{className:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):e.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Tema"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:i?"Modo oscuro":"Modo claro"})]})]}),e.jsx("button",{onClick:C,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--bg-tertiary)"},"aria-label":i?"Cambiar a modo claro":"Cambiar a modo oscuro",children:i?e.jsx("svg",{className:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})]})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("span",{className:"text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Tipo de cambio"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Eleg铆 qu茅 cotizaci贸n del d贸lar usar para las conversiones"})]})]}),e.jsx("div",{className:"space-y-2",children:Object.entries($).map(([a,{nombre:s,descripcion:n}])=>{const l=x==null?void 0:x.find(D=>D.casa===a),t=a===v;return e.jsxs("button",{onClick:()=>A(a),disabled:g||o,className:"w-full flex items-center gap-3 p-3 rounded-xl transition-colors hover:bg-[var(--bg-tertiary)] disabled:opacity-50",style:{backgroundColor:t?"var(--accent-primary-dim)":"transparent",border:t?"1px solid var(--accent-primary)":"1px solid var(--border-subtle)"},children:[e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 transition-colors",style:{border:t?"2px solid var(--accent-primary)":"2px solid var(--text-muted)"},children:t&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"var(--accent-primary)"}})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"var(--accent-primary)":"var(--text-primary)"},children:s}),e.jsx("p",{className:"text-[11px]",style:{color:"var(--text-muted)"},children:n})]}),l&&!o?e.jsxs("span",{className:"text-sm tabular-nums",style:{color:"var(--text-secondary)"},children:["$",N(l.compra)," / $",N(l.venta)]}):o?e.jsx("div",{className:"w-20 h-4 rounded animate-pulse",style:{backgroundColor:"var(--bg-tertiary)"}}):null]},a)})}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3",style:{borderTop:"1px solid var(--border-subtle)"},children:[b&&e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:["ltima actualizaci贸n: ",M(b)]}),e.jsxs("button",{onClick:R,disabled:o,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-xs font-medium transition-colors disabled:opacity-50",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:[e.jsx("svg",{className:`w-4 h-4 ${o?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Actualizar cotizaciones"]})]})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-secondary)"},children:"Aplicaci贸n"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-6 h-6",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Actualizar aplicaci贸n"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Si la app no funciona correctamente o hay problemas de cach茅, us谩 este bot贸n para limpiar todos los datos locales, cerrar sesi贸n y recargar con la 煤ltima versi贸n."}),e.jsx("button",{onClick:E,disabled:y,className:"mt-4 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors disabled:opacity-50",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"},children:y?"Actualizando...":"Limpiar cach茅 y recargar"})]})]})]}),e.jsxs("div",{className:"rounded-2xl p-6",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-secondary)"},children:"Acerca de"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:"/icons/icon-192.png",alt:"Cash茅",className:"w-16 h-16 rounded-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg",style:{color:"var(--text-primary)"},children:"Cash茅"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Finanzas personales"}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:["Versi贸n ",U]})]})]})]})]})}export{_ as default};
