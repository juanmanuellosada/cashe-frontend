import{r as n,j as e,a2 as de,ad as Be,a1 as tt,g as st,n as rt,S as at,o as ot,ae as nt,af as lt,b as J,h as ct,L as it,i as Ue,a as Ee,f,a3 as dt,E as mt,a4 as xt,c as ie,A as ut,y as ht,ag as pt,ah as yt,q as gt,X as vt,ai as ft}from"./index-EdJAMjxN.js";function bt({isOpen:b,onClose:R,statement:te,attachments:u,onSave:me,onRemove:B,saving:U}){const[k,K]=n.useState(null),[M,O]=n.useState(null),o=n.useRef(null),N=n.useRef(null),[d,E]=n.useState(0),[Q,P]=n.useState(!1),se=n.useRef(0);n.useEffect(()=>{b&&(E(0),P(!1))},[b]);const Y=s=>{s.target.closest("[data-drag-handle]")&&(se.current=s.touches[0].clientY,P(!0))},i=s=>{if(!Q)return;const y=s.touches[0].clientY-se.current;y>0&&E(y)},G=()=>{Q&&(d>100&&!U&&R(),E(0),P(!1))};if(!b||!te)return null;const z=s=>y=>{var F;const h=(F=y.target.files)==null?void 0:F[0];if(h){if(h.size>5*1024*1024){alert("El archivo es demasiado grande. Maximo 5MB.");return}s(h)}},Z=async()=>{!k&&!M||(await me({statementFile:k,receiptFile:M}),K(null),O(null),o.current&&(o.current.value=""),N.current&&(N.current.value=""))},I=async s=>{await B(s)},T=u==null?void 0:u.statementUrl,p=u==null?void 0:u.receiptUrl,ee=k||M,q=Math.max(.6-d/300,0),W=d>100;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center overflow-y-auto sm:py-6",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm transition-opacity",style:{backgroundColor:`rgba(0, 0, 0, ${q})`},onClick:R}),e.jsxs("div",{className:"relative w-full max-w-md sm:mx-4 mt-0 rounded-b-2xl sm:rounded-2xl p-4 sm:p-6 animate-slide-down max-h-[90vh] sm:max-h-[calc(100vh-48px)] overflow-y-auto",style:{backgroundColor:"var(--bg-secondary)",transform:`translateY(${d}px)`,transition:Q?"none":"transform 0.3s ease-out",opacity:W?.5:1},onTouchStart:Y,onTouchMove:i,onTouchEnd:G,children:[e.jsx("div",{className:"sm:hidden flex justify-center -mt-2 mb-2","data-drag-handle":!0,children:e.jsx("div",{className:"w-10 h-1 rounded-full transition-colors",style:{backgroundColor:W?"var(--accent-red)":"var(--border-medium)"}})}),e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-5","data-drag-handle":!0,children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Adjuntos del Resumen"}),e.jsx("p",{className:"text-xs sm:text-sm capitalize",style:{color:"var(--text-secondary)"},children:te.monthName})]}),e.jsx("button",{onClick:R,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("input",{ref:o,type:"file",className:"hidden",onChange:z(K)}),e.jsx("input",{ref:N,type:"file",className:"hidden",onChange:z(O)}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] sm:text-xs font-medium mb-1 flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-3 h-3",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Resumen"]}),T&&!k?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsx("button",{type:"button",onClick:()=>de(u.statementUrl,u.statementName),className:"flex-1 text-[11px] font-medium truncate text-left hover:underline",style:{color:"var(--accent-primary)"},children:u.statementName}),e.jsx("button",{type:"button",onClick:()=>{var s;return(s=o.current)==null?void 0:s.click()},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-white/10",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),e.jsx("button",{type:"button",onClick:()=>I("statement"),disabled:U,className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20 disabled:opacity-50",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):k?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium truncate",style:{color:"var(--text-primary)"},children:k.name}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:Be(k.size)})]}),e.jsx("button",{type:"button",onClick:()=>{K(null),o.current&&(o.current.value="")},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("button",{type:"button",onClick:()=>{var s;return(s=o.current)==null?void 0:s.click()},className:"w-full flex items-center justify-center gap-1 px-2 py-2.5 rounded-lg border border-dashed transition-colors hover:border-[var(--accent-primary)]",style:{borderColor:"var(--border-subtle)",backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"text-[11px]",children:"PDF"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] sm:text-xs font-medium mb-1 flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-3 h-3",style:{color:"var(--accent-green)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Comprobante"]}),p&&!M?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[tt(u.receiptName)?e.jsx("img",{src:u.receiptUrl,alt:"Receipt",className:"w-6 h-6 rounded object-cover flex-shrink-0"}):null,e.jsx("button",{type:"button",onClick:()=>de(u.receiptUrl,u.receiptName),className:"flex-1 text-[11px] font-medium truncate text-left hover:underline",style:{color:"var(--accent-primary)"},children:u.receiptName}),e.jsx("button",{type:"button",onClick:()=>{var s;return(s=N.current)==null?void 0:s.click()},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-white/10",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),e.jsx("button",{type:"button",onClick:()=>I("receipt"),disabled:U,className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20 disabled:opacity-50",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):M?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-2 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium truncate",style:{color:"var(--text-primary)"},children:M.name}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:Be(M.size)})]}),e.jsx("button",{type:"button",onClick:()=>{O(null),N.current&&(N.current.value="")},className:"w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-red-500/20",style:{color:"var(--accent-red)"},children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("button",{type:"button",onClick:()=>{var s;return(s=N.current)==null?void 0:s.click()},className:"w-full flex items-center justify-center gap-1 px-2 py-2.5 rounded-lg border border-dashed transition-colors hover:border-[var(--accent-primary)]",style:{borderColor:"var(--border-subtle)",backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"text-[11px]",children:"Imagen"})]})]})]}),e.jsx("p",{className:"text-[10px] mb-2",style:{color:"var(--text-muted)"},children:"M谩x. 5MB por archivo"}),e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsx("button",{onClick:R,className:"flex-1 py-2.5 sm:py-3 rounded-xl text-sm font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cerrar"}),ee&&e.jsx("button",{onClick:Z,disabled:U,className:"flex-1 py-2.5 sm:py-3 rounded-xl text-sm font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)"},children:U?"Guardando...":"Guardar"})]})]})]})}function kt(){const{showError:b}=st(),[R,te]=n.useState([]),[u,me]=n.useState([]),[B,U]=n.useState([]),[k,K]=n.useState({ingresos:[],gastos:[]}),[M,O]=n.useState(!0),[o,N]=n.useState(null),[d,E]=n.useState("ARS"),[Q,P]=n.useState(!1),[se,Y]=n.useState(!1),[i,G]=n.useState(null),[z,Z]=n.useState(""),[I,T]=n.useState(""),[p,ee]=n.useState("ARS"),[q,W]=n.useState(!1),[s,y]=n.useState(null),[h,F]=n.useState({}),[ze,ve]=n.useState(!1),[$,fe]=n.useState(null),[Ie,re]=n.useState(!1),[be,xe]=n.useState(null),[V,ue]=n.useState(!1),[C,_]=n.useState(new Set),[Te,ae]=n.useState(null),[oe,ne]=n.useState(""),[je,ke]=n.useState(!1),[he,We]=n.useState(null);n.useEffect(()=>{X()},[]);const X=async(t=!1,r=!0)=>{try{r&&O(!0);const[a,m,l]=await Promise.all([rt(),at(t),ot()]),A=a.accounts||[],j=m.expenses||[],x=l.categorias||{ingresos:[],gastos:[]},c=A.filter(g=>g.esTarjetaCredito);te(c),U(A),me(j),K(x),c.length>0&&!o&&N(c[0])}catch(a){console.error("Error fetching data:",a)}finally{r&&O(!1)}};n.useEffect(()=>{o!=null&&o.id?nt(o.id).then(F).catch(t=>console.error("Error loading statement attachments:",t)):F({})},[o==null?void 0:o.id]);const Fe=n.useMemo(()=>B.filter(t=>!t.esTarjetaCredito&&t.moneda==="Peso"),[B]),$e=n.useMemo(()=>B.filter(t=>!t.esTarjetaCredito&&t.moneda!=="Peso"),[B]),w=n.useMemo(()=>{if(!o)return[];const t=o.diaCierre||1,r=u.filter(x=>x.cuenta===o.nombre);if(r.length===0)return[];const a=r.map(x=>new Date(x.fecha));new Date(Math.min(...a)),new Date(Math.max(...a));const m=x=>{const c=new Date(x),g=c.getDate();let L=c.getFullYear(),v=c.getMonth();return g>=t&&(v+=1,v>11&&(v=0,L+=1)),`${L}-${String(v+1).padStart(2,"0")}`},l={};r.forEach(x=>{const c=m(x.fecha);l[c]||(l[c]=[]),l[c].push(x)});const A=[],j=new Date;return Object.entries(l).forEach(([x,c])=>{const[g,L]=x.split("-").map(Number),v=new Date(g,L-1,Math.min(t,new Date(g,L,0).getDate()));let H=0,Me=0;const pe=[],ye=[];c.forEach(S=>{let D=S.montoDolares;typeof D=="string"?D=parseFloat(D.replace(/[^\d,.-]/g,"").replace(",","."))||0:D=parseFloat(D)||0;const ge=parseFloat(S.montoPesos)||0,Le=parseFloat(S.monto)||0,Pe=D>0&&ge===0,Re={...S,isInstallment:!!S.cuota,monedaOriginal:Pe?"USD":"ARS",montoPesosNum:ge||Le,montoDolaresNum:D};Pe?(Me+=D,ye.push(Re)):(H+=ge||Le,pe.push(Re))});const Ae=[...pe,...ye].sort((S,D)=>new Date(S.fecha)-new Date(D.fecha)),ce=c.find(S=>S.categoria&&S.categoria.includes("Impuesto de sellos"));A.push({id:x,year:g,month:L-1,monthName:J(v,"MMMM yyyy",{locale:ie}),closeDate:v,totalPesos:H,totalDolares:Me,items:Ae,itemsPesos:pe,itemsDolares:ye,itemCount:Ae.length,hasTax:!!ce,taxAmount:ce&&(ce.montoPesos||ce.monto)||0,isPast:v<j,isCurrent:lt(v,j),isFuture:v>ct(j)})}),A.sort((x,c)=>x.closeDate-c.closeDate)},[o,u]);n.useEffect(()=>{if(he&&w.length>0){const t=w.find(r=>r.id===he);t&&y(t),We(null)}},[he,w]);const Ve=async()=>{if(!(!i||!z||!o))try{W(!0);const t=J(i.closeDate,"yyyy-MM-dd");await ut({fecha:t,monto:parseFloat(z),cuenta:o.nombre,categoria:"猬锔 Impuesto de sellos",nota:`Impuesto de sellos - Resumen ${i.monthName}`}),P(!1),Z(""),G(null),await X()}catch(t){console.error("Error adding tax:",t),b("No se pudo agregar el impuesto de sellos",t.message)}finally{W(!1)}},He=async()=>{if(!i||!I||!o)return;const t=p==="ARS"?i.totalPesos:i.totalDolares;if(t<=0){b("No se puede realizar el pago",`No hay monto en ${p==="ARS"?"pesos":"d贸lares"} para pagar`);return}try{W(!0);const r=J(new Date,"yyyy-MM-dd"),a=p==="ARS"?"(Pesos)":"(D贸lares)";await ht({fecha:r,cuentaSaliente:I,cuentaEntrante:o.nombre,montoSaliente:t,montoEntrante:t,nota:`Pago resumen ${i.monthName} ${a}`}),Y(!1),T(""),G(null),await X()}catch(r){console.error("Error paying statement:",r),b("No se pudo registrar el pago del resumen",r.message)}finally{W(!1)}},Ne=t=>{G(t),Z(""),P(!0)},Ce=t=>{G(t),T(""),ee(t.totalPesos>0?"ARS":"USD"),Y(!0)},we=t=>{fe(t),ve(!0)},Oe=async({statementFile:t,receiptFile:r})=>{if(!(!$||!o))try{re(!0);const a=$.id,m=h[a]||null,l=await yt({accountId:o.id,period:a,statementFile:t,receiptFile:r,existing:m});F(A=>({...A,[a]:l}))}catch(a){console.error("Error saving statement attachments:",a),b("No se pudieron guardar los adjuntos",a.message)}finally{re(!1)}},Ye=async t=>{if(!(!$||!o))try{re(!0);const r=$.id;await pt({accountId:o.id,period:r,field:t}),F(a=>{const m={...a};if(m[r]){const l={...m[r]};t==="statement"?(l.statementUrl=null,l.statementName=null):(l.receiptUrl=null,l.receiptName=null),!l.statementUrl&&!l.receiptUrl?delete m[r]:m[r]=l}return m})}catch(r){console.error("Error removing attachment:",r),b("No se pudo eliminar el adjunto",r.message)}finally{re(!1)}},Ge=t=>{xe({id:t.id,fecha:t.fecha,monto:t.monto,cuenta:t.cuenta||(o==null?void 0:o.nombre),categoria:t.categoria,nota:t.nota,tipo:"gasto",accountId:t.accountId,categoryId:t.categoryId,cuota:t.cuota,idCompra:t.idCompra||t.installment_purchase_id})},qe=async t=>{try{await gt(t),t.applyToSubsequent&&t.idCompra&&await vt(t),xe(null),s&&y(r=>{if(!r)return r;const a=m=>m.map(l=>l.id===t.id?{...l,nota:t.nota,categoria:t.categoria,fecha:t.fecha}:l);return{...r,items:a(r.items||[]),itemsPesos:a(r.itemsPesos||[]),itemsDolares:a(r.itemsDolares||[])}}),X(!0,!1)}catch(r){console.error("Error updating movement:",r),b("No se pudo actualizar el movimiento",r.message)}},le=()=>s?w.findIndex(t=>t.id===s.id):-1,_e=()=>{const t=le();t>0&&y(w[t-1])},Xe=()=>{const t=le();t<w.length-1&&y(w[t+1])},Je=()=>le()>0,Ke=()=>le()<w.length-1,Se=()=>{ue(!V),_(new Set)},De=t=>{const r=new Set(C);r.has(t)?r.delete(t):r.add(t),_(r)},Qe=t=>{const r=new Set(t.map(a=>a.id));_(r)},Ze=()=>s?(s.totalPesos>0&&s.totalDolares>0?d==="ARS"?s.itemsPesos:s.itemsDolares:s.items).filter(a=>C.has(a.id)):[],et=async()=>{if(oe){ke(!0);try{const t=Ze();await ft(t,"fecha",oe),_(new Set),ue(!1),ae(null),ne(""),await X()}catch(t){console.error("Error in bulk update:",t),b("No se pudieron actualizar los movimientos",t.message)}finally{ke(!1)}}};return M?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(it,{})}):R.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Tarjetas de Cr茅dito"}),e.jsxs("div",{className:"rounded-2xl p-8 text-center",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"rgba(20, 184, 166, 0.15)"},children:e.jsx("svg",{className:"w-10 h-10",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Sin tarjetas de cr茅dito"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:'Agrega una cuenta con tipo "Tarjeta de cr茅dito" para ver los res煤menes'})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Tarjetas de Cr茅dito"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>E("ARS"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:d==="ARS"?"var(--accent-primary)":"transparent",color:d==="ARS"?"white":"var(--text-secondary)",boxShadow:d==="ARS"?"0 4px 12px var(--accent-primary-glow)":"none"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),e.jsxs("button",{onClick:()=>E("USD"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:d==="USD"?"var(--accent-green)":"transparent",color:d==="USD"?"white":"var(--text-secondary)",boxShadow:d==="USD"?"0 4px 12px rgba(0, 217, 154, 0.3)":"none"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:R.map(t=>{const r=!!t.icon,a=r&&Ue(t.icon);return e.jsx("button",{onClick:()=>N(t),className:`px-4 py-3 rounded-xl text-sm font-medium whitespace-nowrap transition-all duration-200 ${(o==null?void 0:o.nombre)===t.nombre?"scale-[1.02]":"opacity-70"}`,style:{backgroundColor:(o==null?void 0:o.nombre)===t.nombre?"var(--accent-primary)":"var(--bg-secondary)",color:(o==null?void 0:o.nombre)===t.nombre?"white":"var(--text-primary)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[r?a?e.jsx("span",{className:"text-base",children:t.icon}):e.jsx("img",{src:Ee(t.icon),alt:t.nombre,className:"w-5 h-5 rounded object-cover"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),t.nombre]})},t.nombre)})}),o&&e.jsx("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"D铆a de cierre"}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-primary)"},children:o.diaCierre||"No configurado"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Balance actual"}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-red)"},children:f(Math.abs(o.balanceActual||0),o.moneda==="Peso"?"ARS":"USD")})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Res煤menes"}),w.length===0?e.jsxs("div",{className:"text-center py-8",style:{color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-sm",children:"No hay res煤menes con gastos"})]}):w.map(t=>{var a,m;const r=t.totalPesos>0&&t.totalDolares>0;return e.jsxs("div",{className:"rounded-2xl overflow-hidden cursor-pointer active:scale-[0.98] transition-transform",style:{backgroundColor:"var(--bg-secondary)"},onClick:()=>y(t),children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",style:{backgroundColor:t.isCurrent?"rgba(20, 184, 166, 0.15)":t.isFuture?"rgba(96, 165, 250, 0.1)":"transparent"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:t.isCurrent?"var(--accent-primary)":t.isFuture?"var(--accent-blue)":"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:t.isCurrent||t.isFuture?"white":"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold capitalize",style:{color:"var(--text-primary)"},children:[t.monthName,t.isCurrent&&e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Actual"}),t.isFuture&&e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:"var(--accent-blue)",color:"white"},children:"Futuro"})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 flex-wrap",children:[e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[t.itemCount," movimiento",t.itemCount!==1?"s":""," 路 Cierra ",J(t.closeDate,"d MMM",{locale:ie})]}),((a=h[t.id])==null?void 0:a.statementUrl)&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:"PDF"}),((m=h[t.id])==null?void 0:m.receiptUrl)&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium",style:{backgroundColor:"rgba(34, 197, 94, 0.15)",color:"var(--accent-green)"},children:"Pagado"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-right",children:[r?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-bold",style:{color:"var(--accent-red)"},children:f(t.totalPesos,"ARS")}),e.jsx("p",{className:"text-sm font-bold",style:{color:"var(--accent-green)"},children:f(t.totalDolares,"USD")})]}):e.jsx("p",{className:"text-lg font-bold",style:{color:t.totalPesos>0||t.totalDolares>0?"var(--accent-red)":"var(--text-secondary)"},children:t.totalPesos>0?f(t.totalPesos,"ARS"):f(t.totalDolares,"USD")}),t.hasTax&&e.jsx("p",{className:"text-xs",style:{color:"var(--accent-yellow)"},children:"Inc. imp. sellos"})]}),e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsxs("div",{className:"px-4 py-3 flex gap-2",style:{borderTop:"1px solid var(--border-subtle)"},onClick:l=>l.stopPropagation(),children:[!t.hasTax&&e.jsxs("button",{onClick:()=>Ne(t),className:"flex-1 py-2.5 rounded-xl text-xs font-medium transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-yellow)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Imp. Sellos"]}),e.jsx("button",{onClick:()=>we(t),className:"py-2.5 px-3 rounded-xl text-xs font-medium transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},title:"Adjuntos",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),e.jsxs("button",{onClick:()=>Ce(t),className:"flex-1 py-2.5 rounded-xl text-xs font-medium text-white transition-all duration-200 flex items-center justify-center gap-1.5",style:{backgroundColor:"var(--accent-green)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Pagar Resumen"]})]})]},t.id)})]}),Q&&i&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>P(!1)}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Agregar Impuesto de Sellos"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Resumen de ",e.jsx("span",{className:"font-medium capitalize",children:i.monthName})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Monto del impuesto"}),e.jsx("input",{type:"number",value:z,onChange:t=>Z(t.target.value),placeholder:"0.00",className:"w-full px-4 py-3 rounded-xl text-lg",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"}})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:Ve,disabled:q||!z,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-yellow)"},children:q?"Guardando...":"Agregar"})]})]})]}),se&&i&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>Y(!1)}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Pagar Resumen"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Resumen de ",e.jsx("span",{className:"font-medium capitalize",children:i.monthName})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Seleccionar porci贸n a pagar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{ee("ARS"),T("")},disabled:i.totalPesos<=0,className:`flex-1 p-3 rounded-xl text-left transition-all ${p==="ARS"?"ring-2":""} ${i.totalPesos<=0?"opacity-40 cursor-not-allowed":""}`,style:{backgroundColor:p==="ARS"?"rgba(20, 184, 166, 0.15)":"var(--bg-tertiary)",borderColor:"var(--accent-primary)","--tw-ring-color":"var(--accent-primary)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Pesos"}),e.jsx("p",{className:"text-lg font-bold",style:{color:p==="ARS"?"var(--accent-primary)":"var(--text-primary)"},children:f(i.totalPesos,"ARS")})]}),e.jsxs("button",{onClick:()=>{ee("USD"),T("")},disabled:i.totalDolares<=0,className:`flex-1 p-3 rounded-xl text-left transition-all ${p==="USD"?"ring-2":""} ${i.totalDolares<=0?"opacity-40 cursor-not-allowed":""}`,style:{backgroundColor:p==="USD"?"rgba(34, 197, 94, 0.15)":"var(--bg-tertiary)",borderColor:"var(--accent-green)","--tw-ring-color":"var(--accent-green)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"D贸lares"}),e.jsx("p",{className:"text-lg font-bold",style:{color:p==="USD"?"var(--accent-green)":"var(--text-primary)"},children:f(i.totalDolares,"USD")})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:["Pagar desde cuenta en ",p==="ARS"?"pesos":"d贸lares"]}),e.jsx(dt,{value:I,onChange:T,options:(p==="ARS"?Fe:$e).map(t=>({value:t.nombre,label:t.nombre})),placeholder:"Seleccionar cuenta..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:He,disabled:q||!I,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-green)"},children:q?"Procesando...":"Pagar"})]})]})]}),s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:"var(--bg-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 safe-area-top",style:{backgroundColor:"var(--bg-secondary)",borderBottom:"1px solid var(--border-subtle)"},children:[e.jsx("button",{onClick:()=>{y(null),ue(!1),_(new Set)},className:"w-10 h-10 rounded-xl flex items-center justify-center transition-colors",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:_e,disabled:!Je(),className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all disabled:opacity-30",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h2",{className:"font-semibold capitalize",style:{color:"var(--text-primary)"},children:s.monthName}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[o==null?void 0:o.nombre," 路 Cierra ",J(s.closeDate,"d MMM yyyy",{locale:ie})]})]}),e.jsx("button",{onClick:Xe,disabled:!Ke(),className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all disabled:opacity-30",style:{backgroundColor:"var(--bg-tertiary)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"px-3 py-1.5 rounded-xl text-sm font-bold",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:s.totalPesos>0&&s.totalDolares>0?e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsx("span",{children:f(s.totalPesos,"ARS")}),e.jsx("span",{style:{color:"var(--accent-green)"},children:f(s.totalDolares,"USD")})]}):s.totalPesos>0?f(s.totalPesos,"ARS"):f(s.totalDolares,"USD")})]}),h[s.id]&&e.jsxs("div",{className:"px-4 py-3 flex gap-2 flex-wrap",style:{borderBottom:"1px solid var(--border-subtle)"},children:[h[s.id].statementUrl&&e.jsxs("button",{onClick:()=>de(h[s.id].statementUrl,h[s.id].statementName),className:"flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-medium transition-colors hover:opacity-80",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Resumen PDF"]}),h[s.id].receiptUrl&&e.jsxs("button",{onClick:()=>de(h[s.id].receiptUrl,h[s.id].receiptName),className:"flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-medium transition-colors hover:opacity-80",style:{backgroundColor:"rgba(34, 197, 94, 0.15)",color:"var(--accent-green)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Comprobante"]})]}),s.totalPesos>0&&s.totalDolares>0&&e.jsx("div",{className:"px-4 py-3",style:{borderBottom:"1px solid var(--border-subtle)"},children:e.jsx("div",{className:"flex gap-2",children:["ARS","USD"].map(t=>{var r,a;return e.jsxs("button",{onClick:()=>E(t),className:`flex-1 py-2 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 ${d===t?"text-white":""}`,style:{backgroundColor:d===t?"var(--accent-primary)":"var(--bg-tertiary)",color:d===t?"white":"var(--text-secondary)"},children:[e.jsx("img",{src:`/icons/catalog/${t}.svg`,alt:t,className:"w-5 h-5 rounded-sm"}),t==="ARS"?`Pesos (${((r=s.itemsPesos)==null?void 0:r.length)||0})`:`D贸lares (${((a=s.itemsDolares)==null?void 0:a.length)||0})`]},t)})})}),V&&e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-2 flex-wrap",style:{backgroundColor:"rgba(20, 184, 166, 0.1)",borderBottom:"1px solid var(--accent-primary)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[C.size," seleccionado",C.size!==1?"s":""]}),e.jsx("button",{onClick:()=>{const r=s.totalPesos>0&&s.totalDolares>0?d==="ARS"?s.itemsPesos:s.itemsDolares:s.items;C.size===r.length?_(new Set):Qe(r)},className:"text-xs px-2 py-1 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},children:(()=>{const r=s.totalPesos>0&&s.totalDolares>0?d==="ARS"?s.itemsPesos:s.itemsDolares:s.items;return C.size===r.length?"Deseleccionar":"Seleccionar todo"})()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C.size>0&&e.jsxs("button",{onClick:()=>ae("editDate"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:"rgba(168, 85, 247, 0.15)",color:"var(--accent-purple)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Cambiar fecha"]}),e.jsx("button",{onClick:Se,className:"px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Cancelar"})]})]}),!V&&e.jsx("div",{className:"px-4 py-2",style:{borderBottom:"1px solid var(--border-subtle)"},children:e.jsxs("button",{onClick:Se,className:"text-xs font-medium flex items-center gap-1.5",style:{color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h7M4 12h7m-7 7h7m5-14v14m0-14l3 3m-3-3l-3 3m3 11l3-3m-3 3l-3-3"})}),"Selecci贸n m煤ltiple"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-2",children:(()=>{const r=s.totalPesos>0&&s.totalDolares>0?d==="ARS"?s.itemsPesos:s.itemsDolares:s.items;return r==null?void 0:r.map((a,m)=>{var x;const l=a.monedaOriginal||"ARS",A=l==="USD"?a.montoDolaresNum||a.montoDolares||0:a.montoPesosNum||a.montoPesos||a.monto||0,j=C.has(a.id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-all cursor-pointer ${V?"":"active:scale-[0.98]"}`,style:{backgroundColor:j?"rgba(20, 184, 166, 0.15)":"var(--bg-secondary)",border:j?"1px solid var(--accent-primary)":"1px solid transparent"},onClick:()=>V?De(a.id):Ge(a),children:[V&&e.jsx("button",{onClick:c=>{c.stopPropagation(),De(a.id)},className:"w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0 transition-all",style:{backgroundColor:j?"var(--accent-primary)":"var(--bg-tertiary)",border:j?"none":"2px solid var(--border-subtle)"},children:j&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--bg-tertiary)"},children:(()=>{var L,v;const c=(L=k.gastos)==null?void 0:L.find(H=>H.value===a.categoria||H.label===a.categoria),g=c==null?void 0:c.icon;if(g&&Ue(g))return e.jsx("span",{className:"text-lg",children:g});if(g)return e.jsx("img",{src:Ee(g),alt:"",className:"w-6 h-6 rounded object-cover"});{const H=((v=a.categoria)==null?void 0:v.split(" ")[0])||"";return e.jsx("span",{className:"text-lg",children:H})}})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:[((x=a.categoria)==null?void 0:x.replace(/^[^\s]+\s*/,""))||a.categoria||"Sin categor铆a",a.isInstallment&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(20, 184, 166, 0.2)",color:"var(--accent-primary)"},children:a.cuota}),l==="USD"&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(34, 197, 94, 0.2)",color:"var(--accent-green)"},children:"USD"})]}),a.nota&&e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:a.nota}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:J(new Date(a.fecha),"d 'de' MMMM",{locale:ie})})]}),e.jsxs("div",{className:"text-right flex-shrink-0 flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-bold",style:{color:l==="USD"?"var(--accent-green)":"var(--accent-red)"},children:f(A,l)}),!V&&e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},m)})})()}),e.jsxs("div",{className:"px-4 py-4 safe-area-bottom flex gap-3",style:{backgroundColor:"var(--bg-secondary)",borderTop:"1px solid var(--border-subtle)"},children:[!s.hasTax&&e.jsxs("button",{onClick:()=>{Ne(s),y(null)},className:"flex-1 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-yellow)"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Imp. Sellos"]}),e.jsx("button",{onClick:()=>{we(s)},className:"py-3 px-4 rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),e.jsxs("button",{onClick:()=>{Ce(s),y(null)},className:"flex-1 py-3 rounded-xl font-medium text-white transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:"var(--accent-green)"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Pagar Resumen"]})]})]}),e.jsx(bt,{isOpen:ze,onClose:()=>{ve(!1),fe(null)},statement:$,attachments:$?h[$.id]:null,onSave:Oe,onRemove:Ye,saving:Ie}),be&&e.jsx(mt,{movement:be,accounts:B,categories:k,onSave:qe,onClose:()=>xe(null),onConvertedToRecurring:()=>X(!0,!1)}),Te==="editDate"&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-4 pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>{ae(null),ne("")}}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Cambiar fecha"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Cambiar la fecha de ",C.size," movimiento",C.size!==1?"s":""]}),e.jsx("div",{className:"mb-4",children:e.jsx(xt,{value:oe,onChange:t=>ne(t.target.value),name:"bulkDate"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{ae(null),ne("")},className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:et,disabled:je||!oe,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-purple, #a855f7)"},children:je?"Actualizando...":"Aplicar"})]})]})]})]})}export{kt as default};
