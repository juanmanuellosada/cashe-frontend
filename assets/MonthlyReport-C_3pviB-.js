import{f as de,c as I,u as ge,bs as ye,r as c,bt as ve,bu as fe,bv as be,y as je,j as e,L as Ne}from"./index-WRYg3urL.js";import{E as ne}from"./ExpensePieChart-Do3Nbr_7.js";import"./PieChart-xXN8wo95.js";import"./Legend-Ddlw7qyv.js";function Me(u,p){const{totalIngresos:i,totalGastos:o,balance:x,ahorroRate:l,prevMonthLabel:n,prevTotalIngresos:j,prevTotalGastos:m,gastosPorCategoria:D,ingresosPorCategoria:N,topGastos:M,gastoDiario:P,diaMasCaro:L,diasSinGastos:g,diasDelMes:b,transferencias:C,cuotasActivas:R,movimientos:S,cuentas:v,currency:$,proyeccion:T}=u,U=$,d=r=>de(r,U),Y=new Date().toLocaleDateString("es-AR"),A=(r,f)=>{if(!f||f===0)return"N/A";const w=(r-f)/Math.abs(f)*100;return(w>=0?"+":"")+w.toFixed(1)+"%"};let a=`# Resumen Financiero â€” ${p}

`;if(a+=`## Resumen Ejecutivo

`,a+=`| | ARS |
|---|---|
`,a+=`| Total ingresos | ${d(i)} |
`,a+=`| Total gastos | ${d(o)} |
`,a+=`| Balance neto | ${d(x)} |
`,a+=`| Tasa de ahorro | ${l}% |

`,n&&(a+=`## Comparativa vs ${n}

`,a+=`| | ${n} | ${p} | VariaciÃ³n |
|---|---|---|---|
`,a+=`| Ingresos | ${d(j)} | ${d(i)} | ${A(i,j)} |
`,a+=`| Gastos | ${d(m)} | ${d(o)} | ${A(o,m)} |

`),v&&v.length>0&&(a+=`## Balance por Cuenta

`,a+=`| Cuenta | Tipo | Saldo actual |
|---|---|---|
`,v.forEach(r=>{r.ocultaDelBalance||(a+=`| ${r.nombre} | ${r.tipo} | ${d(r.balanceActual)} |
`)}),a+=`
`),D&&D.length>0&&(a+=`## Gastos por CategorÃ­a

`,a+=`| CategorÃ­a | Monto | % |
|---|---|---|
`,D.forEach(r=>{a+=`| ${r.name} | ${d(r.value)} | ${r.percentage.toFixed(1)}% |
`}),a+=`
`),N&&N.length>0&&(a+=`## Ingresos por CategorÃ­a

`,a+=`| CategorÃ­a | Monto | % |
|---|---|---|
`,N.forEach(r=>{a+=`| ${r.name} | ${d(r.value)} | ${r.percentage.toFixed(1)}% |
`}),a+=`
`),R&&R.length>0&&(a+=`## Cuotas Activas

`,a+=`| DescripciÃ³n | Cuotas | Monto mensual |
|---|---|---|
`,R.forEach(r=>{a+=`| ${r.nota||"Sin descripciÃ³n"} | ${r.cuota} | ${d(r.monto)} |
`}),a+=`
`),M&&M.length>0&&(a+=`## Top 5 Gastos del Mes

`,a+=`| Fecha | Nota | Monto | Cuenta |
|---|---|---|---|
`,M.forEach(r=>{a+=`| ${I(r.fecha,"short")} | ${r.nota||"-"} | ${d(r.monto)} | ${r.cuenta} |
`}),a+=`
`),T){const{nextMonthLabel:r,totalIngresosEstimado:f,totalCuotasSiguiente:w,gastosRecurrentesEstimados:E,margenDisponible:V,cuotas:k}=T,B=f>0?Math.round(V/f*100):0;a+=`## ðŸš€ ProyecciÃ³n para ${r}

`,a+=`> CuÃ¡nto podÃ©s ahorrar o invertir en ${r}, asumiendo que tus gastos se repiten igual que en ${p}.

`,a+=`| Concepto | Monto |
|---|---|
`,a+=`| + Ingresos recurrentes *(se excluyen regalos, reintegros y otros ingresos puntuales)* | ${d(f)} |
`,a+=`| âˆ’ Cuotas de tarjeta comprometidas *(${(k==null?void 0:k.length)??0} cuotas)* | ${d(w)} |
`,a+=`| âˆ’ Gastos corrientes estimados *(base: gastos sin cuotas de ${p})* | ${d(E)} |
`,a+=`| **= Lo que podÃ©s ahorrar / invertir** | **${d(V)} (${B}% del ingreso)** |

`,k&&k.length>0&&(a+=`### Cuotas comprometidas para ${r}

`,a+=`| DescripciÃ³n | Cuota | Monto |
|---|---|---|
`,k.forEach(G=>{a+=`| ${G.nota||"Sin descripciÃ³n"} | ${G.cuota} | ${d(G.monto)} |
`}),a+=`| **Total cuotas** | | **${d(w)}** |

`)}return a+=`## EstadÃ­sticas

`,a+=`- Gasto promedio diario: ${d(P)}
`,L&&(a+=`- DÃ­a mÃ¡s caro: ${I(L.fecha,"short")} (${d(L.total)})
`),a+=`- DÃ­as sin gastos: ${g} de ${b}

`,C&&C.length>0&&(a+=`## Transferencias del Mes

`,a+=`| Fecha | Desde | Hacia | Monto |
|---|---|---|---|
`,C.forEach(r=>{a+=`| ${I(r.fecha,"short")} | ${r.cuentaSaliente} | ${r.cuentaEntrante} | ${d(r.montoSaliente)} |
`}),a+=`
`),S&&S.length>0&&(a+=`## Movimientos del Mes

`,a+=`| Fecha | Tipo | Monto | CategorÃ­a | Cuenta | Nota |
|---|---|---|---|---|---|
`,S.forEach(r=>{const f=r.tipo==="ingreso"?"Ingreso":"Gasto";a+=`| ${I(r.fecha,"short")} | ${f} | ${d(r.monto)} | ${r.categoria||"-"} | ${r.cuenta} | ${r.nota||"-"} |
`}),a+=`
`),a+=`---
*Generado desde CashÃ© el ${Y}*
`,a+=`*Para ver grÃ¡ficos, usar "Exportar PDF" en la aplicaciÃ³n*
`,a}function Ce(u,p){const i=new Blob([u],{type:"text/markdown;charset=utf-8"}),o=URL.createObjectURL(i),x=document.createElement("a");x.href=o,x.download=p,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(o)}const ae=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function O(u,p,i){if(!u)return!1;const[o,x]=u.split("-").map(Number);return o===p&&x===i+1}function $e(u,p){return new Date(u,p+1,0).getDate()}function le(u,p){const i={};let o=0;return u.forEach(x=>{const l=x.categoria||"Sin categorÃ­a",n=x.montoPesos||x.monto||0;o+=n,i[l]||(i[l]={value:0,icon:null}),i[l].value+=n}),Object.entries(i).map(([x,l])=>({name:x,value:l.value,percentage:o>0?l.value/o*100:0})).sort((x,l)=>l.value-x.value)}function ce(u,p){const i={};let o=0;u.forEach(l=>{const n=(l.categoria||"Sin categorÃ­a").replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||l.categoria||"Sin categorÃ­a",j=l.montoPesos||l.monto||0,m=l.montoDolares||0;o+=j,i[n]||(i[n]={pesos:0,dolares:0}),i[n].pesos+=j,i[n].dolares+=m});const x=o;return Object.entries(i).map(([l,n])=>{const j=n.pesos;return{name:l,value:j,pesos:n.pesos,dolares:n.dolares,percentage:x>0?j/x*100:0,icon:null}}).sort((l,n)=>n.value-l.value).slice(0,10)}function Ee(){ge();const[u]=ye(),[p,i]=c.useState(!0),[o,x]=c.useState({expenses:[],incomes:[],transfers:[],accounts:[]}),l="ARS",[n,j]=c.useState(()=>{const t=u.get("mes");return t?parseInt(t.split("-")[0]):new Date().getFullYear()}),[m,D]=c.useState(()=>{const t=u.get("mes");return t?parseInt(t.split("-")[1])-1:new Date().getMonth()});c.useEffect(()=>{let t=!1;return i(!0),Promise.all([ve(),fe(),be(),je()]).then(([s,y,H,se])=>{t||(x({expenses:(s==null?void 0:s.gastos)||[],incomes:(y==null?void 0:y.ingresos)||[],transfers:(H==null?void 0:H.transferencias)||[],accounts:(se==null?void 0:se.accounts)||[]}),i(!1))}).catch(()=>{t||i(!1)}),()=>{t=!0}},[]);const N=`${ae[m]} ${n}`,M=m===0?n-1:n,P=m===0?11:m-1,L=`${ae[P]} ${M}`,g=c.useMemo(()=>o.expenses.filter(t=>O(t.fecha,n,m)&&!t.isFuture),[o.expenses,n,m]),b=c.useMemo(()=>o.incomes.filter(t=>O(t.fecha,n,m)&&!t.isFuture),[o.incomes,n,m]),C=c.useMemo(()=>o.transfers.filter(t=>O(t.fecha,n,m)&&!t.isFuture),[o.transfers,n,m]),R=c.useMemo(()=>o.expenses.filter(t=>O(t.fecha,M,P)&&!t.isFuture),[o.expenses,M,P]),S=c.useMemo(()=>o.incomes.filter(t=>O(t.fecha,M,P)&&!t.isFuture),[o.incomes,M,P]),v=c.useMemo(()=>b.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[b]),$=c.useMemo(()=>g.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[g]),T=v-$,U=v>0?Math.round(T/v*100):0,d=c.useMemo(()=>S.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[S]),Y=c.useMemo(()=>R.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[R]),A=c.useMemo(()=>new Set(S.map(t=>t.categoryId).filter(Boolean)),[S]),a=c.useMemo(()=>A.size===0?v:b.filter(t=>A.has(t.categoryId)).reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[b,A,v]),r=$e(n,m),f=r>0?$/r:0,w=c.useMemo(()=>[...g].sort((t,s)=>s.monto-t.monto).slice(0,5),[g]),E=c.useMemo(()=>g.filter(t=>t.idCompra!==null&&t.idCompra!==void 0),[g]),V=c.useMemo(()=>new Set(g.map(s=>s.fecha)).size,[g]),k=r-V,B=c.useMemo(()=>{const t={};g.forEach(y=>{t[y.fecha]||(t[y.fecha]=0),t[y.fecha]+=y.monto||0});const s=Object.entries(t).sort((y,H)=>H[1]-y[1]);return s.length===0?null:{fecha:s[0][0],total:s[0][1]}},[g]),G=c.useMemo(()=>le(g),[g,l]),K=c.useMemo(()=>le(b),[b,l]),Q=c.useMemo(()=>ce(g),[g,l]),X=c.useMemo(()=>ce(b),[b,l]),z=c.useMemo(()=>[...b.map(s=>({...s,tipo:"ingreso"})),...g.map(s=>({...s,tipo:"gasto"}))].sort((s,y)=>s.fecha>y.fecha?-1:1),[b,g]),Z=m===11?n+1:n,ee=m===11?0:m+1,W=`${ae[ee]} ${Z}`,F=c.useMemo(()=>o.expenses.filter(t=>O(t.fecha,Z,ee)&&t.idCompra!==null&&t.idCompra!==void 0),[o.expenses,Z,ee]),xe=c.useMemo(()=>E.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[E]),J=c.useMemo(()=>F.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[F]),te=$-xe,q=a-J-te,me=()=>{m===0?(D(11),j(t=>t-1)):D(t=>t-1)},he=()=>{const t=new Date;n===t.getFullYear()&&m===t.getMonth()||(m===11?(D(0),j(s=>s+1)):D(s=>s+1))},ue=()=>{const t=new Date;return n===t.getFullYear()&&m===t.getMonth()},oe=(t,s)=>!s||s===0?null:(t-s)/Math.abs(s)*100,pe=()=>{const t={totalIngresos:v,totalGastos:$,balance:T,ahorroRate:U,prevMonthLabel:L,prevTotalIngresos:d,prevTotalGastos:Y,gastosPorCategoria:G,ingresosPorCategoria:K,topGastos:w,gastoDiario:f,diaMasCaro:B,diasSinGastos:k,diasDelMes:r,transferencias:C,cuotasActivas:E,movimientos:z,cuentas:o.accounts,currency:l,proyeccion:{nextMonthLabel:W,totalIngresosEstimado:a,totalCuotasSiguiente:J,gastosRecurrentesEstimados:te,margenDisponible:q,cuotas:F}},s=Me(t,N),y=`cashe-resumen-${n}-${String(m+1).padStart(2,"0")}.md`;Ce(s,y)},h=t=>de(t,l);return p?e.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:e.jsx(Ne,{size:"lg"})}):e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 report-controls",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:me,className:"p-2 rounded-lg hover:bg-[var(--bg-secondary)] transition-colors",style:{color:"var(--text-secondary)"},title:"Mes anterior",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-xl font-bold min-w-[180px] text-center",style:{color:"var(--text-primary)"},children:N}),e.jsx("button",{onClick:he,disabled:ue(),className:"p-2 rounded-lg hover:bg-[var(--bg-secondary)] transition-colors disabled:opacity-30 disabled:cursor-not-allowed",style:{color:"var(--text-secondary)"},title:"Mes siguiente",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("button",{onClick:pe,className:"flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Exportar MD"]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Resumen ejecutivo"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(_,{label:"Total ingresos",value:h(v),accent:"var(--accent-green)"}),e.jsx(_,{label:"Total gastos",value:h($),accent:"var(--accent-red)"}),e.jsx(_,{label:"Balance neto",value:h(T),accent:T>=0?"var(--accent-green)":"var(--accent-red)"}),e.jsx(_,{label:"Tasa de ahorro",value:`${U}%`,accent:"var(--accent-primary)"})]})]}),e.jsxs("div",{className:"report-section rounded-2xl p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-4",style:{color:"var(--text-muted)"},children:["Comparativa vs ",L]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ie,{label:"Ingresos",prev:h(d),actual:h(v),pct:oe(v,d),positiveIsGood:!0}),e.jsx(ie,{label:"Gastos",prev:h(Y),actual:h($),pct:oe($,Y),positiveIsGood:!1})]})]}),e.jsxs("div",{className:"report-section rounded-2xl p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-4",style:{color:"var(--text-muted)"},children:"EstadÃ­sticas del mes"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(re,{label:"Gasto diario",value:h(f)}),e.jsx(re,{label:"DÃ­a mÃ¡s caro",value:B?`${I(B.fecha,"short")} â€” ${h(B.total)}`:"â€”"}),e.jsx(re,{label:"DÃ­as sin gastos",value:`${k} de ${r}`})]})]}),(Q.length>0||X.length>0)&&e.jsxs("div",{className:"report-section grid grid-cols-1 lg:grid-cols-2 gap-6 print-charts",children:[Q.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Gastos por categorÃ­a"}),e.jsx(ne,{data:Q,loading:!1,currency:l})]}),X.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Ingresos por categorÃ­a"}),e.jsx(ne,{data:X,loading:!1,currency:l})]})]}),o.accounts.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Balance por cuenta"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Cuenta"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Saldo actual"})]})}),e.jsx("tbody",{children:o.accounts.filter(t=>!t.ocultaDelBalance).map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nombre}),e.jsx("td",{className:"px-4 py-2.5",style:{color:"var(--text-secondary)"},children:t.tipo}),e.jsx("td",{className:"px-4 py-2.5 text-right font-medium",style:{color:t.balanceActual>=0?"var(--accent-green)":"var(--accent-red)"},children:h(t.balanceActual)})]},t.id))})]})})]}),G.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Gastos por categorÃ­a"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"CategorÃ­a"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"%"})]})}),e.jsx("tbody",{children:G.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.name}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.value)}),e.jsxs("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--text-secondary)"},children:[t.percentage.toFixed(1),"%"]})]},t.name))})]})})]}),K.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Ingresos por categorÃ­a"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"CategorÃ­a"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"%"})]})}),e.jsx("tbody",{children:K.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.name}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.value)}),e.jsxs("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--text-secondary)"},children:[t.percentage.toFixed(1),"%"]})]},t.name))})]})})]}),E.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Cuotas activas (",E.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"DescripciÃ³n"}),e.jsx("th",{className:"text-center px-4 py-3 font-medium",children:"Cuotas"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto mensual"})]})}),e.jsx("tbody",{children:E.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nota||"Sin descripciÃ³n"}),e.jsx("td",{className:"px-4 py-2.5 text-center",style:{color:"var(--text-secondary)"},children:t.cuota}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.monto)})]},t.id))})]})})]}),e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["ProyecciÃ³n â€” ",W]}),e.jsxs("div",{className:"rounded-2xl p-5 mb-4 space-y-2",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Ingresos recurrentes de ",N,e.jsx("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:"(se excluyen regalos, reintegros y otros ingresos puntuales)"})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-green)"},children:["+ ",h(a)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Cuotas comprometidas en ",W,e.jsxs("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:["(",F.length," cuota",F.length!==1?"s":""," de tarjeta)"]})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-red)"},children:["âˆ’ ",h(J)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Gastos corrientes estimados",e.jsxs("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:["(base: gastos sin cuotas de ",N,")"]})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-red)"},children:["âˆ’ ",h(te)]})]}),e.jsx("div",{className:"pt-2 mt-1",style:{borderTop:"1px solid var(--border-subtle)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:["Lo que podÃ©s ahorrar o invertir en ",W]}),e.jsxs("p",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["Si tus gastos se repiten igual que en ",N]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:q>0?"var(--accent-green)":"var(--accent-red)"},children:h(q)}),a>0&&e.jsxs("p",{className:"text-xs font-medium mt-0.5",style:{color:q>0?"var(--accent-green)":"var(--accent-red)"},children:[Math.round(q/a*100),"% del ingreso recurrente"]})]})]})})]}),F.length>0&&e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"DescripciÃ³n"}),e.jsx("th",{className:"text-center px-4 py-3 font-medium",children:"Cuota"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"})]})}),e.jsxs("tbody",{children:[F.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nota||"Sin descripciÃ³n"}),e.jsx("td",{className:"px-4 py-2.5 text-center",style:{color:"var(--text-secondary)"},children:t.cuota}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.monto)})]},t.id)),e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("td",{className:"px-4 py-2.5 font-semibold",colSpan:2,style:{color:"var(--text-primary)"},children:"Total cuotas"}),e.jsx("td",{className:"px-4 py-2.5 text-right font-semibold",style:{color:"var(--text-primary)"},children:h(J)})]})]})]})})]}),w.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Top 5 gastos del mes"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Nota"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden sm:table-cell",children:"Cuenta"})]})}),e.jsx("tbody",{children:w.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:I(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2.5 max-w-[200px] truncate",children:t.nota||"â€”"}),e.jsx("td",{className:"px-4 py-2.5 text-right font-medium",style:{color:"var(--accent-red)"},children:h(t.monto)}),e.jsx("td",{className:"px-4 py-2.5 hidden sm:table-cell",style:{color:"var(--text-secondary)"},children:t.cuenta})]},t.id))})]})})]}),C.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Transferencias (",C.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Desde"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Hacia"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"})]})}),e.jsx("tbody",{children:C.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:I(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2.5",children:t.cuentaSaliente}),e.jsx("td",{className:"px-4 py-2.5",children:t.cuentaEntrante}),e.jsx("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--accent-blue)"},children:h(t.montoSaliente)})]},t.id))})]})})]}),z.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Movimientos del mes (",z.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden sm:table-cell",children:"CategorÃ­a"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden md:table-cell",children:"Cuenta"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden lg:table-cell",children:"Nota"})]})}),e.jsx("tbody",{children:z.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:I(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded",style:{backgroundColor:t.tipo==="ingreso"?"var(--accent-green-subtle, rgba(34,197,94,0.1))":"var(--accent-red-subtle, rgba(239,68,68,0.1))",color:t.tipo==="ingreso"?"var(--accent-green)":"var(--accent-red)"},children:t.tipo==="ingreso"?"Ingreso":"Gasto"})}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",style:{color:t.tipo==="ingreso"?"var(--accent-green)":"var(--accent-red)"},children:h(t.monto)}),e.jsx("td",{className:"px-4 py-2 hidden sm:table-cell",style:{color:"var(--text-secondary)"},children:t.categoria||"â€”"}),e.jsx("td",{className:"px-4 py-2 hidden md:table-cell",style:{color:"var(--text-secondary)"},children:t.cuenta}),e.jsx("td",{className:"px-4 py-2 max-w-[200px] truncate hidden lg:table-cell",style:{color:"var(--text-secondary)"},children:t.nota||"â€”"})]},t.id))})]})})]}),z.length===0&&C.length===0&&e.jsxs("div",{className:"text-center py-16",style:{color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("p",{className:"text-sm",children:["No hay movimientos en ",N]})]})]})}function _({label:u,value:p,accent:i}){return e.jsxs("div",{className:"report-section rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-muted)"},children:u}),e.jsx("p",{className:"text-xl font-bold",style:{color:i||"var(--text-primary)"},children:p})]})}function ie({label:u,prev:p,actual:i,pct:o,positiveIsGood:x}){const l=o===null?"var(--text-secondary)":o>0===x?"var(--accent-green)":"var(--accent-red)";return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:u}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Anterior: ",p]}),e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:["Actual: ",i]}),o!==null&&e.jsxs("p",{className:"text-xs font-medium",style:{color:l},children:[o>=0?"+":"",o.toFixed(1),"%"]})]})]})}function re({label:u,value:p}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:u}),e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:p})]})}export{Ee as default};
