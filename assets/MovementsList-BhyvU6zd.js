import{u as ke,g as Ne,r as c,j as e,f as j,d as se,a6 as Ce,a7 as we,G as Se,a8 as te}from"./index-CKWgcbuo.js";import{D as Le}from"./DateRangePicker-581Jnx40.js";import{S as Ae}from"./SortDropdown-8-fXskt5.js";function Be({title:re,movements:T,accounts:F,categories:R,loading:ae,onMovementClick:W,onMovementDelete:$,onBulkDelete:H,onBulkUpdate:U,onAddClick:I,type:r}){const oe=ke(),{showError:P}=Ne(),[f,q]=c.useState({from:null,to:null}),[p,J]=c.useState([]),[y,K]=c.useState([]),[S,G]=c.useState(""),[E,le]=c.useState(!1),[v,M]=c.useState(null),[l,Q]=c.useState("ARS"),[h,O]=c.useState(!1),[u,k]=c.useState(new Set),[D,g]=c.useState(null),[N,b]=c.useState(""),[C,B]=c.useState(!1),L=`cashe-sort-${r}`,[A,X]=c.useState({sortBy:"date",sortOrder:"desc"});c.useEffect(()=>{const s=localStorage.getItem(L);if(s)try{const t=JSON.parse(s);t.sortBy&&t.sortOrder&&X(t)}catch(t){console.error("Error parsing sort preference:",t)}},[L]),c.useEffect(()=>{localStorage.setItem(L,JSON.stringify(A))},[A,L]);const ne=c.useMemo(()=>r==="transferencia"?[{id:"date",label:"Fecha",defaultOrder:"desc"},{id:"amount",label:"Monto",defaultOrder:"desc"},{id:"accountFrom",label:"Cuenta origen",defaultOrder:"asc"},{id:"accountTo",label:"Cuenta destino",defaultOrder:"asc"}]:[{id:"date",label:"Fecha",defaultOrder:"desc"},{id:"amount",label:"Monto",defaultOrder:"desc"},{id:"category",label:"Categoría",defaultOrder:"asc"},{id:"account",label:"Cuenta",defaultOrder:"asc"}],[r]),d=c.useMemo(()=>{let s=[...T];if(f.from){const a=new Date(f.from);a.setHours(0,0,0,0),s=s.filter(i=>new Date(i.fecha)>=a)}if(f.to){const a=new Date(f.to);a.setHours(23,59,59,999),s=s.filter(i=>new Date(i.fecha)<=a)}if(p.length>0&&(r==="transferencia"?s=s.filter(a=>p.includes(a.cuentaSaliente)||p.includes(a.cuentaEntrante)):s=s.filter(a=>p.includes(a.cuenta))),y.length>0&&r!=="transferencia"&&(s=s.filter(a=>y.includes(a.categoria))),S.trim()){const a=S.toLowerCase().trim();s=s.filter(i=>{const m=(i.nota||"").toLowerCase(),ve=(i.categoria||"").toLowerCase(),je=(i.cuenta||"").toLowerCase(),be=(i.cuentaSaliente||"").toLowerCase(),ye=(i.cuentaEntrante||"").toLowerCase();return m.includes(a)||ve.includes(a)||je.includes(a)||be.includes(a)||ye.includes(a)})}const{sortBy:t,sortOrder:o}=A,x=o==="asc"?1:-1;return s.sort((a,i)=>{let m=0;switch(t){case"date":m=new Date(a.fecha)-new Date(i.fecha);break;case"amount":r==="transferencia"?m=(a.montoSaliente||0)-(i.montoSaliente||0):m=(a.monto||0)-(i.monto||0);break;case"category":m=(a.categoria||"").localeCompare(i.categoria||"");break;case"account":m=(a.cuenta||"").localeCompare(i.cuenta||"");break;case"accountFrom":m=(a.cuentaSaliente||"").localeCompare(i.cuentaSaliente||"");break;case"accountTo":m=(a.cuentaEntrante||"").localeCompare(i.cuentaEntrante||"");break;default:m=0}return m*x}),s},[T,f,p,y,S,r,A]),V=c.useMemo(()=>{if(r==="transferencia")if(l==="ARS"){const s=d.reduce((o,x)=>o+(x.montoSaliente||0),0),t=d.reduce((o,x)=>o+(x.montoEntrante||0),0);return{totalSaliente:s,totalEntrante:t}}else{const s=d.reduce((o,x)=>o+(x.montoSalienteDolares||0),0),t=d.reduce((o,x)=>o+(x.montoEntranteDolares||0),0);return{totalSaliente:s,totalEntrante:t}}else return l==="ARS"?{total:d.reduce((t,o)=>t+(o.montoPesos||o.monto||0),0)}:{total:d.reduce((t,o)=>t+(o.montoDolares||0),0)}},[d,r,l]),ce=s=>{J(t=>t.includes(s)?t.filter(o=>o!==s):[...t,s])},ie=s=>{K(t=>t.includes(s)?t.filter(o=>o!==s):[...t,s])},de=()=>{q({from:null,to:null}),J([]),K([]),G("")},z=[f.from||f.to,p.length>0,y.length>0,S.trim().length>0].filter(Boolean).length,Y=()=>{O(!h),k(new Set)},Z=s=>{const t=new Set(u);t.has(s)?t.delete(s):t.add(s),k(t)},xe=()=>{const s=new Set(d.map(t=>t.rowIndex||t.id));k(s)},ue=()=>{k(new Set)},_=()=>d.filter(s=>u.has(s.rowIndex||s.id)),me=async()=>{if(H){B(!0);try{const s=_();await H(s),k(new Set),O(!1),g(null)}catch(s){console.error("Error in bulk delete:",s),P("No se pudieron eliminar los movimientos",s.message)}finally{B(!1)}}},ee=async()=>{if(!(!U||!N)){B(!0);try{const s=_();await U(s,D==="editAccount"?"cuenta":"categoria",N),k(new Set),O(!1),g(null),b("")}catch(s){console.error("Error in bulk update:",s),P("No se pudieron actualizar los movimientos",s.message)}finally{B(!1)}}},n=()=>{switch(r){case"ingreso":return"var(--accent-green)";case"gasto":return"var(--accent-red)";case"transferencia":return"var(--accent-blue)";default:return"var(--accent-primary)"}},w=()=>{switch(r){case"ingreso":return"rgba(34, 197, 94, 0.15)";case"gasto":return"rgba(239, 68, 68, 0.15)";case"transferencia":return"rgba(59, 130, 246, 0.15)";default:return"rgba(96, 165, 250, 0.15)"}},he=(s,t)=>{s.stopPropagation(),M(t)},ge=()=>{v&&($==null||$(v),M(null))},fe=()=>e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl skeleton"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-28 skeleton"}),e.jsx("div",{className:"h-3 w-40 skeleton"})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"h-5 w-24 skeleton ml-auto"}),e.jsx("div",{className:"h-3 w-16 skeleton ml-auto"})]})]})},s))}),pe=()=>e.jsxs("div",{className:"rounded-2xl p-8 text-center",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:w()},children:r==="transferencia"?e.jsx("svg",{className:"w-10 h-10",style:{color:n()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}):r==="ingreso"?e.jsx("svg",{className:"w-10 h-10",style:{color:n()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):e.jsx("svg",{className:"w-10 h-10",style:{color:n()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsxs("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:["Sin ",r==="transferencia"?"transferencias":r==="ingreso"?"ingresos":"gastos"]}),e.jsx("p",{className:"text-sm mb-6",style:{color:"var(--text-secondary)"},children:z>0?"No se encontraron movimientos con los filtros seleccionados":`Aun no has registrado ningun ${r==="transferencia"?"a":""} ${r}`}),e.jsxs("button",{onClick:()=>I?I():oe("/nuevo"),className:"px-6 py-3 rounded-xl font-medium text-white transition-all duration-200 hover:opacity-90",style:{backgroundColor:n()},children:["Agregar ",r==="transferencia"?"transferencia":r]})]});return ae?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-6 w-24 skeleton"}),e.jsx("div",{className:"h-8 w-32 skeleton"})]}),fe()]}):e.jsxs("div",{className:"space-y-4",children:[h&&e.jsx("div",{className:"sticky top-14 z-40 rounded-2xl p-3 animate-fade-in",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--accent-primary)"},children:e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:[u.size," seleccionado",u.size!==1?"s":""]}),e.jsx("button",{onClick:u.size===d.length?ue:xe,className:"text-xs px-2 py-1 rounded-lg transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)"},children:u.size===d.length?"Deseleccionar todo":"Seleccionar todo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>g("delete"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"rgba(239, 68, 68, 0.15)",color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]}),e.jsxs("button",{onClick:()=>g("editAccount"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"rgba(96, 165, 250, 0.15)",color:"var(--accent-blue)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Cuenta"]}),r!=="transferencia"&&e.jsxs("button",{onClick:()=>g("editCategory"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"rgba(20, 184, 166, 0.15)",color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Categoría"]})]}),e.jsx("button",{onClick:Y,className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:"Cancelar"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:re}),e.jsxs("div",{className:"flex items-center gap-2",children:[!h&&d.length>0&&e.jsx("button",{onClick:Y,className:"p-2 rounded-xl transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},title:"Selección múltiple",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h7M4 12h7m-7 7h7m5-14v14m0-14l3 3m-3-3l-3 3m3 11l3-3m-3 3l-3-3"})})}),e.jsxs("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:"var(--bg-tertiary)"},children:[e.jsxs("button",{onClick:()=>Q("ARS"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:l==="ARS"?"var(--accent-primary)":"transparent",color:l==="ARS"?"white":"var(--text-secondary)",boxShadow:l==="ARS"?"0 4px 12px var(--accent-primary-glow)":"none"},children:[e.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),e.jsxs("button",{onClick:()=>Q("USD"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:l==="USD"?"var(--accent-green)":"transparent",color:l==="USD"?"white":"var(--text-secondary)",boxShadow:l==="USD"?"0 4px 12px rgba(0, 217, 154, 0.3)":"none"},children:[e.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]}),e.jsx(Le,{value:f,onChange:q})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>le(!E),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200",style:{backgroundColor:E?w():"var(--bg-tertiary)",color:E?n():"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{children:"Filtros"}),z>0&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:n()},children:z})]}),e.jsx(Ae,{options:ne,value:A,onChange:X,storageKey:L})]}),E&&e.jsxs("div",{className:"p-4 rounded-2xl space-y-4 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:S,onChange:s=>G(s.target.value),placeholder:r==="transferencia"?"Buscar por cuenta...":"Buscar por nota, categoria, cuenta...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl text-sm",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Cuentas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(s=>e.jsx("button",{onClick:()=>ce(s.nombre),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200",style:{backgroundColor:p.includes(s.nombre)?n():"var(--bg-tertiary)",color:p.includes(s.nombre)?"white":"var(--text-secondary)"},children:s.nombre},s.nombre))})]}),r!=="transferencia"&&R.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--text-secondary)"},children:"Categorias"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:R.map(s=>e.jsx("button",{onClick:()=>ie(s),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200",style:{backgroundColor:y.includes(s)?n():"var(--bg-tertiary)",color:y.includes(s)?"white":"var(--text-secondary)"},children:s},s))})]}),z>0&&e.jsx("button",{onClick:de,className:"text-xs font-medium transition-colors hover:opacity-80",style:{color:n()},children:"Limpiar filtros"})]}),e.jsxs("div",{className:"rounded-2xl p-4 relative overflow-hidden",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${w()} 0%, transparent 70%)`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("p",{className:"text-xs mb-3",style:{color:"var(--text-secondary)"},children:[d.length," ",r==="transferencia"?"transferencia":"movimiento",d.length!==1?"s":""]}),r==="transferencia"?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs mb-1 flex items-center gap-1",style:{color:"var(--accent-red)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7"})}),"Total saliente"]}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-red)"},children:j(V.totalSaliente,l)})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs mb-1 flex items-center gap-1 justify-end",style:{color:"var(--accent-green)"},children:["Total entrante",e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l-4-4m0 0l4-4m-4 4h14"})})]}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--accent-green)"},children:j(V.totalEntrante,l)})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:n()},children:j(V.total,l)})]})]})]}),d.length===0?pe():e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 text-xs font-semibold",style:{color:"var(--text-secondary)"},children:[h&&e.jsx("div",{className:"w-6"}),e.jsx("div",{className:"w-12"})," ",e.jsx("div",{className:"flex-1",children:"Descripción"}),e.jsx("div",{className:"w-24 text-center",children:"Fecha"}),r!=="transferencia"&&e.jsx("div",{className:"w-32 text-center",children:"Cuenta"}),e.jsx("div",{className:"w-28 text-right",children:"Monto"}),e.jsx("div",{className:"w-10"})," "]}),d.map((s,t)=>{const o=s.rowIndex||s.id,x=u.has(o);return e.jsx("div",{className:`group rounded-2xl p-4 transition-all duration-200 ${h?"":"hover:scale-[1.01]"}`,style:{backgroundColor:x?w():"var(--bg-secondary)",border:x?`1px solid ${n()}`:"1px solid transparent"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[h&&e.jsx("button",{onClick:()=>Z(o),className:"w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0 transition-all duration-200",style:{backgroundColor:x?n():"var(--bg-tertiary)",border:x?"none":"2px solid var(--border-subtle)"},children:x&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("button",{onClick:()=>h?Z(o):W==null?void 0:W(s),className:"flex items-center gap-3 flex-1 min-w-0 text-left",style:{backgroundColor:"transparent"},children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-transform duration-200 ${h?"":"group-hover:scale-110"}`,style:{backgroundColor:w()},children:r==="transferencia"?e.jsx("svg",{className:"w-6 h-6",style:{color:n()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}):r==="ingreso"?e.jsx("svg",{className:"w-6 h-6",style:{color:n()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):e.jsx("svg",{className:"w-6 h-6",style:{color:n()},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("p",{className:"font-semibold truncate",style:{color:"var(--text-primary)"},children:r==="transferencia"?"Transferencia":s.categoria||"-"}),s.cuota&&e.jsxs("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium flex items-center gap-1",style:{backgroundColor:"rgba(20, 184, 166, 0.15)",color:"var(--accent-primary)"},children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),s.cuota]}),r!=="transferencia"&&s.categoria&&!s.cuota&&e.jsx("span",{className:"px-2 py-0.5 rounded-md text-xs font-medium hidden sm:inline-block",style:{backgroundColor:w(),color:n()},children:s.categoria.split(" ")[0]})]}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:r==="transferencia"?`${s.cuentaSaliente} → ${s.cuentaEntrante}`:s.cuenta}),s.nota&&e.jsxs("p",{className:"text-xs truncate mt-0.5 italic",style:{color:"var(--text-secondary)",opacity:.7},children:['"',s.nota,'"']})]}),e.jsx("div",{className:"hidden lg:block text-center flex-shrink-0 w-24",children:e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:se(s.fecha,"short")})}),r!=="transferencia"&&e.jsx("div",{className:"hidden lg:block text-center flex-shrink-0 w-32",children:e.jsx("p",{className:"text-sm truncate",style:{color:"var(--text-secondary)"},children:s.cuenta})}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-xl font-bold lg:text-lg",style:{color:n()},children:r==="transferencia"?j(l==="ARS"?s.montoSaliente:s.montoSalienteDolares||0,l):r==="ingreso"?`+${j(l==="ARS"?s.montoPesos||s.monto:s.montoDolares||0,l)}`:`-${j(l==="ARS"?s.montoPesos||s.monto:s.montoDolares||0,l)}`}),e.jsx("p",{className:"text-xs lg:hidden",style:{color:"var(--text-secondary)"},children:se(s.fecha,"short")})]})]}),s.attachmentUrl&&!h&&e.jsx("button",{onClick:a=>{a.stopPropagation(),we(s.attachmentUrl,s.attachmentName)},className:"p-2 rounded-xl flex-shrink-0 transition-all hover:scale-105",style:{backgroundColor:"var(--bg-tertiary)"},title:s.attachmentName?`Descargar: ${s.attachmentName}`:"Descargar adjunto",children:Ce(s.attachmentName)?e.jsx("img",{src:s.attachmentUrl,alt:"Adjunto",className:"w-6 h-6 rounded object-cover"}):e.jsx("svg",{className:"w-4 h-4",style:{color:"var(--accent-primary)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),!h&&e.jsx("button",{onClick:a=>he(a,s),className:"p-2 rounded-xl flex-shrink-0 transition-all duration-200 opacity-0 group-hover:opacity-100 hover:bg-red-500/20",style:{color:"var(--text-secondary)"},title:"Eliminar",children:e.jsx("svg",{className:"w-5 h-5 hover:text-red-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},o)})]}),v&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>M(null)}),e.jsx("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},children:e.jsx("svg",{className:"w-7 h-7",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Eliminar movimiento"}),e.jsxs("p",{className:"text-sm mb-5",style:{color:"var(--text-secondary)"},children:["¿Estas seguro de que quieres eliminar este movimiento?",e.jsx("br",{}),e.jsx("span",{className:"font-semibold text-base",style:{color:n()},children:r==="transferencia"?j(l==="ARS"?v.montoSaliente:v.montoSalienteDolares||0,l):j(l==="ARS"?v.montoPesos||v.monto:v.montoDolares||0,l)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>M(null),className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:ge,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90",style:{backgroundColor:"var(--accent-red)"},children:"Eliminar"})]})]})})]}),D==="delete"&&e.jsx(Se,{isOpen:!0,title:"Eliminar movimientos",message:`¿Estás seguro de que quieres eliminar ${u.size} movimiento${u.size!==1?"s":""}? Esta acción no se puede deshacer.`,confirmText:C?"Eliminando...":"Eliminar todos",variant:"danger",loading:C,onConfirm:me,onClose:()=>g(null)}),D==="editAccount"&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>{g(null),b("")}}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Cambiar cuenta"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Cambiar la cuenta de ",u.size," movimiento",u.size!==1?"s":""]}),e.jsx("div",{className:"mb-4",children:e.jsx(te,{value:N,onChange:s=>b(s.target.value),options:F.map(s=>({value:s.nombre,label:s.nombre})),placeholder:"Seleccionar cuenta..."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{g(null),b("")},className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:ee,disabled:C||!N,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-blue)"},children:C?"Actualizando...":"Aplicar"})]})]})]}),D==="editCategory"&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>{g(null),b("")}}),e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl p-6 animate-scale-in",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Cambiar categoría"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Cambiar la categoría de ",u.size," movimiento",u.size!==1?"s":""]}),e.jsx("div",{className:"mb-4",children:e.jsx(te,{value:N,onChange:s=>b(s.target.value),options:R.map(s=>({value:s,label:s})),placeholder:"Seleccionar categoría..."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{g(null),b("")},className:"flex-1 py-3 rounded-xl font-medium transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:"Cancelar"}),e.jsx("button",{onClick:ee,disabled:C||!N,className:"flex-1 py-3 rounded-xl font-medium text-white transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)"},children:C?"Actualizando...":"Aplicar"})]})]})]})]})}export{Be as M};
