import{r as l,j as o,f as k,h as I,k as L,a5 as de,b as H,a6 as Je,c as ue}from"./index-Dq2VYX45.js";import{D as Qe}from"./DateRangePicker-CE7hUfqb.js";import{c as F,i as X,a as Ne,s as Oe,D as V,b as Ae,d as et,Z as G,L as U,u as R,e as tt,f as rt,g as J,h as Ee,r as ee,j as at,k as nt,l as st,m as te,n as ot,o as it,p as lt,q as pe,t as ct,v as dt,w as De,C as ut,x as pt,y as M,z as me,A as Se,B as mt,E as re,F as Ie,G as ke,H as Ce,I as ft,J as vt,K as xt,M as fe,N as yt,R as ht,S as gt,O as bt,P as Le,Q as jt,T as Pt,U as wt,V as Nt,W as Ot,X as At,Y as Re,_ as ve,$ as Et,a0 as Dt,a1 as T,a2 as St,a3 as It,a4 as kt,a5 as Ct,a6 as Lt,a7 as ae,a8 as Rt,a9 as _t,aa as Tt,ab as ne,ac as Kt,ad as _e,ae as Te,af as xe}from"./PieChart-3w47wqAN.js";import{L as Ke,C as $e}from"./CartesianGrid-BVnLNIZe.js";import{s as W}from"./subMonths-DmgSuxy0.js";function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q.apply(null,arguments)}var Me=e=>{var{cx:t,cy:r,r:a,className:n}=e,i=F("recharts-dot",n);return X(t)&&X(r)&&X(a)?l.createElement("circle",Q({},Oe(e),Ne(e),{className:i,cx:t,cy:r,r:a})):null},$t=["points"];function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ye(Object(r),!0).forEach(function(a){Mt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Mt(e,t,r){return(t=Wt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wt(e){var t=Bt(e,"string");return typeof t=="symbol"?t:t+""}function Bt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B.apply(null,arguments)}function zt(e,t){if(e==null)return{};var r,a,n=Ft(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ft(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Vt(e){var{option:t,dotProps:r,className:a}=e;if(l.isValidElement(t))return l.cloneElement(t,r);if(typeof t=="function")return t(r);var n=F(a,typeof t!="boolean"?t.className:""),i=r??{},{points:s}=i,c=zt(i,$t);return l.createElement(Me,B({},c,{className:n}))}function Gt(e,t){return e==null?!1:t?!0:e.length===1}function Ut(e){var{points:t,dot:r,className:a,dotClassName:n,dataKey:i,baseProps:s,needClip:c,clipPathId:d,zIndex:u=V.scatter}=e;if(!Gt(t,r))return null;var p=Ae(r),f=et(r),x=t.map((b,y)=>{var N,j,h=Z(Z(Z({r:3},s),f),{},{index:y,cx:(N=b.x)!==null&&N!==void 0?N:void 0,cy:(j=b.y)!==null&&j!==void 0?j:void 0,dataKey:i,value:b.value,payload:b.payload,points:t});return l.createElement(Vt,{key:"dot-".concat(y),option:r,dotProps:h,className:n})}),v={};return c&&d!=null&&(v.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(d,")")),l.createElement(G,{zIndex:u},l.createElement(U,B({className:a},v),x))}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?he(Object(r),!0).forEach(function(a){Yt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yt(e,t,r){return(t=Ht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ht(e){var t=Xt(e,"string");return typeof t=="symbol"?t:t+""}function Xt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zt=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:n,dataKey:i,clipPath:s}=e;if(n===!1||t.x==null||t.y==null)return null;var c={index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},d=q(q(q({},c),Ee(n)),Ne(n)),u;return l.isValidElement(n)?u=l.cloneElement(n,d):typeof n=="function"?u=n(d):u=l.createElement(Me,d),l.createElement(U,{className:"recharts-active-dot",clipPath:s},u)};function qt(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:n,clipPath:i,zIndex:s=V.activeDot}=e,c=R(tt),d=rt();if(t==null||d==null)return null;var u=t.find(p=>d.includes(p.payload));return J(u)?null:l.createElement(G,{zIndex:s},l.createElement(Zt,{point:u,childIndex:Number(c),mainColor:r,dataKey:n,activeDot:a,clipPath:i}))}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ge(Object(r),!0).forEach(function(a){Jt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jt(e,t,r){return(t=Qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(e){var t=er(e,"string");return typeof t=="symbol"?t:t+""}function er(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z.apply(null,arguments)}var tr=(e,t)=>{var r;if(l.isValidElement(e))r=l.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{if(!M(t.x1)||!M(t.y1)||!M(t.x2)||!M(t.y2))return null;r=l.createElement("line",z({},t,{className:"recharts-reference-line-line"}))}return r},rr=(e,t,r,a,n,i)=>{var{x:s,width:c}=i,d=n.y.apply(e,{position:r});if(Se(d)||t==="discard"&&!n.y.isInRange(d))return null;var u=[{x:s+c,y:d},{x:s,y:d}];return a==="left"?u.reverse():u},ar=(e,t,r,a,n,i)=>{var{y:s,height:c}=i,d=n.x.apply(e,{position:r});if(Se(d)||t==="discard"&&!n.x.isInRange(d))return null;var u=[{x:d,y:s+c},{x:d,y:s}];return a==="top"?u.reverse():u},nr=(e,t,r,a)=>{var n=e.map(i=>a.apply(i,{position:r}));return t==="discard"&&n.some(i=>!a.isInRange(i))?null:n},sr=(e,t,r,a,n,i)=>{var{x:s,y:c,segment:d,ifOverflow:u}=i,p=me(s),f=me(c);return f?rr(c,u,r,n,e,t):p?ar(s,u,r,a,e,t):d!=null&&d.length===2?nr(d,u,r,e):null};function or(e){var t=at();return l.useEffect(()=>(t(nt(e)),()=>{t(st(e))})),null}function ir(e){var{xAxisId:t,yAxisId:r,shape:a,className:n,ifOverflow:i}=e,s=te(),c=ot(),d=R(w=>it(w,t)),u=R(w=>lt(w,r)),p=R(w=>pe(w,"xAxis",t,s)),f=R(w=>pe(w,"yAxis",r,s)),x=ct();if(!c||!x||d==null||u==null||p==null||f==null)return null;var v=dt({x:p,y:f}),b=sr(v,x,e.position,d.orientation,u.orientation,e);if(!b)return null;var[{x:y,y:N},{x:j,y:h}]=b,m=i==="hidden"?"url(#".concat(c,")"):void 0,g=be(be({clipPath:m},De(e)),{},{x1:y,y1:N,x2:j,y2:h}),P=mt({x1:y,y1:N,x2:j,y2:h});return l.createElement(G,{zIndex:e.zIndex},l.createElement(U,{className:F("recharts-reference-line",n)},tr(a,g),l.createElement(ut,z({},P,{lowerWidth:P.width,upperWidth:P.width}),l.createElement(pt,{label:e.label}),e.children)))}var lr={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:V.line};function We(e){var t=ee(e,lr);return l.createElement(l.Fragment,null,l.createElement(or,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),l.createElement(ir,t))}We.displayName="ReferenceLine";var Be=(e,t,r,a)=>ke(e,"xAxis",t,a),ze=(e,t,r,a)=>Ce(e,"xAxis",t,a),Fe=(e,t,r,a)=>ke(e,"yAxis",r,a),Ve=(e,t,r,a)=>Ce(e,"yAxis",r,a),cr=re([Ie,Be,Fe,ze,Ve],(e,t,r,a,n)=>xt(e,"xAxis")?fe(t,a,!1):fe(r,n,!1)),dr=(e,t,r,a,n)=>n;function ur(e){return e.type==="line"}var pr=re([vt,dr],(e,t)=>e.filter(ur).find(r=>r.id===t)),mr=re([Ie,Be,Fe,ze,Ve,pr,cr,ft],(e,t,r,a,n,i,s,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:p}=c;if(!(i==null||t==null||r==null||a==null||n==null||a.length===0||n.length===0||s==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:x}=i,v;if(x!=null&&x.length>0?v=x:v=d==null?void 0:d.slice(u,p+1),v!=null)return Rr({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:n,dataKey:f,bandSize:s,displayedData:v})}});function fr(e){var t=Ee(e),r=3,a=2;if(t!=null){var{r:n,strokeWidth:i}=t,s=Number(n),c=Number(i);return(Number.isNaN(s)||s<0)&&(s=r),(Number.isNaN(c)||c<0)&&(c=a),{r:s,strokeWidth:c}}return{r,strokeWidth:a}}var vr=["id"],xr=["type","layout","connectNulls","needClip","shape"],yr=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K.apply(null,arguments)}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?je(Object(r),!0).forEach(function(a){hr(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hr(e,t,r){return(t=gr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gr(e){var t=br(e,"string");return typeof t=="symbol"?t:t+""}function br(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function se(e,t){if(e==null)return{};var r,a,n=jr(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jr(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Pr=e=>{var{dataKey:t,name:r,stroke:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:a,value:Le(r,t),payload:e}]},wr=l.memo(e=>{var{dataKey:t,data:r,stroke:a,strokeWidth:n,fill:i,name:s,hide:c,unit:d,tooltipType:u,id:p}=e,f={dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Le(s,t),hide:c,type:u,color:a,unit:d,graphicalItemId:p}};return l.createElement(jt,{tooltipEntrySettings:f})}),Ge=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Nr(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],n=0;n<t;++n)a=[...a,...r];return a}var Or=(e,t,r)=>{var a=r.reduce((f,x)=>f+x);if(!a)return Ge(t,e);for(var n=Math.floor(e/a),i=e%a,s=t-e,c=[],d=0,u=0;d<r.length;u+=r[d],++d)if(u+r[d]>i){c=[...r.slice(0,d),i-u];break}var p=c.length%2===0?[0,s]:[s];return[...Nr(r,n),...c,...p].map(f=>"".concat(f,"px")).join(", ")};function Ar(e){var{clipPathId:t,points:r,props:a}=e,{dot:n,dataKey:i,needClip:s}=a,{id:c}=a,d=se(a,vr),u=Oe(d);return l.createElement(Ut,{points:r,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:s,clipPathId:t})}function Er(e){var{showLabels:t,children:r,points:a}=e,n=l.useMemo(()=>a==null?void 0:a.map(i=>{var s,c,d={x:(s=i.x)!==null&&s!==void 0?s:0,y:(c=i.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return D(D({},d),{},{value:i.value,payload:i.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[a]);return l.createElement(It,{value:t?n:void 0},r)}function Pe(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:n,props:i}=e,{type:s,layout:c,connectNulls:d,needClip:u,shape:p}=i,f=se(i,xr),x=D(D({},De(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:a,type:s,layout:c,connectNulls:d,strokeDasharray:n??i.strokeDasharray});return l.createElement(l.Fragment,null,(a==null?void 0:a.length)>1&&l.createElement(kt,K({shapeType:"curve",option:p},x,{pathRef:r})),l.createElement(Ar,{points:a,clipPathId:t,props:i}))}function Dr(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Sr(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:n,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:c,isAnimationActive:d,animationBegin:u,animationDuration:p,animationEasing:f,animateNewValues:x,width:v,height:b,onAnimationEnd:y,onAnimationStart:N}=r,j=n.current,h=Et(s,"recharts-line-"),m=l.useRef(h),[g,P]=l.useState(!1),w=!g,O=l.useCallback(()=>{typeof y=="function"&&y(),P(!1)},[y]),C=l.useCallback(()=>{typeof N=="function"&&N(),P(!0)},[N]),E=Dr(a.current),$=l.useRef(0);m.current!==h&&($.current=i.current,m.current=h);var oe=$.current;return l.createElement(Er,{points:s,showLabels:w},r.children,l.createElement(Dt,{animationId:h,begin:u,duration:p,isActive:d,easing:f,onAnimationEnd:O,onAnimationStart:C,key:h},S=>{var He=T(oe,E+oe,S),Y=Math.min(He,E),_;if(d)if(c){var Xe="".concat(c).split(/[,\s]+/gim).map(A=>parseFloat(A));_=Or(Y,E,Xe)}else _=Ge(E,Y);else _=c==null?void 0:String(c);if(S>0&&E>0&&(n.current=s,i.current=Math.max(i.current,Y)),j){var Ze=j.length/s.length,ie=S===1?s:s.map((A,qe)=>{var le=Math.floor(qe*Ze);if(j[le]){var ce=j[le];return D(D({},A),{},{x:T(ce.x,A.x,S),y:T(ce.y,A.y,S)})}return x?D(D({},A),{},{x:T(v*2,A.x,S),y:T(b/2,A.y,S)}):D(D({},A),{},{x:A.x,y:A.y})});return n.current=ie,l.createElement(Pe,{props:r,points:ie,clipPathId:t,pathRef:a,strokeDasharray:_})}return l.createElement(Pe,{props:r,points:s,clipPathId:t,pathRef:a,strokeDasharray:_})}),l.createElement(St,{label:r.label}))}function Ir(e){var{clipPathId:t,props:r}=e,a=l.useRef(null),n=l.useRef(0),i=l.useRef(null);return l.createElement(Sr,{props:r,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:n,pathRef:i})}var kr=(e,t)=>{var r,a;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Re(e.payload,t)}};class Cr extends l.Component{render(){var{hide:t,dot:r,points:a,className:n,xAxisId:i,yAxisId:s,top:c,left:d,width:u,height:p,id:f,needClip:x,zIndex:v}=this.props;if(t)return null;var b=F("recharts-line",n),y=f,{r:N,strokeWidth:j}=fr(r),h=Ae(r),m=N*2+j,g=x?"url(#clipPath-".concat(h?"":"dots-").concat(y,")"):void 0;return l.createElement(G,{zIndex:v},l.createElement(U,{className:b},x&&l.createElement("defs",null,l.createElement(Ot,{clipPathId:y,xAxisId:i,yAxisId:s}),!h&&l.createElement("clipPath",{id:"clipPath-dots-".concat(y)},l.createElement("rect",{x:d-m/2,y:c-m/2,width:u+m,height:p+m}))),l.createElement(At,{xAxisId:i,yAxisId:s,data:a,dataPointFormatter:kr,errorBarOffset:0},l.createElement(Ir,{props:this.props,clipPathId:y}))),l.createElement(qt,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:g}))}}var Ue={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:V.line,type:"linear"};function Lr(e){var t=ee(e,Ue),{activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:i,animationEasing:s,connectNulls:c,dot:d,hide:u,isAnimationActive:p,label:f,legendType:x,xAxisId:v,yAxisId:b,id:y}=t,N=se(t,yr),{needClip:j}=Pt(v,b),h=wt(),m=Nt(),g=te(),P=R($=>mr($,v,b,g,y));if(m!=="horizontal"&&m!=="vertical"||P==null||h==null)return null;var{height:w,width:O,x:C,y:E}=h;return l.createElement(Cr,K({},N,{id:y,connectNulls:c,dot:d,activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:i,animationEasing:s,isAnimationActive:p,hide:u,label:f,legendType:x,xAxisId:v,yAxisId:b,points:P,layout:m,height:w,width:O,left:C,top:E,needClip:j}))}function Rr(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:n,yAxisTicks:i,dataKey:s,bandSize:c,displayedData:d}=e;return d.map((u,p)=>{var f=Re(u,s);if(t==="horizontal"){var x=ve({axis:r,ticks:n,bandSize:c,entry:u,index:p}),v=J(f)?null:a.scale(f);return{x,y:v,value:f,payload:u}}var b=J(f)?null:r.scale(f),y=ve({axis:a,ticks:i,bandSize:c,entry:u,index:p});return b==null||y==null?null:{x:b,y,value:f,payload:u}}).filter(Boolean)}function _r(e){var t=ee(e,Ue),r=te();return l.createElement(ht,{id:t.id,type:"line"},a=>l.createElement(l.Fragment,null,l.createElement(gt,{legendPayload:Pr(t)}),l.createElement(wr,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),l.createElement(bt,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),l.createElement(Lr,K({},t,{id:a}))))}var Ye=l.memo(_r,yt);Ye.displayName="Line";var Tr=["axis"],Kr=l.forwardRef((e,t)=>l.createElement(Ct,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Tr,tooltipPayloadSearcher:Lt,categoricalChartProps:e,ref:t}));const we=["#f43f5e","#f97316","#eab308","#10b981","#14b8a6","#0ea5e9","#14b8a6","#ec4899","#6366f1","#84cc16"];function $r({data:e,loading:t,currency:r="ARS"}){if(t)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("div",{className:"h-4 w-32 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),o.jsx("div",{className:"h-64 flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!e||e.length===0)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Gastos por Categoria"}),o.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:o.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:i,payload:s})=>{if(i&&s&&s.length){const c=s[0].payload;return o.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:c.name}),o.jsx("p",{style:{color:"var(--accent-red)"},children:k(c.value)}),o.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[c.percentage.toFixed(1),"%"]})]})}return null},n=i=>{const{payload:s}=i;return o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:[s.slice(0,6).map((c,d)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)"},children:[o.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:c.color}}),o.jsx("span",{style:{color:"var(--text-secondary)"},children:c.value.length>12?c.value.substring(0,12)+"...":c.value})]},`legend-${d}`)),s.length>6&&o.jsxs("div",{className:"px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:["+",s.length-6," mas"]})]})};return o.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Gastos por categoría"}),o.jsx(ae,{width:"100%",height:240,children:o.jsxs(Rt,{children:[o.jsx(_t,{data:e,cx:"50%",cy:"45%",innerRadius:45,outerRadius:80,paddingAngle:2,dataKey:"value",nameKey:"name",children:e.map((i,s)=>o.jsx(Tt,{fill:we[s%we.length],stroke:"transparent"},`cell-${s}`))}),o.jsx(ne,{content:o.jsx(a,{})}),o.jsx(Ke,{content:n})]})})]})}function Mr({data:e,loading:t,currency:r="ARS"}){if(t)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("div",{className:"h-4 w-40 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),o.jsx("div",{className:"h-64 flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!e||e.length===0)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Ingresos vs Gastos"}),o.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:o.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:i,payload:s,label:c})=>i&&s&&s.length?o.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:c}),s.map((d,u)=>o.jsxs("p",{style:{color:d.color},children:[d.name,": ",k(d.value)]},u)),s.length===2&&o.jsxs("p",{className:"mt-1 pt-1 text-sm",style:{borderTop:"1px solid var(--border-subtle)",color:s[0].value-s[1].value>=0?"var(--accent-green)":"var(--accent-red)"},children:["Balance: ",k(s[0].value-s[1].value)]})]}):null,n=i=>{const s=Math.round(i*100)/100;return Math.abs(s)<.01?"0":s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(0)}K`:s.toFixed(0)};return o.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Ingresos vs Gastos"}),o.jsx(ae,{width:"100%",height:240,children:o.jsxs(Kt,{data:e,margin:{top:5,right:5,left:-15,bottom:0},children:[o.jsx($e,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",strokeOpacity:.5,vertical:!1}),o.jsx(_e,{dataKey:"month",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),o.jsx(Te,{tickFormatter:n,tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),o.jsx(ne,{content:o.jsx(a,{}),cursor:{fill:"var(--bg-tertiary)",opacity:.3}}),o.jsx(Ke,{wrapperStyle:{paddingTop:"8px"},formatter:i=>o.jsx("span",{style:{color:"var(--text-muted)",fontSize:"11px"},children:i})}),o.jsx(xe,{dataKey:"ingresos",name:"Ingresos",fill:"var(--accent-green)",radius:[3,3,0,0],maxBarSize:32}),o.jsx(xe,{dataKey:"gastos",name:"Gastos",fill:"var(--accent-red)",radius:[3,3,0,0],maxBarSize:32})]})})]})}function Wr({data:e,loading:t,currency:r="ARS"}){if(t)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("div",{className:"h-4 w-36 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),o.jsx("div",{className:"h-64 flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!e||e.length===0)return o.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Evolucion del Balance"}),o.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:o.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:u,payload:p,label:f})=>{if(u&&p&&p.length){const x=p[0].value;return o.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:f}),o.jsxs("p",{style:{color:x>=0?"var(--accent-green)":"var(--accent-red)"},children:["Balance: ",k(x)]})]})}return null},n=u=>{const p=Math.round(u*100)/100;return Math.abs(p)<.01?"0":p>=1e6||p<=-1e6?`${(p/1e6).toFixed(1)}M`:p>=1e3||p<=-1e3?`${(p/1e3).toFixed(0)}K`:p.toFixed(0)},i=e.map(u=>u.balance),s=Math.min(...i),c=Math.max(...i),d=(c-s)*.1||1e3;return o.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[o.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Evolución del balance"}),o.jsx(ae,{width:"100%",height:240,children:o.jsxs(Kr,{data:e,margin:{top:5,right:5,left:-15,bottom:0},children:[o.jsx($e,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",strokeOpacity:.5,vertical:!1}),o.jsx(_e,{dataKey:"month",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),o.jsx(Te,{tickFormatter:n,tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1,domain:[s-d,c+d]}),o.jsx(ne,{content:o.jsx(a,{})}),o.jsx(We,{y:0,stroke:"var(--text-muted)",strokeDasharray:"3 3",strokeOpacity:.3}),o.jsx(Ye,{type:"monotone",dataKey:"balance",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:0,r:3},activeDot:{r:5,fill:"var(--accent-primary)",stroke:"var(--bg-secondary)",strokeWidth:2}})]})})]})}const Br=[{label:"Este mes",getValue:()=>({from:L(new Date),to:I(new Date)})},{label:"3 meses",getValue:()=>({from:L(W(new Date,2)),to:I(new Date)})},{label:"6 meses",getValue:()=>({from:L(W(new Date,5)),to:I(new Date)})},{label:"12 meses",getValue:()=>({from:L(W(new Date,11)),to:I(new Date)})}];function Yr(){const[e,t]=l.useState([]),[r,a]=l.useState(!0),[n,i]=l.useState({from:L(W(new Date,5)),to:I(new Date)}),[s,c]=l.useState("ARS");l.useEffect(()=>{async function x(){try{a(!0);const v=await Je(1e3);t(v.movimientos||[])}catch(v){console.error("Error loading movements:",v)}finally{a(!1)}}x()},[]);const d=l.useMemo(()=>{if(!n.from||!n.to)return[];const x=new Date(n.from);x.setHours(0,0,0,0);const v=new Date(n.to);v.setHours(23,59,59,999);const b=e.filter(m=>{if(m.tipo!=="gasto")return!1;const g=new Date(m.fecha);return g>=x&&g<=v}),y={};let N=0,j=0;b.forEach(m=>{const g=m.categoria||"Sin categoria",P=g.replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||g,w=m.montoPesos||m.monto||0,O=m.montoDolares||0;N+=w,j+=O,y[P]||(y[P]={pesos:0,dolares:0}),y[P].pesos+=w,y[P].dolares+=O});const h=s==="ARS"?N:j;return Object.entries(y).map(([m,g])=>{const P=s==="ARS"?g.pesos:g.dolares;return{name:m,value:P,pesos:g.pesos,dolares:g.dolares,percentage:h>0?P/h*100:0}}).sort((m,g)=>g.value-m.value).slice(0,10)},[e,n,s]),u=l.useMemo(()=>!n.from||!n.to?[]:de({start:n.from,end:n.to}).map(v=>{const b=L(v),y=I(v),N=H(v,"yyyy-MM"),j=H(v,"MMM",{locale:ue});let h=0,m=0,g=0,P=0;return e.forEach(w=>{const O=new Date(w.fecha);if(O>=b&&O<=y){const C=w.montoPesos||w.monto||0,E=w.montoDolares||0;w.tipo==="ingreso"?(h+=C,g+=E):w.tipo==="gasto"&&(m+=C,P+=E)}}),{month:j.charAt(0).toUpperCase()+j.slice(1),monthKey:N,ingresos:s==="ARS"?h:g,gastos:s==="ARS"?m:P,ingresosPesos:h,gastosPesos:m,ingresosDolares:g,gastosDolares:P}}),[e,n,s]),p=l.useMemo(()=>{if(!n.from||!n.to)return[];const x=de({start:n.from,end:n.to}),v=[...e].sort((b,y)=>new Date(b.fecha)-new Date(y.fecha));return x.map(b=>{const y=I(b),N=H(b,"MMM",{locale:ue});let j=0,h=0;return v.forEach(m=>{if(new Date(m.fecha)<=y){const P=m.montoPesos||m.monto||0,w=m.montoDolares||0;m.tipo==="ingreso"?(j+=P,h+=w):m.tipo==="gasto"&&(j-=P,h-=w)}}),{month:N.charAt(0).toUpperCase()+N.slice(1),balance:s==="ARS"?j:h,balancePesos:j,balanceDolares:h}})},[e,n,s]),f=l.useMemo(()=>{if(!n.from||!n.to)return{totalIngresos:0,totalGastos:0,balance:0,savingsRate:0};const x=new Date(n.from);x.setHours(0,0,0,0);const v=new Date(n.to);v.setHours(23,59,59,999);let b=0,y=0,N=0,j=0;e.forEach(g=>{const P=new Date(g.fecha);if(P>=x&&P<=v){const w=g.montoPesos||g.monto||0,O=g.montoDolares||0;g.tipo==="ingreso"?(b+=w,N+=O):g.tipo==="gasto"&&(y+=w,j+=O)}});const h=s==="ARS"?b:N,m=s==="ARS"?y:j;return{totalIngresos:h,totalGastos:m,balance:h-m,savingsRate:h>0?(h-m)/h*100:0}},[e,n,s]);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[o.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Estadisticas"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:"var(--bg-tertiary)"},children:[o.jsxs("button",{onClick:()=>c("ARS"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:s==="ARS"?"var(--accent-primary)":"transparent",color:s==="ARS"?"white":"var(--text-secondary)",boxShadow:s==="ARS"?"0 4px 12px var(--accent-primary-glow)":"none"},children:[o.jsx("img",{src:"/icons/catalog/ARS.svg",alt:"ARS",className:"w-4 h-4 rounded-sm"}),"ARS"]}),o.jsxs("button",{onClick:()=>c("USD"),className:"px-3.5 py-1.5 rounded-lg text-xs font-semibold transition-all duration-300 active:scale-95 flex items-center gap-1.5",style:{backgroundColor:s==="USD"?"var(--accent-green)":"transparent",color:s==="USD"?"white":"var(--text-secondary)",boxShadow:s==="USD"?"0 4px 12px rgba(0, 217, 154, 0.3)":"none"},children:[o.jsx("img",{src:"/icons/catalog/USD.svg",alt:"USD",className:"w-4 h-4 rounded-sm"}),"USD"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Qe,{value:n,onChange:i,presets:Br,defaultPreset:"6 meses"}),(n.from||n.to)&&o.jsx("button",{onClick:()=>i({from:null,to:null}),className:"p-1.5 rounded-lg transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},title:"Limpiar fechas",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Total Ingresos"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:"var(--accent-green)"},children:r?"...":k(f.totalIngresos,s)})]}),o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Total Gastos"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:"var(--accent-red)"},children:r?"...":k(f.totalGastos,s)})]}),o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Balance"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:f.balance>=0?"var(--accent-green)":"var(--accent-red)"},children:r?"...":k(f.balance,s)})]}),o.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[o.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-secondary)"},children:"Tasa de Ahorro"}),o.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:f.savingsRate>=0?"var(--accent-primary)":"var(--accent-red)"},children:r?"...":`${f.savingsRate.toFixed(1)}%`})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx($r,{data:d,loading:r,currency:s}),o.jsx(Mr,{data:u,loading:r,currency:s})]}),o.jsx(Wr,{data:p,loading:r,currency:s})]})}export{Yr as default};
