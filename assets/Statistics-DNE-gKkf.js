import{ae as Ur,af as Yr,ag as Xr,ah as Zr,ai as Jr,r as d,aj as Qr,j as i,f as W,i as he,a as ve,t as ea,v as ta,b as z,e as V,ak as we,s as at,o as Oe,al as ra}from"./index-Bs2UX6zf.js";import{c as de,s as X,r as aa,i as H,a as rr,b as le,D as ye,d as ot,e as na,Z as xe,L as R,u as Z,f as sa,g as ia,h as De,j as ar,k as Q,l as lt,m as oa,n as la,o as ge,p as ca,q as da,t as ua,v as kt,w as pa,x as fa,C as ma,y as ha,z as U,A as Nt,B as be,E as va,F as ee,G as je,H as Re,I as Be,J as ya,K as nr,M as ct,N as Me,O as sr,R as dt,S as ir,P as or,Q as Fe,T as ut,U as lr,V as cr,W as dr,X as ur,Y as xa,_ as fe,$ as Le,a0 as pr,a1 as fr,a2 as F,a3 as mr,a4 as hr,a5 as ga,a6 as ba,a7 as ja,a8 as pt,a9 as ft,aa as Pa,ab as Aa,ac as ka,ad as Na,ae as Ea,af as ze,ag as vr,ah as Ia,ai as wa,aj as Oa,ak as yr,al as xr,am as Ca,an as Sa,ao as gr,ap as br,aq as Da,ar as Ma,as as La,at as Ta,au as Ka,av as $a,aw as _a,ax as Wa,ay as Ra,az as Ba,aA as Fa,aB as jr,aC as za,aD as Ga,aE as Et,aF as qa,aG as Va,aH as Ha,aI as Ua,aJ as Ya,aK as Xa,aL as Pr,aM as Pe,aN as Za,aO as Ja,aP as Qa,aQ as Ae,aR as en,aS as mt,aT as ht,aU as It,aV as tn}from"./PieChart-CSRzNHQQ.js";import{L as Ar,C as vt}from"./CartesianGrid-BcfIdS4j.js";import"./DateRangePicker-CtSqGaQp.js";function rn(t,e,r){const[a,n]=Ur(r==null?void 0:r.in,t,e),s=wt(a,n),o=Math.abs(Yr(a,n));a.setDate(a.getDate()-s*o);const l=+(wt(a,n)===-s),c=s*(o-l);return c===0?0:c}function wt(t,e){const r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function an(t,e){const{start:r,end:a}=Xr(e==null?void 0:e.in,t);let n=+r>+a;const s=n?+r:+a,o=n?a:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=s;)c.push(Zr(r,o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return n?c.reverse():c}function Ot(t,e,r){return Jr(t,-e,r)}var nn=["points","className","baseLinePoints","connectNulls"],Ct;function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ie.apply(null,arguments)}function sn(t,e){if(t==null)return{};var r,a,n=on(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function on(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function ln(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var St=t=>t&&t.x===+t.x&&t.y===+t.y,cn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(a=>{St(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),St(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ue=(t,e)=>{var r=cn(t);e&&(r=[r.reduce((n,s)=>[...n,...s],[])]);var a=r.map(n=>n.reduce((s,o,l)=>aa(Ct||(Ct=ln(["","","",",",""])),s,l===0?"M":"L",o.x,o.y),"")).join("");return r.length===1?"".concat(a,"Z"):a},dn=(t,e,r)=>{var a=ue(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(ue(Array.from(e).reverse(),r).slice(1))},un=t=>{var{points:e,className:r,baseLinePoints:a,connectNulls:n}=t,s=sn(t,nn);if(!e||!e.length)return null;var o=de("recharts-polygon",r);if(a&&a.length){var l=s.stroke&&s.stroke!=="none",c=dn(e,a,n);return d.createElement("g",{className:o},d.createElement("path",ie({},X(s),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?d.createElement("path",ie({},X(s),{fill:"none",d:ue(e,n)})):null,l?d.createElement("path",ie({},X(s),{fill:"none",d:ue(a,n)})):null)}var p=ue(e,n);return d.createElement("path",ie({},X(s),{fill:p.slice(-1)==="Z"?s.fill:"none",className:o,d:p}))};function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},nt.apply(null,arguments)}var kr=t=>{var{cx:e,cy:r,r:a,className:n}=t,s=de("recharts-dot",n);return H(e)&&H(r)&&H(a)?d.createElement("circle",nt({},le(t),rr(t),{className:s,cx:e,cy:r,r:a})):null},pn=["points"];function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Ge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dt(Object(r),!0).forEach(function(a){fn(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function fn(t,e,r){return(e=mn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mn(t){var e=hn(t,"string");return typeof e=="symbol"?e:e+""}function hn(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Te.apply(null,arguments)}function vn(t,e){if(t==null)return{};var r,a,n=yn(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yn(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function xn(t){var{option:e,dotProps:r,className:a}=t;if(d.isValidElement(e))return d.cloneElement(e,r);if(typeof e=="function")return e(r);var n=de(a,typeof e!="boolean"?e.className:""),s=r??{},{points:o}=s,l=vn(s,pn);return d.createElement(kr,Te({},l,{className:n}))}function gn(t,e){return t==null?!1:e?!0:t.length===1}function Nr(t){var{points:e,dot:r,className:a,dotClassName:n,dataKey:s,baseProps:o,needClip:l,clipPathId:c,zIndex:p=ye.scatter}=t;if(!gn(e,r))return null;var f=ot(r),u=na(r),m=e.map((x,h)=>{var P,k,I=Ge(Ge(Ge({r:3},o),u),{},{index:h,cx:(P=x.x)!==null&&P!==void 0?P:void 0,cy:(k=x.y)!==null&&k!==void 0?k:void 0,dataKey:s,value:x.value,payload:x.payload,points:e});return d.createElement(xn,{key:"dot-".concat(h),option:r,dotProps:I,className:n})}),v={};return l&&c!=null&&(v.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(c,")")),d.createElement(xe,{zIndex:p},d.createElement(R,Te({className:a},v),m))}function Mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mt(Object(r),!0).forEach(function(a){bn(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function bn(t,e,r){return(e=jn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jn(t){var e=Pn(t,"string");return typeof e=="symbol"?e:e+""}function Pn(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var An=t=>{var{point:e,childIndex:r,mainColor:a,activeDot:n,dataKey:s,clipPath:o}=t;if(n===!1||e.x==null||e.y==null)return null;var l={index:r,dataKey:s,cx:e.x,cy:e.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=qe(qe(qe({},l),ar(n)),rr(n)),p;return d.isValidElement(n)?p=d.cloneElement(n,c):typeof n=="function"?p=n(c):p=d.createElement(kr,c),d.createElement(R,{className:"recharts-active-dot",clipPath:o},p)};function st(t){var{points:e,mainColor:r,activeDot:a,itemDataKey:n,clipPath:s,zIndex:o=ye.activeDot}=t,l=Z(sa),c=ia();if(e==null||c==null)return null;var p=e.find(f=>c.includes(f.payload));return De(p)?null:d.createElement(xe,{zIndex:o},d.createElement(An,{point:p,childIndex:Number(l),mainColor:r,dataKey:n,activeDot:a,clipPath:s}))}function Lt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lt(Object(r),!0).forEach(function(a){kn(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function kn(t,e,r){return(e=Nn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nn(t){var e=En(t,"string");return typeof e=="symbol"?e:e+""}function En(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ke(){return Ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ke.apply(null,arguments)}var In=(t,e)=>{var r;if(d.isValidElement(t))r=d.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{if(!U(e.x1)||!U(e.y1)||!U(e.x2)||!U(e.y2))return null;r=d.createElement("line",Ke({},e,{className:"recharts-reference-line-line"}))}return r},wn=(t,e,r,a,n,s)=>{var{x:o,width:l}=s,c=n.y.apply(t,{position:r});if(be(c)||e==="discard"&&!n.y.isInRange(c))return null;var p=[{x:o+l,y:c},{x:o,y:c}];return a==="left"?p.reverse():p},On=(t,e,r,a,n,s)=>{var{y:o,height:l}=s,c=n.x.apply(t,{position:r});if(be(c)||e==="discard"&&!n.x.isInRange(c))return null;var p=[{x:c,y:o+l},{x:c,y:o}];return a==="top"?p.reverse():p},Cn=(t,e,r,a)=>{var n=t.map(s=>a.apply(s,{position:r}));return e==="discard"&&n.some(s=>!a.isInRange(s))?null:n},Sn=(t,e,r,a,n,s)=>{var{x:o,y:l,segment:c,ifOverflow:p}=s,f=Nt(o),u=Nt(l);return u?wn(l,p,r,n,t,e):f?On(o,p,r,a,t,e):c!=null&&c.length===2?Cn(c,p,r,t):null};function Dn(t){var e=lt();return d.useEffect(()=>(e(oa(t)),()=>{e(la(t))})),null}function Mn(t){var{xAxisId:e,yAxisId:r,shape:a,className:n,ifOverflow:s}=t,o=ge(),l=ca(),c=Z(j=>da(j,e)),p=Z(j=>ua(j,r)),f=Z(j=>kt(j,"xAxis",e,o)),u=Z(j=>kt(j,"yAxis",r,o)),m=pa();if(!l||!m||c==null||p==null||f==null||u==null)return null;var v=fa({x:f,y:u}),x=Sn(v,m,t.position,c.orientation,p.orientation,t);if(!x)return null;var[{x:h,y:P},{x:k,y:I}]=x,g=s==="hidden"?"url(#".concat(l,")"):void 0,y=Tt(Tt({clipPath:g},X(t)),{},{x1:h,y1:P,x2:k,y2:I}),A=va({x1:h,y1:P,x2:k,y2:I});return d.createElement(xe,{zIndex:t.zIndex},d.createElement(R,{className:de("recharts-reference-line",n)},In(a,y),d.createElement(ma,Ke({},A,{lowerWidth:A.width,upperWidth:A.width}),d.createElement(ha,{label:t.label}),t.children)))}var Ln={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:ye.line};function Er(t){var e=Q(t,Ln);return d.createElement(d.Fragment,null,d.createElement(Dn,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),d.createElement(Mn,e))}Er.displayName="ReferenceLine";var Ir=(t,e,r,a)=>Re(t,"xAxis",e,a),wr=(t,e,r,a)=>Be(t,"xAxis",e,a),Or=(t,e,r,a)=>Re(t,"yAxis",r,a),Cr=(t,e,r,a)=>Be(t,"yAxis",r,a),Tn=ee([je,Ir,Or,wr,Cr],(t,e,r,a,n)=>ct(t,"xAxis")?Me(e,a,!1):Me(r,n,!1)),Kn=(t,e,r,a,n)=>n;function $n(t){return t.type==="line"}var _n=ee([nr,Kn],(t,e)=>t.filter($n).find(r=>r.id===e)),Wn=ee([je,Ir,Or,wr,Cr,_n,Tn,ya],(t,e,r,a,n,s,o,l)=>{var{chartData:c,dataStartIndex:p,dataEndIndex:f}=l;if(!(s==null||e==null||r==null||a==null||n==null||a.length===0||n.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:u,data:m}=s,v;if(m!=null&&m.length>0?v=m:v=c==null?void 0:c.slice(p,f+1),v!=null)return ss({layout:t,xAxis:e,yAxis:r,xAxisTicks:a,yAxisTicks:n,dataKey:u,bandSize:o,displayedData:v})}});function Sr(t){var e=ar(t),r=3,a=2;if(e!=null){var{r:n,strokeWidth:s}=e,o=Number(n),l=Number(s);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(l)||l<0)&&(l=a),{r:o,strokeWidth:l}}return{r,strokeWidth:a}}var Rn=["id"],Bn=["type","layout","connectNulls","needClip","shape"],Fn=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function me(){return me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},me.apply(null,arguments)}function Kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kt(Object(r),!0).forEach(function(a){zn(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function zn(t,e,r){return(e=Gn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gn(t){var e=qn(t,"string");return typeof e=="symbol"?e:e+""}function qn(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yt(t,e){if(t==null)return{};var r,a,n=Vn(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vn(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;r[a]=t[a]}return r}var Hn=t=>{var{dataKey:e,name:r,stroke:a,legendType:n,hide:s}=t;return[{inactive:s,dataKey:e,type:n,color:a,value:Fe(r,e),payload:t}]},Un=d.memo(t=>{var{dataKey:e,data:r,stroke:a,strokeWidth:n,fill:s,name:o,hide:l,unit:c,tooltipType:p,id:f}=t,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:s,dataKey:e,nameKey:void 0,name:Fe(o,e),hide:l,type:p,color:a,unit:c,graphicalItemId:f}};return d.createElement(ut,{tooltipEntrySettings:u})}),Dr=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Yn(t,e){for(var r=t.length%2!==0?[...t,0]:t,a=[],n=0;n<e;++n)a=[...a,...r];return a}var Xn=(t,e,r)=>{var a=r.reduce((u,m)=>u+m);if(!a)return Dr(e,t);for(var n=Math.floor(t/a),s=t%a,o=e-t,l=[],c=0,p=0;c<r.length;p+=r[c],++c)if(p+r[c]>s){l=[...r.slice(0,c),s-p];break}var f=l.length%2===0?[0,o]:[o];return[...Yn(r,n),...l,...f].map(u=>"".concat(u,"px")).join(", ")};function Zn(t){var{clipPathId:e,points:r,props:a}=t,{dot:n,dataKey:s,needClip:o}=a,{id:l}=a,c=yt(a,Rn),p=le(c);return d.createElement(Nr,{points:r,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:p,needClip:o,clipPathId:e})}function Jn(t){var{showLabels:e,children:r,points:a}=t,n=d.useMemo(()=>a==null?void 0:a.map(s=>{var o,l,c={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return q(q({},c),{},{value:s.value,payload:s.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[a]);return d.createElement(hr,{value:e?n:void 0},r)}function $t(t){var{clipPathId:e,pathRef:r,points:a,strokeDasharray:n,props:s}=t,{type:o,layout:l,connectNulls:c,needClip:p,shape:f}=s,u=yt(s,Bn),m=q(q({},X(u)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(e,")"):void 0,points:a,type:o,layout:l,connectNulls:c,strokeDasharray:n??s.strokeDasharray});return d.createElement(d.Fragment,null,(a==null?void 0:a.length)>1&&d.createElement(ga,me({shapeType:"curve",option:f},m,{pathRef:r})),d.createElement(Zn,{points:a,clipPathId:e,props:s}))}function Qn(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function es(t){var{clipPathId:e,props:r,pathRef:a,previousPointsRef:n,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:p,animationDuration:f,animationEasing:u,animateNewValues:m,width:v,height:x,onAnimationEnd:h,onAnimationStart:P}=r,k=n.current,I=pr(o,"recharts-line-"),g=d.useRef(I),[y,A]=d.useState(!1),j=!y,E=d.useCallback(()=>{typeof h=="function"&&h(),A(!1)},[h]),b=d.useCallback(()=>{typeof P=="function"&&P(),A(!0)},[P]),N=Qn(a.current),w=d.useRef(0);g.current!==I&&(w.current=s.current,g.current=I);var S=w.current;return d.createElement(Jn,{points:o,showLabels:j},r.children,d.createElement(fr,{animationId:I,begin:p,duration:f,isActive:c,easing:u,onAnimationEnd:E,onAnimationStart:b,key:I},O=>{var D=F(S,N+S,O),L=Math.min(D,N),M;if(c)if(l){var G="".concat(l).split(/[,\s]+/gim).map(K=>parseFloat(K));M=Xn(L,N,G)}else M=Dr(N,L);else M=l==null?void 0:String(l);if(O>0&&N>0&&(n.current=o,s.current=Math.max(s.current,L)),k){var C=k.length/o.length,$=O===1?o:o.map((K,te)=>{var re=Math.floor(te*C);if(k[re]){var ke=k[re];return q(q({},K),{},{x:F(ke.x,K.x,O),y:F(ke.y,K.y,O)})}return m?q(q({},K),{},{x:F(v*2,K.x,O),y:F(x/2,K.y,O)}):q(q({},K),{},{x:K.x,y:K.y})});return n.current=$,d.createElement($t,{props:r,points:$,clipPathId:e,pathRef:a,strokeDasharray:M})}return d.createElement($t,{props:r,points:o,clipPathId:e,pathRef:a,strokeDasharray:M})}),d.createElement(mr,{label:r.label}))}function ts(t){var{clipPathId:e,props:r}=t,a=d.useRef(null),n=d.useRef(0),s=d.useRef(null);return d.createElement(es,{props:r,clipPathId:e,previousPointsRef:a,longestAnimatedLengthRef:n,pathRef:s})}var rs=(t,e)=>{var r,a;return{x:(r=t.x)!==null&&r!==void 0?r:void 0,y:(a=t.y)!==null&&a!==void 0?a:void 0,value:t.value,errorVal:fe(t.payload,e)}};class as extends d.Component{render(){var{hide:e,dot:r,points:a,className:n,xAxisId:s,yAxisId:o,top:l,left:c,width:p,height:f,id:u,needClip:m,zIndex:v}=this.props;if(e)return null;var x=de("recharts-line",n),h=u,{r:P,strokeWidth:k}=Sr(r),I=ot(r),g=P*2+k,y=m?"url(#clipPath-".concat(I?"":"dots-").concat(h,")"):void 0;return d.createElement(xe,{zIndex:v},d.createElement(R,{className:x},m&&d.createElement("defs",null,d.createElement(ur,{clipPathId:h,xAxisId:s,yAxisId:o}),!I&&d.createElement("clipPath",{id:"clipPath-dots-".concat(h)},d.createElement("rect",{x:c-g/2,y:l-g/2,width:p+g,height:f+g}))),d.createElement(xa,{xAxisId:s,yAxisId:o,data:a,dataPointFormatter:rs,errorBarOffset:0},d.createElement(ts,{props:this.props,clipPathId:h}))),d.createElement(st,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:y}))}}var Mr={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ye.line,type:"linear"};function ns(t){var e=Q(t,Mr),{activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,hide:p,isAnimationActive:f,label:u,legendType:m,xAxisId:v,yAxisId:x,id:h}=e,P=yt(e,Fn),{needClip:k}=lr(v,x),I=cr(),g=dr(),y=ge(),A=Z(w=>Wn(w,v,x,y,h));if(g!=="horizontal"&&g!=="vertical"||A==null||I==null)return null;var{height:j,width:E,x:b,y:N}=I;return d.createElement(as,me({},P,{id:h,connectNulls:l,dot:c,activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:s,animationEasing:o,isAnimationActive:f,hide:p,label:u,legendType:m,xAxisId:v,yAxisId:x,points:A,layout:g,height:j,width:E,left:b,top:N,needClip:k}))}function ss(t){var{layout:e,xAxis:r,yAxis:a,xAxisTicks:n,yAxisTicks:s,dataKey:o,bandSize:l,displayedData:c}=t;return c.map((p,f)=>{var u=fe(p,o);if(e==="horizontal"){var m=Le({axis:r,ticks:n,bandSize:l,entry:p,index:f}),v=De(u)?null:a.scale(u);return{x:m,y:v,value:u,payload:p}}var x=De(u)?null:r.scale(u),h=Le({axis:a,ticks:s,bandSize:l,entry:p,index:f});return x==null||h==null?null:{x,y:h,value:u,payload:p}}).filter(Boolean)}function is(t){var e=Q(t,Mr),r=ge();return d.createElement(dt,{id:e.id,type:"line"},a=>d.createElement(d.Fragment,null,d.createElement(ir,{legendPayload:Hn(e)}),d.createElement(Un,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),d.createElement(or,{type:"line",id:a,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),d.createElement(ns,me({},e,{id:a}))))}var Lr=d.memo(is,sr);Lr.displayName="Line";var Tr=(t,e,r)=>Re(t,"xAxis",pt(t,e),r),Kr=(t,e,r)=>Be(t,"xAxis",pt(t,e),r),$r=(t,e,r)=>Re(t,"yAxis",ft(t,e),r),_r=(t,e,r)=>Be(t,"yAxis",ft(t,e),r),os=ee([je,Tr,$r,Kr,_r],(t,e,r,a,n)=>ct(t,"xAxis")?Me(e,a,!1):Me(r,n,!1)),ls=(t,e)=>e,Wr=ee([nr,ls],(t,e)=>t.filter(r=>r.type==="area").find(r=>r.id===e)),Rr=t=>{var e=je(t),r=ct(e,"xAxis");return r?"yAxis":"xAxis"},cs=(t,e)=>{var r=Rr(t);return r==="yAxis"?ft(t,e):pt(t,e)},ds=(t,e,r)=>Pa(t,Rr(t),cs(t,e),r),us=ee([Wr,ds],(t,e)=>{var r;if(!(t==null||e==null)){var{stackId:a}=t,n=Aa(t);if(!(a==null||n==null)){var s=(r=e[a])===null||r===void 0?void 0:r.stackedData,o=s==null?void 0:s.find(l=>l.key===n);if(o!=null)return o.map(l=>[l[0],l[1]])}}}),ps=ee([je,Tr,$r,Kr,_r,us,ba,os,Wr,ja],(t,e,r,a,n,s,o,l,c,p)=>{var{chartData:f,dataStartIndex:u,dataEndIndex:m}=o;if(!(c==null||t!=="horizontal"&&t!=="vertical"||e==null||r==null||a==null||n==null||a.length===0||n.length===0||l==null)){var{data:v}=c,x;if(v&&v.length>0?x=v:x=f==null?void 0:f.slice(u,m+1),x!=null)return Ss({layout:t,xAxis:e,yAxis:r,xAxisTicks:a,yAxisTicks:n,dataStartIndex:u,areaSettings:c,stackedData:s,displayedData:x,chartBaseValue:p,bandSize:l})}}),fs=["id"],ms=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function J(){return J=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},J.apply(null,arguments)}function Br(t,e){if(t==null)return{};var r,a,n=hs(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hs(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function _t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function oe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_t(Object(r),!0).forEach(function(a){vs(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function vs(t,e,r){return(e=ys(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ys(t){var e=xs(t,"string");return typeof e=="symbol"?e:e+""}function xs(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $e(t,e){return t&&t!=="none"?t:e}var gs=t=>{var{dataKey:e,name:r,stroke:a,fill:n,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:$e(a,n),value:Fe(r,e),payload:t}]},bs=d.memo(t=>{var{dataKey:e,data:r,stroke:a,strokeWidth:n,fill:s,name:o,hide:l,unit:c,tooltipType:p,id:f}=t,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:s,dataKey:e,nameKey:void 0,name:Fe(o,e),hide:l,type:p,color:$e(a,s),unit:c,graphicalItemId:f}};return d.createElement(ut,{tooltipEntrySettings:u})});function js(t){var{clipPathId:e,points:r,props:a}=t,{needClip:n,dot:s,dataKey:o}=a,l=le(a);return d.createElement(Nr,{points:r,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:n,clipPathId:e})}function Ps(t){var{showLabels:e,children:r,points:a}=t,n=a.map(s=>{var o,l,c={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return oe(oe({},c),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return d.createElement(hr,{value:e?n:void 0},r)}function Wt(t){var{points:e,baseLine:r,needClip:a,clipPathId:n,props:s}=t,{layout:o,type:l,stroke:c,connectNulls:p,isRange:f}=s,{id:u}=s,m=Br(s,fs),v=le(m),x=X(m);return d.createElement(d.Fragment,null,(e==null?void 0:e.length)>1&&d.createElement(R,{clipPath:a?"url(#clipPath-".concat(n,")"):void 0},d.createElement(ze,J({},x,{id:u,points:e,connectNulls:p,type:l,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),c!=="none"&&d.createElement(ze,J({},v,{className:"recharts-area-curve",layout:o,type:l,connectNulls:p,fill:"none",points:e})),c!=="none"&&f&&d.createElement(ze,J({},v,{className:"recharts-area-curve",layout:o,type:l,connectNulls:p,fill:"none",points:r}))),d.createElement(js,{points:e,props:m,clipPathId:n}))}function As(t){var e,r,{alpha:a,baseLine:n,points:s,strokeWidth:o}=t,l=(e=s[0])===null||e===void 0?void 0:e.y,c=(r=s[s.length-1])===null||r===void 0?void 0:r.y;if(!U(l)||!U(c))return null;var p=a*Math.abs(l-c),f=Math.max(...s.map(u=>u.x||0));return H(n)?f=Math.max(n,f):n&&Array.isArray(n)&&n.length&&(f=Math.max(...n.map(u=>u.x||0),f)),H(f)?d.createElement("rect",{x:0,y:l<c?l:l-p,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(p)}):null}function ks(t){var e,r,{alpha:a,baseLine:n,points:s,strokeWidth:o}=t,l=(e=s[0])===null||e===void 0?void 0:e.x,c=(r=s[s.length-1])===null||r===void 0?void 0:r.x;if(!U(l)||!U(c))return null;var p=a*Math.abs(l-c),f=Math.max(...s.map(u=>u.y||0));return H(n)?f=Math.max(n,f):n&&Array.isArray(n)&&n.length&&(f=Math.max(...n.map(u=>u.y||0),f)),H(f)?d.createElement("rect",{x:l<c?l:l-p,y:0,width:p,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}function Ns(t){var{alpha:e,layout:r,points:a,baseLine:n,strokeWidth:s}=t;return r==="vertical"?d.createElement(As,{alpha:e,points:a,baseLine:n,strokeWidth:s}):d.createElement(ks,{alpha:e,points:a,baseLine:n,strokeWidth:s})}function Es(t){var{needClip:e,clipPathId:r,props:a,previousPointsRef:n,previousBaselineRef:s}=t,{points:o,baseLine:l,isAnimationActive:c,animationBegin:p,animationDuration:f,animationEasing:u,onAnimationStart:m,onAnimationEnd:v}=a,x=d.useMemo(()=>({points:o,baseLine:l}),[o,l]),h=pr(x,"recharts-area-"),P=Ea(),[k,I]=d.useState(!1),g=!k,y=d.useCallback(()=>{typeof v=="function"&&v(),I(!1)},[v]),A=d.useCallback(()=>{typeof m=="function"&&m(),I(!0)},[m]);if(P==null)return null;var j=n.current,E=s.current;return d.createElement(Ps,{showLabels:g,points:o},a.children,d.createElement(fr,{animationId:h,begin:p,duration:f,isActive:c,easing:u,onAnimationEnd:y,onAnimationStart:A,key:h},b=>{if(j){var N=j.length/o.length,w=b===1?o:o.map((O,D)=>{var L=Math.floor(D*N);if(j[L]){var M=j[L];return oe(oe({},O),{},{x:F(M.x,O.x,b),y:F(M.y,O.y,b)})}return O}),S;return H(l)?S=F(E,l,b):De(l)||be(l)?S=F(E,0,b):S=l.map((O,D)=>{var L=Math.floor(D*N);if(Array.isArray(E)&&E[L]){var M=E[L];return oe(oe({},O),{},{x:F(M.x,O.x,b),y:F(M.y,O.y,b)})}return O}),b>0&&(n.current=w,s.current=S),d.createElement(Wt,{points:w,baseLine:S,needClip:e,clipPathId:r,props:a})}return b>0&&(n.current=o,s.current=l),d.createElement(R,null,c&&d.createElement("defs",null,d.createElement("clipPath",{id:"animationClipPath-".concat(r)},d.createElement(Ns,{alpha:b,points:o,baseLine:l,layout:P,strokeWidth:a.strokeWidth}))),d.createElement(R,{clipPath:"url(#animationClipPath-".concat(r,")")},d.createElement(Wt,{points:o,baseLine:l,needClip:e,clipPathId:r,props:a})))}),d.createElement(mr,{label:a.label}))}function Is(t){var{needClip:e,clipPathId:r,props:a}=t,n=d.useRef(null),s=d.useRef();return d.createElement(Es,{needClip:e,clipPathId:r,props:a,previousPointsRef:n,previousBaselineRef:s})}class ws extends d.PureComponent{render(){var{hide:e,dot:r,points:a,className:n,top:s,left:o,needClip:l,xAxisId:c,yAxisId:p,width:f,height:u,id:m,baseLine:v,zIndex:x}=this.props;if(e)return null;var h=de("recharts-area",n),P=m,{r:k,strokeWidth:I}=Sr(r),g=ot(r),y=k*2+I,A=l?"url(#clipPath-".concat(g?"":"dots-").concat(P,")"):void 0;return d.createElement(xe,{zIndex:x},d.createElement(R,{className:h},l&&d.createElement("defs",null,d.createElement(ur,{clipPathId:P,xAxisId:c,yAxisId:p}),!g&&d.createElement("clipPath",{id:"clipPath-dots-".concat(P)},d.createElement("rect",{x:o-y/2,y:s-y/2,width:f+y,height:u+y}))),d.createElement(Is,{needClip:l,clipPathId:P,props:this.props})),d.createElement(st,{points:a,mainColor:$e(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:A}),this.props.isRange&&Array.isArray(v)&&d.createElement(st,{points:v,mainColor:$e(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:A}))}}var Fr={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ye.area};function Os(t){var e,r=Q(t,Fr),{activeDot:a,animationBegin:n,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,fill:p,fillOpacity:f,hide:u,isAnimationActive:m,legendType:v,stroke:x,xAxisId:h,yAxisId:P}=r,k=Br(r,ms),I=dr(),g=Na(),{needClip:y}=lr(h,P),A=ge(),{points:j,isRange:E,baseLine:b}=(e=Z(L=>ps(L,t.id,A)))!==null&&e!==void 0?e:{},N=cr();if(I!=="horizontal"&&I!=="vertical"||N==null||g!=="AreaChart"&&g!=="ComposedChart")return null;var{height:w,width:S,x:O,y:D}=N;return!j||!j.length?null:d.createElement(ws,J({},k,{activeDot:a,animationBegin:n,animationDuration:s,animationEasing:o,baseLine:b,connectNulls:l,dot:c,fill:p,fillOpacity:f,height:w,hide:u,layout:I,isAnimationActive:m==="auto"?!vr.isSsr:m,isRange:E,legendType:v,needClip:y,points:j,stroke:x,width:S,left:O,top:D,xAxisId:h,yAxisId:P}))}var Cs=(t,e,r,a,n)=>{var s=r??e;if(H(s))return s;var o=t==="horizontal"?n:a,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),p=Math.min(l[0],l[1]);return s==="dataMin"?p:s==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]};function Ss(t){var{areaSettings:{connectNulls:e,baseValue:r,dataKey:a},stackedData:n,layout:s,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:p,dataStartIndex:f,xAxisTicks:u,yAxisTicks:m,bandSize:v}=t,x=n&&n.length,h=Cs(s,o,r,l,c),P=s==="horizontal",k=!1,I=p.map((y,A)=>{var j,E,b;if(x)b=n[f+A];else{var N=fe(y,a);Array.isArray(N)?(b=N,k=!0):b=[h,N]}var w=(j=(E=b)===null||E===void 0?void 0:E[1])!==null&&j!==void 0?j:null,S=w==null||x&&!e&&fe(y,a)==null;return P?{x:Le({axis:l,ticks:u,bandSize:v,entry:y,index:A}),y:S?null:c.scale(w),value:b,payload:y}:{x:S?null:l.scale(w),y:Le({axis:c,ticks:m,bandSize:v,entry:y,index:A}),value:b,payload:y}}),g;return x||k?g=I.map(y=>{var A=Array.isArray(y.value)?y.value[0]:null;return P?{x:y.x,y:A!=null&&y.y!=null?c.scale(A):null,payload:y.payload}:{x:A!=null?l.scale(A):null,y:y.y,payload:y.payload}}):g=P?c.scale(h):l.scale(h),{points:I,baseLine:g,isRange:k}}function Ds(t){var e=Q(t,Fr),r=ge();return d.createElement(dt,{id:e.id,type:"area"},a=>d.createElement(d.Fragment,null,d.createElement(ir,{legendPayload:gs(e)}),d.createElement(bs,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),d.createElement(or,{type:"area",id:a,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:ka(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:r,connectNulls:e.connectNulls}),d.createElement(Os,J({},e,{id:a}))))}var zr=d.memo(Ds,sr);zr.displayName="Area";var Ms={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}};function Ls(t){var e=Q(t,Ms),{animationId:r,from:a,to:n,attributeName:s,isActive:o,canBegin:l,duration:c,easing:p,begin:f,onAnimationEnd:u,onAnimationStart:m,children:v}=e,x=o==="auto"?!vr.isSsr:o,h=Ia(r+s,e.animationManager),[P,k]=d.useState(()=>x?a:n),I=d.useRef(!1),g=d.useCallback(()=>{k(a),m()},[a,m]);if(d.useEffect(()=>{if(!x||!l)return wa;I.current=!0;var A=h.subscribe(k);return h.start([g,f,n,c,u]),()=>{h.stop(),A&&A(),u()}},[x,l,c,p,f,g,u,h,n,a]),!x)return v({[s]:n});if(!l)return v({[s]:a});if(I.current){var y=Oa([s],c,p);return v({transition:y,[s]:P})}return v({[s]:a})}var Ts=["axis"],Ks=d.forwardRef((t,e)=>d.createElement(yr,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ts,tooltipPayloadSearcher:xr,categoricalChartProps:t,ref:e})),Ve={},He={},Ue={},Rt;function $s(){return Rt||(Rt=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof Buffer<"u"&&Buffer.isBuffer(r)}t.isBuffer=e})(Ue)),Ue}var Ye={},Bt;function _s(){return Bt||(Bt=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){const a=r==null?void 0:r.constructor,n=typeof a=="function"?a.prototype:Object.prototype;return r===n}t.isPrototype=e})(Ye)),Ye}var Xe={},Ft;function Ws(){return Ft||(Ft=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ca();function r(a){return e.isTypedArray(a)}t.isTypedArray=r})(Xe)),Xe}var Ze={},Je={},zt;function Rs(){return zt||(zt=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Sa();function r(a){const n=e.toFinite(a),s=n%1;return s?n-s:n}t.toInteger=r})(Je)),Je}var Gt;function Bs(){return Gt||(Gt=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rs();function r(a,n){if(a=e.toInteger(a),a<1||!Number.isSafeInteger(a))return[];const s=new Array(a);for(let o=0;o<a;o++)s[o]=typeof n=="function"?n(o):o;return s}t.times=r})(Ze)),Ze}var qt;function Fs(){return qt||(qt=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$s(),r=_s(),a=gr(),n=Ws(),s=Bs();function o(f){if(f==null)return[];switch(typeof f){case"object":case"function":return a.isArrayLike(f)?p(f):r.isPrototype(f)?c(f):l(f);default:return l(Object(f))}}function l(f){const u=[];for(const m in f)u.push(m);return u}function c(f){return l(f).filter(m=>m!=="constructor")}function p(f){const u=s.times(f.length,x=>`${x}`),m=new Set(u);e.isBuffer(f)&&(m.add("offset"),m.add("parent")),n.isTypedArray(f)&&(m.add("buffer"),m.add("byteLength"),m.add("byteOffset"));const v=l(f).filter(x=>!m.has(x));return Array.isArray(f)?[...u,...v]:[...u.filter(x=>Object.hasOwn(f,x)),...v]}t.keysIn=o})(He)),He}var Qe={},Vt;function zs(){return Vt||(Vt=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ta(),r=Ma(),a=br(),n=La(),s=Da();function o(c,p){if(c==null)return!0;switch(typeof p){case"symbol":case"number":case"object":{if(Array.isArray(p))return l(c,p);if(typeof p=="number"?p=n.toKey(p):typeof p=="object"&&(Object.is(p==null?void 0:p.valueOf(),-0)?p="-0":p=String(p)),r.isUnsafeProperty(p))return!1;if((c==null?void 0:c[p])===void 0)return!0;try{return delete c[p],!0}catch{return!1}}case"string":{if((c==null?void 0:c[p])===void 0&&a.isDeepKey(p))return l(c,s.toPath(p));if(r.isUnsafeProperty(p))return!1;try{return delete c[p],!0}catch{return!1}}}}function l(c,p){const f=p.length===1?c:e.get(c,p.slice(0,-1)),u=p[p.length-1];if((f==null?void 0:f[u])===void 0)return!0;if(r.isUnsafeProperty(u))return!1;try{return delete f[u],!0}catch{return!1}}t.unset=o})(Qe)),Qe}var et={},Ht;function Gs(){return Ht||(Ht=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ka();function r(a){const n=[];for(;a;)n.push(...e.getSymbols(a)),a=Object.getPrototypeOf(a);return n}t.getSymbolsIn=r})(et)),et}var tt={},Ut;function qs(){return Ut||(Ut=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gr();function r(a,n=1){const s=[],o=Math.floor(n);if(!e.isArrayLike(a))return s;const l=(c,p)=>{for(let f=0;f<c.length;f++){const u=c[f];p<o&&(Array.isArray(u)||u!=null&&u[Symbol.isConcatSpreadable]||u!==null&&typeof u=="object"&&Object.prototype.toString.call(u)==="[object Arguments]")?Array.isArray(u)?l(u,p+1):l(Array.from(u),p+1):s.push(u)}};return l(Array.from(a),0),s}t.flatten=r})(tt)),tt}var Yt;function Vs(){return Yt||(Yt=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$a(),r=Fs(),a=zs(),n=Gs(),s=br(),o=qs(),l=_a();function c(m,...v){if(m==null)return{};v=o.flatten(v);const x=p(m,v);for(let h=0;h<v.length;h++){let P=v[h];switch(typeof P){case"object":{Array.isArray(P)||(P=Array.from(P));for(let k=0;k<P.length;k++){const I=P[k];a.unset(x,I)}break}case"string":case"symbol":case"number":{a.unset(x,P);break}}}return x}function p(m,v){return v.some(h=>Array.isArray(h)||s.isDeepKey(h))?u(m):f(m)}function f(m){const v={},x=[...r.keysIn(m),...n.getSymbolsIn(m)];for(let h=0;h<x.length;h++){const P=x[h];v[P]=m[P]}return v}function u(m){const v={},x=[...r.keysIn(m),...n.getSymbolsIn(m)];for(let h=0;h<x.length;h++){const P=x[h];v[P]=e.cloneDeepWith(m[P],k=>{if(!l.isPlainObject(k))return k})}return v}t.omit=c})(Ve)),Ve}var rt,Xt;function Hs(){return Xt||(Xt=1,rt=Vs().omit),rt}var Us=Hs();const Ys=Qr(Us);var Xs=["width","height","className","style","children","type"];function Zs(t,e){if(t==null)return{};var r,a,n=Js(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)r=s[a],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Js(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function ce(){return ce=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ce.apply(null,arguments)}function Zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zt(Object(r),!0).forEach(function(a){pe(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function pe(t,e,r){return(e=Qs(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qs(t){var e=ei(t,"string");return typeof e=="symbol"?e:e+""}function ei(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _e="value",Gr=(t,e)=>{if(!(!t||!e))return jr(t,e)},ti=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"".concat(r,"children[").concat(e,"]")},ri={chartName:"Treemap",defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],tooltipPayloadSearcher:Gr,eventEmitter:void 0},Ce=t=>{var{depth:e,node:r,index:a,dataKey:n,nameKey:s,nestedActiveTooltipIndex:o}=t,l=e===0?"":ti(a,o),{children:c}=r,p=e+1,f=c&&c.length?c.map((m,v)=>Ce({depth:p,node:m,index:v,dataKey:n,nameKey:s,nestedActiveTooltipIndex:l})):null,u;return f&&f.length?u=f.reduce((m,v)=>m+v[_e],0):u=be(r[n])||r[n]<=0?0:r[n],T(T({},r),{},{children:f,name:fe(r,s,""),[_e]:u,depth:e,index:a,tooltipIndex:l})},ai=t=>({x:t.x,y:t.y,width:t.width,height:t.height}),ni=(t,e)=>{var r=e<0?0:e;return t.map(a=>{var n=a[_e]*r;return T(T({},a),{},{area:be(n)||n<=0?0:n})})},si=(t,e,r)=>{var a=e*e,n=t.area*t.area,{min:s,max:o}=t.reduce((l,c)=>({min:Math.min(l.min,c.area),max:Math.max(l.max,c.area)}),{min:1/0,max:0});return n?Math.max(a*o*r/n,n/(a*s*r)):1/0},ii=(t,e,r,a)=>{var n=e?Math.round(t.area/e):0;(a||n>r.height)&&(n=r.height);for(var s=r.x,o,l=0,c=t.length;l<c;l++)o=t[l],o.x=s,o.y=r.y,o.height=n,o.width=Math.min(n?Math.round(o.area/n):0,r.x+r.width-s),s+=o.width;return o!=null&&(o.width+=r.x+r.width-s),T(T({},r),{},{y:r.y+n,height:r.height-n})},oi=(t,e,r,a)=>{var n=e?Math.round(t.area/e):0;(a||n>r.width)&&(n=r.width);for(var s=r.y,o,l=0,c=t.length;l<c;l++)o=t[l],o.x=r.x,o.y=s,o.width=n,o.height=Math.min(n?Math.round(o.area/n):0,r.y+r.height-s),s+=o.height;return o&&(o.height+=r.y+r.height-s),T(T({},r),{},{x:r.x+n,width:r.width-n})},Jt=(t,e,r,a)=>e===r.width?ii(t,e,r,a):oi(t,e,r,a),Se=(t,e)=>{var{children:r}=t;if(r&&r.length){var a=ai(t),n=[],s=1/0,o,l,c=Math.min(a.width,a.height),p=ni(r,a.width*a.height/t[_e]),f=p.slice();for(n.area=0;f.length>0;)if(n.push(o=f[0]),n.area+=o.area,l=si(n,c,e),l<=s)f.shift(),s=l;else{var u,m;n.area-=(u=(m=n.pop())===null||m===void 0?void 0:m.area)!==null&&u!==void 0?u:0,a=Jt(n,c,a,!1),c=Math.min(a.width,a.height),n.length=n.area=0,s=1/0}return n.length&&(a=Jt(n,c,a,!0),n.length=n.area=0),T(T({},t),{},{children:p.map(v=>Se(v,e))})}return t},it={aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",nameKey:"name",type:"flat",isAnimationActive:"auto",isUpdateAnimationActive:"auto",animationBegin:0,animationDuration:1500,animationEasing:"linear"},li={isAnimationFinished:!1,formatRoot:null,currentRoot:null,nestIndex:[],prevAspectRatio:it.aspectRatio,prevDataKey:it.dataKey};function ci(t){var{content:e,nodeProps:r,type:a,colorPanel:n,onMouseEnter:s,onMouseLeave:o,onClick:l}=t;if(d.isValidElement(e))return d.createElement(R,{onMouseEnter:s,onMouseLeave:o,onClick:l},d.cloneElement(e,r));if(typeof e=="function")return d.createElement(R,{onMouseEnter:s,onMouseLeave:o,onClick:l},e(r));var{x:c,y:p,width:f,height:u,index:m}=r,v=null;f>10&&u>10&&r.children&&a==="nest"&&(v=d.createElement(un,{points:[{x:c+2,y:p+u/2},{x:c+6,y:p+u/2+3},{x:c+2,y:p+u/2+6}]}));var x=null,h=Ha(r.name);f>20&&u>20&&h.width<f&&h.height<u&&(x=d.createElement("text",{x:c+8,y:p+u/2+7,fontSize:14},r.name));var P=n||Ya;return d.createElement("g",null,d.createElement(Ua,ce({fill:r.depth<2?P[m%P.length]:"rgba(255,255,255,0)",stroke:"#fff"},Ys(r,["children"]),{onMouseEnter:s,onMouseLeave:o,onClick:l,"data-recharts-item-index":r.tooltipIndex})),v,x)}function di(t){var e=lt(),r={x:t.nodeProps.x+t.nodeProps.width/2,y:t.nodeProps.y+t.nodeProps.height/2},a=()=>{e(Pr({activeIndex:t.nodeProps.tooltipIndex,activeDataKey:t.dataKey,activeCoordinate:r,activeGraphicalItemId:t.id}))},n=()=>{},s=()=>{e(Xa({activeIndex:t.nodeProps.tooltipIndex,activeDataKey:t.dataKey,activeCoordinate:r,activeGraphicalItemId:t.id}))};return d.createElement(ci,ce({},t,{onMouseEnter:a,onMouseLeave:n,onClick:s}))}var ui=d.memo(t=>{var{dataKey:e,nameKey:r,stroke:a,fill:n,currentRoot:s,id:o}=t,l={dataDefinedOnItem:s,positions:void 0,settings:{stroke:a,strokeWidth:void 0,fill:n,dataKey:e,nameKey:r,name:void 0,hide:!1,type:void 0,color:n,unit:"",graphicalItemId:o}};return d.createElement(ut,{tooltipEntrySettings:l})}),pi={top:0,right:0,bottom:0,left:0};function fi(t){var{content:e,nodeProps:r,isLeaf:a,treemapProps:n,onNestClick:s}=t,{id:o,isAnimationActive:l,animationBegin:c,animationDuration:p,animationEasing:f,isUpdateAnimationActive:u,type:m,colorPanel:v,dataKey:x,onAnimationStart:h,onAnimationEnd:P,onMouseEnter:k,onClick:I,onMouseLeave:g}=n,{width:y,height:A,x:j,y:E}=r,b=-j-y,N=0,w=M=>{(a||m==="nest")&&typeof k=="function"&&k(r,M)},S=M=>{(a||m==="nest")&&typeof g=="function"&&g(r,M)},O=()=>{m==="nest"&&s(r),(a||m==="nest")&&typeof I=="function"&&I(r)},D=d.useCallback(()=>{typeof P=="function"&&P()},[P]),L=d.useCallback(()=>{typeof h=="function"&&h()},[h]);return d.createElement(Ls,{animationId:"treemap-".concat(r.tooltipIndex),from:"translate(".concat(b,"px, ").concat(N,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:c,easing:f,isActive:l,duration:p,onAnimationStart:L,onAnimationEnd:D},M=>d.createElement(R,{onMouseEnter:w,onMouseLeave:S,onClick:O,style:T(T({},M),{},{transformOrigin:"".concat(j," ").concat(E)})},d.createElement(di,{id:o,content:e,dataKey:x,nodeProps:T(T({},r),{},{isAnimationActive:l,isUpdateAnimationActive:!u,width:y,height:A,x:j,y:E}),type:m,colorPanel:v})))}class qr extends d.PureComponent{constructor(){super(...arguments),pe(this,"state",T({},li)),pe(this,"handleClick",e=>{var{onClick:r,type:a}=this.props;if(a==="nest"&&e.children){var{width:n,height:s,dataKey:o,nameKey:l,aspectRatio:c}=this.props,p=Ce({depth:0,node:T(T({},e),{},{x:0,y:0,width:n,height:s}),index:0,dataKey:o,nameKey:l,nestedActiveTooltipIndex:e.tooltipIndex}),f=Se(p,c),{nestIndex:u}=this.state;u.push(e),this.setState({formatRoot:f,currentRoot:p,nestIndex:u})}r&&r(e)}),pe(this,"handleTouchMove",e=>{var r=e.touches[0],a=document.elementFromPoint(r.clientX,r.clientY);if(!(!a||!a.getAttribute||this.state.formatRoot==null)){var n=a.getAttribute("data-recharts-item-index"),s=Gr(this.state.formatRoot,n);if(s){var{dataKey:o,dispatch:l}=this.props,c={x:s.x+s.width/2,y:s.y+s.height/2};l(Pr({activeIndex:n,activeDataKey:o,activeCoordinate:c,activeGraphicalItemId:this.props.id}))}}})}static getDerivedStateFromProps(e,r){if(e.data!==r.prevData||e.type!==r.prevType||e.width!==r.prevWidth||e.height!==r.prevHeight||e.dataKey!==r.prevDataKey||e.aspectRatio!==r.prevAspectRatio){var a=Ce({depth:0,node:{children:e.data,x:0,y:0,width:e.width,height:e.height},index:0,dataKey:e.dataKey,nameKey:e.nameKey}),n=Se(a,e.aspectRatio);return T(T({},r),{},{formatRoot:n,currentRoot:a,nestIndex:[a],prevAspectRatio:e.aspectRatio,prevData:e.data,prevWidth:e.width,prevHeight:e.height,prevDataKey:e.dataKey,prevType:e.type})}return null}handleNestIndex(e,r){var{nestIndex:a}=this.state,{width:n,height:s,dataKey:o,nameKey:l,aspectRatio:c}=this.props,p=Ce({depth:0,node:T(T({},e),{},{x:0,y:0,width:n,height:s}),index:0,dataKey:o,nameKey:l,nestedActiveTooltipIndex:e.tooltipIndex}),f=Se(p,c);a=a.slice(0,r+1),this.setState({formatRoot:f,currentRoot:e,nestIndex:a})}renderNode(e,r){var{content:a,type:n}=this.props,s=T(T(T({},le(this.props)),r),{},{root:e}),o=!r.children||!r.children.length,{currentRoot:l}=this.state,c=((l==null?void 0:l.children)||[]).filter(p=>p.depth===r.depth&&p.name===r.name);return!c.length&&e.depth&&n==="nest"?null:d.createElement(R,{key:"recharts-treemap-node-".concat(s.x,"-").concat(s.y,"-").concat(s.name),className:"recharts-treemap-depth-".concat(r.depth)},d.createElement(fi,{isLeaf:o,content:a,nodeProps:s,treemapProps:this.props,onNestClick:this.handleClick}),r.children&&r.children.length?r.children.map(p=>this.renderNode(r,p)):null)}renderAllNodes(){var{formatRoot:e}=this.state;return e?this.renderNode(e,e):null}renderNestIndex(){var{nameKey:e,nestIndexContent:r}=this.props,{nestIndex:a}=this.state;return d.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},a.map((n,s)=>{var o=jr(n,e,"root"),l;return d.isValidElement(r)&&(l=d.cloneElement(r,n,s)),typeof r=="function"?l=r(n,s):l=o,d.createElement("div",{onClick:this.handleNestIndex.bind(this,n,s),key:"nest-index-".concat(qa()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},l)}))}render(){var e=this.props,{width:r,height:a,className:n,style:s,children:o,type:l}=e,c=Zs(e,Xs),p=le(c);return d.createElement(d.Fragment,null,d.createElement(ui,{dataKey:this.props.dataKey,nameKey:this.props.nameKey,stroke:this.props.stroke,fill:this.props.fill,currentRoot:this.state.currentRoot,id:this.props.id}),d.createElement(Va,ce({},p,{width:r,height:l==="nest"?a-30:a,onTouchMove:this.handleTouchMove}),this.renderAllNodes(),o),l==="nest"&&this.renderNestIndex())}}pe(qr,"displayName","Treemap");function mi(t){var e=lt(),r=za(),a=Ga();if(!Et(r)||!Et(a))return null;var{id:n}=t;return d.createElement(dt,{id:n,type:"treemap"},s=>d.createElement(qr,ce({},t,{id:s,width:r,height:a,dispatch:e})))}function hi(t){var e,r=Q(t,it),{className:a,style:n,width:s,height:o}=r,[l,c]=d.useState(null);return d.createElement(Wa,{preloadedState:{options:ri},reduxStoreName:(e=r.className)!==null&&e!==void 0?e:"Treemap"},d.createElement(Ra,{margin:pi}),d.createElement(Ba,{dispatchTouchEvents:!1,className:a,style:n,width:s,height:o,responsive:!1,ref:p=>{l==null&&p!=null&&c(p)},onMouseEnter:void 0,onMouseLeave:void 0,onClick:void 0,onMouseMove:void 0,onMouseDown:void 0,onMouseUp:void 0,onContextMenu:void 0,onDoubleClick:void 0,onTouchStart:void 0,onTouchMove:void 0,onTouchEnd:void 0},d.createElement(Fa.Provider,{value:l},d.createElement(mi,r))))}var vi=["axis"],yi=d.forwardRef((t,e)=>d.createElement(yr,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vi,tooltipPayloadSearcher:xr,categoricalChartProps:t,ref:e}));const Qt=["#f43f5e","#f97316","#eab308","#10b981","#14b8a6","#0ea5e9","#14b8a6","#ec4899","#6366f1","#84cc16"],er=({icon:t,size:e=14})=>t?he(t)?i.jsx("span",{style:{fontSize:`${e}px`,lineHeight:1},children:t}):i.jsx("img",{src:ve(t),alt:"",style:{width:`${e}px`,height:`${e}px`,borderRadius:"3px"},className:"flex-shrink-0"}):null;function xi({data:t,loading:e,currency:r="ARS",onSliceClick:a}){if(e)return i.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsx("div",{className:"h-4 w-32 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),i.jsx("div",{className:"h-64 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!t||t.length===0)return i.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Gastos por Categoria"}),i.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:i.jsx("p",{children:"No hay datos disponibles"})})]});const n=({active:o,payload:l})=>{if(o&&l&&l.length){const c=l[0].payload;return i.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(er,{icon:c.icon,size:16}),i.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:c.name})]}),i.jsx("p",{style:{color:"var(--accent-red)"},children:W(c.value)}),i.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[c.percentage.toFixed(1),"%"]})]})}return null},s=o=>{const{payload:l}=o;return i.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:[l.slice(0,6).map((c,p)=>{const f=t.find(u=>u.name===c.value);return i.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)"},children:[f!=null&&f.icon?i.jsx(er,{icon:f.icon,size:12}):i.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:c.color}}),i.jsx("span",{style:{color:"var(--text-secondary)"},children:c.value.length>12?c.value.substring(0,12)+"...":c.value})]},`legend-${p}`)}),l.length>6&&i.jsxs("div",{className:"px-2 py-1 rounded-lg text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:["+",l.length-6," mas"]})]})};return i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Gastos por categora"}),i.jsx(Pe,{width:"100%",height:240,children:i.jsxs(Za,{children:[i.jsx(Ja,{data:t,cx:"50%",cy:"45%",innerRadius:45,outerRadius:80,paddingAngle:2,dataKey:"value",nameKey:"name",children:t.map((o,l)=>i.jsx(Qa,{fill:Qt[l%Qt.length],stroke:"transparent",style:{cursor:a?"pointer":"default"},onClick:()=>a==null?void 0:a(o.name)},`cell-${l}`))}),i.jsx(Ae,{content:i.jsx(n,{})}),i.jsx(Ar,{content:s})]})})]})}const We=["#f43f5e","#f97316","#eab308","#10b981","#14b8a6","#0ea5e9","#8b5cf6","#ec4899","#6366f1","#84cc16"],gi=({x:t,y:e,width:r,height:a,name:n,value:s,percentage:o,index:l,color:c,currency:p,onClick:f})=>{if(r<4||a<4)return null;const u=r<60||a<40,m=!u&&(r<120||a<60),v=c||We[l%We.length];return i.jsxs("g",{onClick:()=>f==null?void 0:f(n),style:{cursor:f?"pointer":"default"},children:[i.jsx("rect",{x:t,y:e,width:r,height:a,rx:4,ry:4,fill:v,stroke:"var(--bg-secondary)",strokeWidth:2,style:{transition:"opacity 0.15s"},className:"hover:opacity-80"}),!u&&i.jsxs(i.Fragment,{children:[i.jsx("text",{x:t+r/2,y:e+(m?a/2-6:a/2-12),textAnchor:"middle",fill:"white",fontSize:m?11:12,fontWeight:600,children:n.length>Math.floor(r/7)?n.substring(0,Math.floor(r/7))+"...":n}),!m&&i.jsx("text",{x:t+r/2,y:e+a/2+4,textAnchor:"middle",fill:"rgba(255,255,255,0.8)",fontSize:11,children:W(s,p)}),i.jsxs("text",{x:t+r/2,y:e+(m?a/2+10:a/2+20),textAnchor:"middle",fill:"rgba(255,255,255,0.6)",fontSize:10,children:[o==null?void 0:o.toFixed(1),"%"]})]})]})};function bi({data:t,currency:e="ARS",onCategoryClick:r}){if(!t||t.length===0)return i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Gastos por categoria"}),i.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:i.jsx("p",{children:"No hay datos disponibles"})})]});const a=t.map((s,o)=>({...s,color:We[o%We.length]})),n=({active:s,payload:o})=>{var l;if(s&&o&&o.length){const c=o[0].payload;return i.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[c.icon&&(he(c.icon)?i.jsx("span",{style:{fontSize:"14px",lineHeight:1},children:c.icon}):i.jsx("img",{src:ve(c.icon),alt:"",className:"w-3.5 h-3.5 rounded-sm"})),i.jsx("p",{className:"font-medium text-sm",style:{color:"var(--text-primary)"},children:c.name})]}),i.jsx("p",{className:"text-sm",style:{color:"var(--accent-red)"},children:W(c.value,e)}),i.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[(l=c.percentage)==null?void 0:l.toFixed(1),"% del total"]})]})}return null};return i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Gastos por categoria"}),i.jsx(Pe,{width:"100%",height:280,children:i.jsx(hi,{data:a,dataKey:"value",nameKey:"name",content:i.jsx(gi,{currency:e,onClick:r}),children:i.jsx(Ae,{content:i.jsx(n,{})})})})]})}function ji({data:t,loading:e,currency:r="ARS"}){if(e)return i.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsx("div",{className:"h-4 w-40 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),i.jsx("div",{className:"h-64 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!t||t.length===0)return i.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Ingresos vs Gastos"}),i.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:i.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:s,payload:o,label:l})=>s&&o&&o.length?i.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("p",{className:"font-medium mb-1",style:{color:"var(--text-primary)"},children:l}),o.map((c,p)=>i.jsxs("p",{style:{color:c.color},children:[c.name,": ",W(c.value)]},p)),o.length===2&&i.jsxs("p",{className:"mt-1 pt-1 text-sm",style:{borderTop:"1px solid var(--border-subtle)",color:o[0].value-o[1].value>=0?"var(--accent-green)":"var(--accent-red)"},children:["Balance: ",W(o[0].value-o[1].value)]})]}):null,n=s=>{const o=Math.round(s*100)/100;return Math.abs(o)<.01?"0":o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(0)}K`:o.toFixed(0)};return i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Ingresos vs Gastos"}),i.jsx(Pe,{width:"100%",height:240,children:i.jsxs(en,{data:t,margin:{top:5,right:5,left:-15,bottom:0},children:[i.jsx(vt,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",strokeOpacity:.5,vertical:!1}),i.jsx(mt,{dataKey:"month",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),i.jsx(ht,{tickFormatter:n,tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),i.jsx(Ae,{content:i.jsx(a,{}),cursor:{fill:"var(--bg-tertiary)",opacity:.3}}),i.jsx(Ar,{wrapperStyle:{paddingTop:"8px"},formatter:s=>i.jsx("span",{style:{color:"var(--text-muted)",fontSize:"11px"},children:s})}),i.jsx(It,{dataKey:"ingresos",name:"Ingresos",fill:"var(--accent-green)",radius:[3,3,0,0],maxBarSize:32}),i.jsx(It,{dataKey:"gastos",name:"Gastos",fill:"var(--accent-red)",radius:[3,3,0,0],maxBarSize:32})]})})]})}function Pi({data:t,loading:e,currency:r="ARS"}){if(e)return i.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsx("div",{className:"h-4 w-36 skeleton-shimmer rounded mb-4",style:{backgroundColor:"var(--bg-tertiary)"}}),i.jsx("div",{className:"h-64 flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-8 border-2 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"})})]});if(!t||t.length===0)return i.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Evolucion del Balance"}),i.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:"var(--text-secondary)"},children:i.jsx("p",{children:"No hay datos disponibles"})})]});const a=({active:p,payload:f,label:u})=>{if(p&&f&&f.length){const m=f[0].value;return i.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:u}),i.jsxs("p",{style:{color:m>=0?"var(--accent-green)":"var(--accent-red)"},children:["Balance: ",W(m)]})]})}return null},n=p=>{const f=Math.round(p*100)/100;return Math.abs(f)<.01?"0":f>=1e6||f<=-1e6?`${(f/1e6).toFixed(1)}M`:f>=1e3||f<=-1e3?`${(f/1e3).toFixed(0)}K`:f.toFixed(0)},s=t.map(p=>p.balance),o=Math.min(...s),l=Math.max(...s),c=(l-o)*.1||1e3;return i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Evolucin del balance"}),i.jsx(Pe,{width:"100%",height:240,children:i.jsxs(Ks,{data:t,margin:{top:5,right:5,left:-15,bottom:0},children:[i.jsx(vt,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",strokeOpacity:.5,vertical:!1}),i.jsx(mt,{dataKey:"month",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),i.jsx(ht,{tickFormatter:n,tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1,domain:[o-c,l+c]}),i.jsx(Ae,{content:i.jsx(a,{})}),i.jsx(Er,{y:0,stroke:"var(--text-muted)",strokeDasharray:"3 3",strokeOpacity:.3}),i.jsx(Lr,{type:"monotone",dataKey:"balance",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:0,r:3},activeDot:{r:5,fill:"var(--accent-primary)",stroke:"var(--bg-secondary)",strokeWidth:2}})]})})]})}const Ai=["Lu","Ma","Mi","Ju","Vi","Sa","Do"],ki=t=>t.replace(/^[\p{Emoji}\p{Emoji_Presentation}\u200d\uFE0F]+\s*/u,"").trim()||t;function Ni({movements:t,dateRange:e,currency:r="ARS",categoryIconMap:a={}}){const[n,s]=d.useState(null),[o,l]=d.useState(null),[c,p]=d.useState({x:0,y:0}),{gastosPorDia:f,percentiles:u,weeks:m,monthLabels:v}=d.useMemo(()=>{if(!(e!=null&&e.from)||!(e!=null&&e.to)||!(t!=null&&t.length))return{gastosPorDia:{},percentiles:[0,0,0],weeks:[],monthLabels:[]};const y={};t.filter(C=>C.tipo==="gasto").forEach(C=>{const $=C.fecha,K=r==="ARS"?C.montoPesos||C.monto||0:C.montoDolares||0;y[$]||(y[$]={total:0,count:0,movimientos:[]}),y[$].total+=K,y[$].count+=1,y[$].movimientos.push(C)});const j=Object.values(y).map(C=>C.total).filter(C=>C>0);j.sort((C,$)=>C-$);const E=(C,$)=>{if(C.length===0)return 0;const K=Math.ceil(C.length*$)-1;return C[Math.max(0,K)]},b=E(j,.25),N=E(j,.5),w=E(j,.75),S=ea(e.from,{weekStartsOn:1}),O=ta(e.to,{weekStartsOn:1}),D=an({start:S,end:O}),L=[];for(let C=0;C<D.length;C+=7)L.push(D.slice(C,C+7));const M=[];let G=-1;return L.forEach((C,$)=>{const K=C[0],te=K.getMonth();te!==G&&(M.push({label:z(K,"MMM",{locale:V}),col:$}),G=te)}),{gastosPorDia:y,percentiles:[b,N,w],weeks:L,monthLabels:M}},[t,e,r]),x=y=>{const A=f[y];if(!A||A.total===0)return"var(--bg-tertiary)";const j=A.total;return j<=u[0]?"rgba(244, 63, 94, 0.25)":j<=u[1]?"rgba(244, 63, 94, 0.5)":j<=u[2]?"rgba(244, 63, 94, 0.75)":"rgba(244, 63, 94, 1)"},h=(y,A)=>{var b;s(y);const j=A.currentTarget.getBoundingClientRect(),E=(b=A.currentTarget.closest(".heatmap-container"))==null?void 0:b.getBoundingClientRect();E&&p({x:j.left-E.left+j.width/2,y:j.top-E.top-8})},P=y=>{l(o===y?null:y)},k=o?f[o]:null;if(!(e!=null&&e.from)||!(e!=null&&e.to))return null;const g=`20px repeat(${m.length||1}, 1fr)`;return i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("h3",{className:"text-sm font-medium mb-3",style:{color:"var(--text-primary)"},children:"Mapa de gastos diarios"}),i.jsxs("div",{className:"heatmap-container relative",children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:g,gap:"0 2px",marginBottom:"4px"},children:[i.jsx("div",{})," ",m.map((y,A)=>{const j=v.find(E=>E.col===A);return i.jsx("div",{className:"text-[10px] font-medium truncate",style:{color:"var(--text-muted)"},children:j?j.label.charAt(0).toUpperCase()+j.label.slice(1):""},A)})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:g,gap:"2px"},children:Ai.map((y,A)=>i.jsxs(d.Fragment,{children:[i.jsx("div",{className:"flex items-center justify-end pr-0.5",style:{fontSize:"9px",color:"var(--text-muted)",visibility:A%2===0?"visible":"hidden"},children:y}),m.map((j,E)=>{const b=j[A],N=z(b,"yyyy-MM-dd"),w=b>=e.from&&b<=e.to,S=n===N,O=o===N;return i.jsx("div",{className:"cursor-pointer transition-all duration-150",style:{aspectRatio:"1",borderRadius:"20%",backgroundColor:w?x(N):"transparent",opacity:w?1:.15,outline:O?"2px solid var(--accent-primary)":S?"1px solid var(--text-muted)":"none",outlineOffset:"1px"},onMouseEnter:D=>h(N,D),onMouseLeave:()=>s(null),onClick:()=>P(N)},N)})]},y))}),n&&f[n]&&i.jsxs("div",{className:"absolute z-10 px-2.5 py-1.5 rounded-lg shadow-lg pointer-events-none",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)",left:`${c.x}px`,top:`${c.y}px`,transform:"translate(-50%, -100%)"},children:[i.jsx("p",{className:"text-xs font-medium capitalize",style:{color:"var(--text-primary)"},children:z(new Date(n+"T12:00:00"),"EEEE d 'de' MMMM",{locale:V})}),i.jsx("p",{className:"text-xs",style:{color:"var(--accent-red)"},children:W(f[n].total,r)}),i.jsxs("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:[f[n].count," transaccion",f[n].count!==1?"es":""]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 justify-end",children:[i.jsx("span",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:"Menos"}),i.jsx("div",{className:"rounded-[3px]",style:{width:"12px",height:"12px",backgroundColor:"var(--bg-tertiary)"}}),i.jsx("div",{className:"rounded-[3px]",style:{width:"12px",height:"12px",backgroundColor:"rgba(244, 63, 94, 0.25)"}}),i.jsx("div",{className:"rounded-[3px]",style:{width:"12px",height:"12px",backgroundColor:"rgba(244, 63, 94, 0.5)"}}),i.jsx("div",{className:"rounded-[3px]",style:{width:"12px",height:"12px",backgroundColor:"rgba(244, 63, 94, 0.75)"}}),i.jsx("div",{className:"rounded-[3px]",style:{width:"12px",height:"12px",backgroundColor:"rgba(244, 63, 94, 1)"}}),i.jsx("span",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:"Mas"})]})]}),o&&k&&i.jsxs("div",{className:"mt-4 pt-4 space-y-2",style:{borderTop:"1px solid var(--border-subtle)"},children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-medium capitalize",style:{color:"var(--text-primary)"},children:z(new Date(o+"T12:00:00"),"EEEE d 'de' MMMM yyyy",{locale:V})}),i.jsx("button",{onClick:()=>l(null),className:"p-1 rounded-lg transition-colors hover:bg-[var(--bg-tertiary)]",children:i.jsx("svg",{className:"w-4 h-4",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"space-y-1",children:k.movimientos.map((y,A)=>{const j=y.categoria||"Sin categoria",E=ki(j),b=a[E]||a[j];return i.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[b&&(he(b)?i.jsx("span",{className:"text-sm flex-shrink-0",children:b}):i.jsx("img",{src:ve(b),alt:"",className:"w-4 h-4 rounded-sm flex-shrink-0"})),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-xs font-medium truncate",style:{color:"var(--text-primary)"},children:E}),y.nota&&i.jsx("p",{className:"text-[10px] truncate",style:{color:"var(--text-muted)"},children:y.nota})]})]}),i.jsx("span",{className:"text-xs font-medium ml-2",style:{color:"var(--accent-red)"},children:W(r==="ARS"?y.montoPesos||y.monto||0:y.montoDolares||0,r)})]},y.id||A)})}),i.jsxs("p",{className:"text-[10px] text-right",style:{color:"var(--text-muted)"},children:["Total: ",W(k.total,r)," (",k.count," transacciones)"]})]})]})}const se=["#f43f5e","#f97316","#eab308","#10b981","#14b8a6","#0ea5e9","#8b5cf6","#ec4899","#6366f1","#84cc16"],tr=({icon:t,size:e=12})=>t?he(t)?i.jsx("span",{style:{fontSize:`${e}px`,lineHeight:1},children:t}):i.jsx("img",{src:ve(t),alt:"",style:{width:`${e}px`,height:`${e}px`,borderRadius:"2px"},className:"flex-shrink-0"}):null,Ee=t=>t.replace(/^[\p{Emoji}\p{Emoji_Presentation}\u200d\uFE0F]+\s*/u,"").trim()||t;function Ei({movements:t,dateRange:e,currency:r="ARS",categoryIconMap:a={}}){const[n,s]=d.useState(new Set),{chartData:o,categorias:l}=d.useMemo(()=>{if(!(e!=null&&e.from)||!(e!=null&&e.to)||!(t!=null&&t.length))return{chartData:[],categorias:[]};const u=t.filter(g=>g.tipo==="gasto");if(u.length===0)return{chartData:[],categorias:[]};const m={};u.forEach(g=>{const y=Ee(g.categoria||"Sin categoria"),A=r==="ARS"?g.montoPesos||g.monto||0:g.montoDolares||0;m[y]=(m[y]||0)+A});const v=Object.entries(m).sort(([,g],[,y])=>y-g),x=v.slice(0,8).map(([g])=>g),h=v.length>8,P=h?[...x,"Otros"]:x;return{chartData:we({start:e.from,end:e.to}).map(g=>{const y=at(g),A=Oe(g),j=z(g,"MMM",{locale:V}),E={month:j.charAt(0).toUpperCase()+j.slice(1)};return P.forEach(b=>{E[b]=0}),u.forEach(b=>{const N=new Date(b.fecha);if(N>=y&&N<=A){const w=Ee(b.categoria||"Sin categoria"),S=r==="ARS"?b.montoPesos||b.monto||0:b.montoDolares||0;x.includes(w)?E[w]+=S:h&&(E.Otros+=S)}}),E}),categorias:P}},[t,e,r]),c=u=>{s(m=>{const v=new Set(m);return v.has(u)?v.delete(u):v.add(u),v})},p=u=>{const m=Math.round(u*100)/100;return Math.abs(m)<.01?"0":m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(0)}K`:m.toFixed(0)},f=({active:u,payload:m,label:v})=>{if(u&&m&&m.length){const x=m.reduce((h,P)=>h+(P.value||0),0);return i.jsxs("div",{className:"px-3 py-2 rounded-lg shadow-lg max-w-[220px]",style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("p",{className:"font-medium text-sm mb-1.5",style:{color:"var(--text-primary)"},children:v}),m.filter(h=>h.value>0).sort((h,P)=>P.value-h.value).map((h,P)=>i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[a[h.name]?i.jsx(tr,{icon:a[h.name],size:12}):i.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:h.color}}),i.jsx("span",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:Ee(h.name)})]}),i.jsx("span",{className:"text-xs font-medium flex-shrink-0",style:{color:"var(--text-primary)"},children:W(h.value,r)})]},P)),i.jsxs("div",{className:"mt-1.5 pt-1.5 flex items-center justify-between",style:{borderTop:"1px solid var(--border-subtle)"},children:[i.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:"Total"}),i.jsx("span",{className:"text-xs font-bold",style:{color:"var(--accent-red)"},children:W(x,r)})]})]})}return null};return o.length===0?null:i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[i.jsx("h3",{className:"text-sm font-medium mb-4",style:{color:"var(--text-primary)"},children:"Composicion de gastos por mes"}),i.jsx(Pe,{width:"100%",height:280,children:i.jsxs(yi,{data:o,margin:{top:5,right:5,left:-15,bottom:0},children:[i.jsx(vt,{strokeDasharray:"3 3",stroke:"var(--border-subtle)",strokeOpacity:.5,vertical:!1}),i.jsx(mt,{dataKey:"month",tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),i.jsx(ht,{tickFormatter:p,tick:{fill:"var(--text-muted)",fontSize:11},axisLine:!1,tickLine:!1}),i.jsx(Ae,{content:i.jsx(f,{})}),l.map((u,m)=>i.jsx(zr,{type:"monotone",dataKey:u,stackId:"1",stroke:se[m%se.length],fill:se[m%se.length],fillOpacity:n.has(u)?0:.6,strokeOpacity:n.has(u)?0:1,strokeWidth:n.has(u)?0:1,hide:n.has(u)},u))]})}),i.jsx("div",{className:"flex flex-wrap gap-1.5 justify-center mt-3",children:l.map((u,m)=>{const v=n.has(u);return i.jsxs("button",{onClick:()=>c(u),className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs transition-opacity",style:{backgroundColor:"var(--bg-tertiary)",opacity:v?.4:1},children:[a[u]?i.jsx(tr,{icon:a[u],size:12}):i.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:se[m%se.length]}}),i.jsx("span",{style:{color:"var(--text-secondary)"},children:(()=>{const x=Ee(u);return x.length>12?x.substring(0,12)+"...":x})()})]},u)})})]})}function Ie({data:t,color:e="var(--accent-primary)",width:r=80,height:a=30,gradientId:n}){const s=d.useMemo(()=>{if(!t||t.length<2)return null;const l=Math.min(...t),p=Math.max(...t)-l||1,f=2,u=t.map((k,I)=>({x:I/(t.length-1)*r,y:f+(1-(k-l)/p)*(a-f*2)})),m=[];for(let k=0;k<u.length;k++)if(k===0)m.push(`M ${u[k].x},${u[k].y}`);else{const I=u[k-1],g=u[k],y=(I.x+g.x)/2;m.push(`C ${y},${I.y} ${y},${g.y} ${g.x},${g.y}`)}const v=m.join(" "),x=u[u.length-1],h=u[0],P=`${v} L ${x.x},${a} L ${h.x},${a} Z`;return{linePath:v,areaPath:P}},[t,r,a]);if(!s)return null;const o=n||`sparkline-grad-${Math.random().toString(36).slice(2,8)}`;return i.jsxs("svg",{width:r,height:a,viewBox:`0 0 ${r} ${a}`,className:"flex-shrink-0",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:o,x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:.2}),i.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:0})]})}),i.jsx("path",{d:s.areaPath,fill:`url(#${o})`}),i.jsx("path",{d:s.linePath,fill:"none",stroke:e,strokeWidth:1.5,strokeLinecap:"round"})]})}function Ii({isOpen:t,onClose:e,categoryName:r,categoryIcon:a,movements:n,currency:s="ARS",dateRange:o}){const l=d.useRef(null);d.useEffect(()=>{if(!t)return;const u=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t,e]),d.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const c=d.useMemo(()=>[...n].sort((u,m)=>new Date(m.fecha)-new Date(u.fecha)),[n]),p=d.useMemo(()=>n.reduce((u,m)=>u+(s==="ARS"?m.montoPesos||m.monto||0:m.montoDolares||0),0),[n,s]),f=n.length>0?p/n.length:0;return t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-50 transition-opacity duration-300",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:e}),i.jsxs("div",{className:`fixed z-50\r
          bottom-0 left-0 right-0 max-h-[85vh] rounded-t-2xl\r
          lg:bottom-auto lg:left-1/2 lg:top-[35%] lg:-translate-x-1/2 lg:-translate-y-1/2 lg:rounded-2xl lg:max-w-lg lg:w-full lg:max-h-[70vh]`,style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)",boxShadow:"0 -8px 40px rgba(0, 0, 0, 0.3)",animation:"slideUp 0.3s var(--ease-out-expo)"},ref:l,children:[i.jsx("div",{className:"flex justify-center pt-3 lg:hidden",children:i.jsx("div",{className:"w-10 h-1 rounded-full",style:{backgroundColor:"var(--text-muted)",opacity:.3}})}),i.jsxs("div",{className:"p-4 flex items-center justify-between",style:{borderBottom:"1px solid var(--border-subtle)"},children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"var(--accent-red-dim)"},children:a&&he(a)?i.jsx("span",{className:"text-xl",children:a}):a?i.jsx("img",{src:ve(a),alt:"",className:"w-6 h-6 rounded"}):i.jsx("svg",{className:"w-5 h-5",style:{color:"var(--accent-red)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h3",{className:"font-semibold text-sm truncate",style:{color:"var(--text-primary)"},children:r}),i.jsx("p",{className:"text-lg font-bold",style:{color:"var(--accent-red)"},children:W(p,s)})]})]}),i.jsx("button",{onClick:e,className:"p-2 rounded-xl transition-colors hover:bg-[var(--bg-tertiary)]",children:i.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"overflow-y-auto p-4 space-y-1.5",style:{maxHeight:"calc(70vh - 180px)"},children:c.length===0?i.jsx("p",{className:"text-center py-8 text-sm",style:{color:"var(--text-secondary)"},children:"Sin movimientos en este periodo"}):c.map((u,m)=>{const v=s==="ARS"?u.montoPesos||u.monto||0:u.montoDolares||0;return i.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors hover:bg-[var(--bg-tertiary)]",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:z(new Date(u.fecha+"T12:00:00"),"dd MMM yyyy",{locale:V})}),i.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:u.cuenta})]}),u.nota&&i.jsx("p",{className:"text-xs truncate mt-0.5",style:{color:"var(--text-muted)"},children:u.nota})]}),i.jsxs("span",{className:"font-semibold text-sm flex-shrink-0",style:{color:"var(--accent-red)"},children:["-",W(v,s)]})]},u.id||m)})}),c.length>0&&i.jsxs("div",{className:"p-4 flex items-center justify-between",style:{borderTop:"1px solid var(--border-subtle)"},children:[i.jsxs("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:[n.length," transaccion",n.length!==1?"es":""]}),i.jsxs("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:["Promedio: ",W(f,s)]})]})]}),i.jsx("style",{children:`
        @keyframes slideUp {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        @media (min-width: 1024px) {
          @keyframes slideUp {
            from { opacity: 0; transform: translate(-50%, -46%) scale(0.95); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
          }
        }
      `})]}):null}function Di(){const{filteredMovements:t,dateRange:e,currency:r,loading:a,movements:n,categoryIconMap:s}=ra(),[o,l]=d.useState("pie"),[c,p]=d.useState(!1),[f,u]=d.useState(null),m=d.useMemo(()=>{if(!e.from||!e.to)return[];const g=t.filter(b=>b.tipo==="gasto"),y={};let A=0,j=0;g.forEach(b=>{const N=b.categoria||"Sin categoria",w=N.replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||N,S=b.montoPesos||b.monto||0,O=b.montoDolares||0;A+=S,j+=O,y[w]||(y[w]={pesos:0,dolares:0}),y[w].pesos+=S,y[w].dolares+=O});const E=r==="ARS"?A:j;return Object.entries(y).map(([b,N])=>{const w=r==="ARS"?N.pesos:N.dolares;return{name:b,value:w,pesos:N.pesos,dolares:N.dolares,percentage:E>0?w/E*100:0,icon:s[b]||null}}).sort((b,N)=>N.value-b.value).slice(0,10)},[t,e,r,s]),v=d.useMemo(()=>!e.from||!e.to?[]:we({start:e.from,end:e.to}).map(y=>{const A=at(y),j=Oe(y),E=z(y,"yyyy-MM"),b=z(y,"MMM",{locale:V});let N=0,w=0,S=0,O=0;return t.forEach(D=>{const L=new Date(D.fecha);if(L>=A&&L<=j){const M=D.montoPesos||D.monto||0,G=D.montoDolares||0;D.tipo==="ingreso"?(N+=M,S+=G):D.tipo==="gasto"&&(w+=M,O+=G)}}),{month:b.charAt(0).toUpperCase()+b.slice(1),monthKey:E,ingresos:r==="ARS"?N:S,gastos:r==="ARS"?w:O}}),[t,e,r]),x=d.useMemo(()=>{if(!e.from||!e.to)return[];const g=we({start:e.from,end:e.to}),y=[...t].sort((A,j)=>new Date(A.fecha)-new Date(j.fecha));return g.map(A=>{const j=Oe(A),E=z(A,"MMM",{locale:V});let b=0,N=0;return y.forEach(w=>{if(new Date(w.fecha)<=j){const O=w.montoPesos||w.monto||0,D=w.montoDolares||0;w.tipo==="ingreso"?(b+=O,N+=D):w.tipo==="gasto"&&(b-=O,N-=D)}}),{month:E.charAt(0).toUpperCase()+E.slice(1),balance:r==="ARS"?b:N}})},[t,e,r]),h=d.useMemo(()=>{if(!e.from||!e.to)return{totalIngresos:0,totalGastos:0,balance:0,savingsRate:0,variaciones:{ingresos:null,gastos:null,balance:null,ahorro:null},sparklines:{ingresos:[],gastos:[],balance:[],ahorro:[]},periodoAnteriorLabel:""};new Date(e.from).setHours(0,0,0,0),new Date(e.to).setHours(23,59,59,999);let A=0,j=0,E=0,b=0;t.forEach(_=>{const B=_.montoPesos||_.monto||0,Y=_.montoDolares||0;_.tipo==="ingreso"?(A+=B,E+=Y):_.tipo==="gasto"&&(j+=B,b+=Y)});const N=r==="ARS"?A:E,w=r==="ARS"?j:b,S=N-w,O=N>0?(N-w)/N*100:0,D=rn(e.to,e.from),L={from:Ot(e.from,D+1),to:Ot(e.from,1)},M=new Date(L.from);M.setHours(0,0,0,0);const G=new Date(L.to);G.setHours(23,59,59,999);let C=0,$=0;n.forEach(_=>{const B=new Date(_.fecha);if(B>=M&&B<=G){const Y=r==="ARS"?_.montoPesos||_.monto||0:_.montoDolares||0;_.tipo==="ingreso"?C+=Y:_.tipo==="gasto"&&($+=Y)}});const K=C-$,te=C>0?(C-$)/C*100:0,re=(_,B)=>B===0?null:(_-B)/Math.abs(B)*100,ke={ingresos:re(N,C),gastos:re(w,$),balance:re(S,K),ahorro:O-te},Vr=we({start:e.from,end:e.to}),xt=[],gt=[],bt=[],jt=[];Vr.forEach(_=>{const B=at(_),Y=Oe(_);let ae=0,Ne=0;t.forEach(ne=>{const Pt=new Date(ne.fecha);if(Pt>=B&&Pt<=Y){const At=r==="ARS"?ne.montoPesos||ne.monto||0:ne.montoDolares||0;ne.tipo==="ingreso"?ae+=At:ne.tipo==="gasto"&&(Ne+=At)}}),xt.push(ae),gt.push(Ne),bt.push(ae-Ne),jt.push(ae>0?(ae-Ne)/ae*100:0)});const Hr=`${z(L.from,"d MMM",{locale:V})} - ${z(L.to,"d MMM",{locale:V})}`;return{totalIngresos:N,totalGastos:w,balance:S,savingsRate:O,variaciones:ke,sparklines:{ingresos:xt,gastos:gt,balance:bt,ahorro:jt},periodoAnteriorLabel:Hr}},[t,n,e,r]),P=d.useMemo(()=>f?t.filter(g=>{if(g.tipo!=="gasto")return!1;const y=g.categoria||"Sin categoria";return(y.replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||y)===f}):[],[t,f]),k=g=>{u(g),p(!0)},I=({value:g,invertColor:y=!1,label:A})=>{if(g==null||!isFinite(g))return null;const j=g>0,b=(y?!j:j)?"var(--accent-green)":"var(--accent-red)",N=j?"":"";return i.jsxs("div",{className:"flex items-center gap-1 mt-1",title:A,children:[i.jsxs("span",{className:"text-[10px] font-semibold",style:{color:b},children:[N," ",Math.abs(g).toFixed(1),"%"]}),i.jsx("span",{className:"text-[9px]",style:{color:"var(--text-muted)"},children:"vs anterior"})]})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[i.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Estadisticas"}),i.jsx(tn,{})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[i.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Total Ingresos"}),h.sparklines.ingresos.length>=2&&i.jsx(Ie,{data:h.sparklines.ingresos,color:"var(--accent-green)",gradientId:"spark-ingresos"})]}),i.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:"var(--accent-green)"},children:a?"...":W(h.totalIngresos,r)}),i.jsx(I,{value:h.variaciones.ingresos,label:`Comparado con ${h.periodoAnteriorLabel}`})]}),i.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Total Gastos"}),h.sparklines.gastos.length>=2&&i.jsx(Ie,{data:h.sparklines.gastos,color:"var(--accent-red)",gradientId:"spark-gastos"})]}),i.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:"var(--accent-red)"},children:a?"...":W(h.totalGastos,r)}),i.jsx(I,{value:h.variaciones.gastos,invertColor:!0,label:`Comparado con ${h.periodoAnteriorLabel}`})]}),i.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Balance"}),h.sparklines.balance.length>=2&&i.jsx(Ie,{data:h.sparklines.balance,color:h.balance>=0?"var(--accent-primary)":"var(--accent-red)",gradientId:"spark-balance"})]}),i.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:h.balance>=0?"var(--accent-green)":"var(--accent-red)"},children:a?"...":W(h.balance,r)}),i.jsx(I,{value:h.variaciones.balance,label:`Comparado con ${h.periodoAnteriorLabel}`})]}),i.jsxs("div",{className:"rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:"var(--text-secondary)"},children:"Tasa de Ahorro"}),h.sparklines.ahorro.length>=2&&i.jsx(Ie,{data:h.sparklines.ahorro,color:"var(--accent-primary)",gradientId:"spark-ahorro"})]}),i.jsx("p",{className:"text-xl lg:text-2xl font-bold",style:{color:h.savingsRate>=0?"var(--accent-primary)":"var(--accent-red)"},children:a?"...":`${h.savingsRate.toFixed(1)}%`}),i.jsx(I,{value:h.variaciones.ahorro,label:`Comparado con ${h.periodoAnteriorLabel}`})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("button",{onClick:()=>l("pie"),className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all",style:{backgroundColor:o==="pie"?"var(--accent-primary)":"var(--bg-tertiary)",color:o==="pie"?"white":"var(--text-secondary)"},children:"Torta"}),i.jsx("button",{onClick:()=>l("treemap"),className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition-all",style:{backgroundColor:o==="treemap"?"var(--accent-primary)":"var(--bg-tertiary)",color:o==="treemap"?"white":"var(--text-secondary)"},children:"Treemap"})]}),o==="pie"?i.jsx(xi,{data:m,loading:a,currency:r,onSliceClick:k}):i.jsx(bi,{data:m,currency:r,onCategoryClick:k})]}),i.jsx(ji,{data:v,loading:a,currency:r})]}),i.jsx(Pi,{data:x,loading:a,currency:r}),i.jsx(Ni,{movements:t,dateRange:e,currency:r,categoryIconMap:s}),i.jsx(Ei,{movements:t,dateRange:e,currency:r,categoryIconMap:s}),i.jsx(Ii,{isOpen:c,onClose:()=>{p(!1),u(null)},categoryName:f||"",categoryIcon:f?s[f]:null,movements:P,currency:r,dateRange:e})]})}export{Di as default};
