import{f as ce,c as S,u as pe,bs as ue,r as d,bt as ge,bu as ye,bv as ve,y as be,j as e,L as fe}from"./index-DCmWVZK1.js";import{E as re}from"./ExpensePieChart-BAJWvbtV.js";import"./PieChart-DAgHKZXE.js";import"./Legend-BRVVBzqV.js";function je(p,u){const{totalIngresos:c,totalGastos:o,balance:x,ahorroRate:l,prevMonthLabel:n,prevTotalIngresos:f,prevTotalGastos:m,gastosPorCategoria:k,ingresosPorCategoria:j,topGastos:C,gastoDiario:E,diaMasCaro:L,diasSinGastos:g,diasDelMes:N,transferencias:$,cuotasActivas:R,movimientos:A,cuentas:v,currency:w,proyeccion:P}=p,U=w,i=r=>ce(r,U),O=new Date().toLocaleDateString("es-AR"),D=(r,y)=>{if(!y||y===0)return"N/A";const T=(r-y)/Math.abs(y)*100;return(T>=0?"+":"")+T.toFixed(1)+"%"};let a=`# Resumen Financiero â€” ${u}

`;if(a+=`## Resumen Ejecutivo

`,a+=`| | ARS |
|---|---|
`,a+=`| Total ingresos | ${i(c)} |
`,a+=`| Total gastos | ${i(o)} |
`,a+=`| Balance neto | ${i(x)} |
`,a+=`| Tasa de ahorro | ${l}% |

`,n&&(a+=`## Comparativa vs ${n}

`,a+=`| | ${n} | ${u} | VariaciÃ³n |
|---|---|---|---|
`,a+=`| Ingresos | ${i(f)} | ${i(c)} | ${D(c,f)} |
`,a+=`| Gastos | ${i(m)} | ${i(o)} | ${D(o,m)} |

`),v&&v.length>0&&(a+=`## Balance por Cuenta

`,a+=`| Cuenta | Tipo | Saldo actual |
|---|---|---|
`,v.forEach(r=>{r.ocultaDelBalance||(a+=`| ${r.nombre} | ${r.tipo} | ${i(r.balanceActual)} |
`)}),a+=`
`),k&&k.length>0&&(a+=`## Gastos por CategorÃ­a

`,a+=`| CategorÃ­a | Monto | % |
|---|---|---|
`,k.forEach(r=>{a+=`| ${r.name} | ${i(r.value)} | ${r.percentage.toFixed(1)}% |
`}),a+=`
`),j&&j.length>0&&(a+=`## Ingresos por CategorÃ­a

`,a+=`| CategorÃ­a | Monto | % |
|---|---|---|
`,j.forEach(r=>{a+=`| ${r.name} | ${i(r.value)} | ${r.percentage.toFixed(1)}% |
`}),a+=`
`),R&&R.length>0&&(a+=`## Cuotas Activas

`,a+=`| DescripciÃ³n | Cuotas | Monto mensual |
|---|---|---|
`,R.forEach(r=>{a+=`| ${r.nota||"Sin descripciÃ³n"} | ${r.cuota} | ${i(r.monto)} |
`}),a+=`
`),C&&C.length>0&&(a+=`## Top 5 Gastos del Mes

`,a+=`| Fecha | Nota | Monto | Cuenta |
|---|---|---|---|
`,C.forEach(r=>{a+=`| ${S(r.fecha,"short")} | ${r.nota||"-"} | ${i(r.monto)} | ${r.cuenta} |
`}),a+=`
`),P){const{nextMonthLabel:r,totalIngresosEstimado:y,totalCuotasSiguiente:T,gastosRecurrentesEstimados:V,margenDisponible:G,cuotas:M}=P,Y=y>0?Math.round(G/y*100):0;a+=`## ðŸš€ ProyecciÃ³n para ${r}

`,a+=`> CuÃ¡nto podÃ©s ahorrar o invertir en ${r}, asumiendo que tus gastos se repiten igual que en ${u}.

`,a+=`| Concepto | Monto |
|---|---|
`,a+=`| + Ingresos esperados *(igual a ${u})* | ${i(y)} |
`,a+=`| âˆ’ Cuotas de tarjeta comprometidas *(${(M==null?void 0:M.length)??0} cuotas)* | ${i(T)} |
`,a+=`| âˆ’ Gastos corrientes estimados *(base: gastos sin cuotas de ${u})* | ${i(V)} |
`,a+=`| **= Lo que podÃ©s ahorrar / invertir** | **${i(G)} (${Y}% del ingreso)** |

`,M&&M.length>0&&(a+=`### Cuotas comprometidas para ${r}

`,a+=`| DescripciÃ³n | Cuota | Monto |
|---|---|---|
`,M.forEach(I=>{a+=`| ${I.nota||"Sin descripciÃ³n"} | ${I.cuota} | ${i(I.monto)} |
`}),a+=`| **Total cuotas** | | **${i(T)}** |

`)}return a+=`## EstadÃ­sticas

`,a+=`- Gasto promedio diario: ${i(E)}
`,L&&(a+=`- DÃ­a mÃ¡s caro: ${S(L.fecha,"short")} (${i(L.total)})
`),a+=`- DÃ­as sin gastos: ${g} de ${N}

`,$&&$.length>0&&(a+=`## Transferencias del Mes

`,a+=`| Fecha | Desde | Hacia | Monto |
|---|---|---|---|
`,$.forEach(r=>{a+=`| ${S(r.fecha,"short")} | ${r.cuentaSaliente} | ${r.cuentaEntrante} | ${i(r.montoSaliente)} |
`}),a+=`
`),A&&A.length>0&&(a+=`## Movimientos del Mes

`,a+=`| Fecha | Tipo | Monto | CategorÃ­a | Cuenta | Nota |
|---|---|---|---|---|---|
`,A.forEach(r=>{const y=r.tipo==="ingreso"?"Ingreso":"Gasto";a+=`| ${S(r.fecha,"short")} | ${y} | ${i(r.monto)} | ${r.categoria||"-"} | ${r.cuenta} | ${r.nota||"-"} |
`}),a+=`
`),a+=`---
*Generado desde CashÃ© el ${O}*
`,a+=`*Para ver grÃ¡ficos, usar "Exportar PDF" en la aplicaciÃ³n*
`,a}function Ne(p,u){const c=new Blob([p],{type:"text/markdown;charset=utf-8"}),o=URL.createObjectURL(c),x=document.createElement("a");x.href=o,x.download=u,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(o)}const te=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function B(p,u,c){if(!p)return!1;const[o,x]=p.split("-").map(Number);return o===u&&x===c+1}function Me(p,u){return new Date(p,u+1,0).getDate()}function oe(p,u){const c={};let o=0;return p.forEach(x=>{const l=x.categoria||"Sin categorÃ­a",n=x.montoPesos||x.monto||0;o+=n,c[l]||(c[l]={value:0,icon:null}),c[l].value+=n}),Object.entries(c).map(([x,l])=>({name:x,value:l.value,percentage:o>0?l.value/o*100:0})).sort((x,l)=>l.value-x.value)}function ne(p,u){const c={};let o=0;p.forEach(l=>{const n=(l.categoria||"Sin categorÃ­a").replace(/^[\p{Emoji}\u200d]+\s*/u,"").trim()||l.categoria||"Sin categorÃ­a",f=l.montoPesos||l.monto||0,m=l.montoDolares||0;o+=f,c[n]||(c[n]={pesos:0,dolares:0}),c[n].pesos+=f,c[n].dolares+=m});const x=o;return Object.entries(c).map(([l,n])=>{const f=n.pesos;return{name:l,value:f,pesos:n.pesos,dolares:n.dolares,percentage:x>0?f/x*100:0,icon:null}}).sort((l,n)=>n.value-l.value).slice(0,10)}function De(){pe();const[p]=ue(),[u,c]=d.useState(!0),[o,x]=d.useState({expenses:[],incomes:[],transfers:[],accounts:[]}),l="ARS",[n,f]=d.useState(()=>{const t=p.get("mes");return t?parseInt(t.split("-")[0]):new Date().getFullYear()}),[m,k]=d.useState(()=>{const t=p.get("mes");return t?parseInt(t.split("-")[1])-1:new Date().getMonth()});d.useEffect(()=>{let t=!1;return c(!0),Promise.all([ge(),ye(),ve(),be()]).then(([s,b,H,ee])=>{t||(x({expenses:(s==null?void 0:s.gastos)||[],incomes:(b==null?void 0:b.ingresos)||[],transfers:(H==null?void 0:H.transferencias)||[],accounts:(ee==null?void 0:ee.accounts)||[]}),c(!1))}).catch(()=>{t||c(!1)}),()=>{t=!0}},[]);const j=`${te[m]} ${n}`,C=m===0?n-1:n,E=m===0?11:m-1,L=`${te[E]} ${C}`,g=d.useMemo(()=>o.expenses.filter(t=>B(t.fecha,n,m)&&!t.isFuture),[o.expenses,n,m]),N=d.useMemo(()=>o.incomes.filter(t=>B(t.fecha,n,m)&&!t.isFuture),[o.incomes,n,m]),$=d.useMemo(()=>o.transfers.filter(t=>B(t.fecha,n,m)&&!t.isFuture),[o.transfers,n,m]),R=d.useMemo(()=>o.expenses.filter(t=>B(t.fecha,C,E)&&!t.isFuture),[o.expenses,C,E]),A=d.useMemo(()=>o.incomes.filter(t=>B(t.fecha,C,E)&&!t.isFuture),[o.incomes,C,E]),v=d.useMemo(()=>N.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[N]),w=d.useMemo(()=>g.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[g]),P=v-w,U=v>0?Math.round(P/v*100):0,i=d.useMemo(()=>A.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[A]),O=d.useMemo(()=>R.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[R]),D=Me(n,m),a=D>0?w/D:0,r=d.useMemo(()=>[...g].sort((t,s)=>s.monto-t.monto).slice(0,5),[g]),y=d.useMemo(()=>g.filter(t=>t.idCompra!==null&&t.idCompra!==void 0),[g]),T=d.useMemo(()=>new Set(g.map(s=>s.fecha)).size,[g]),V=D-T,G=d.useMemo(()=>{const t={};g.forEach(b=>{t[b.fecha]||(t[b.fecha]=0),t[b.fecha]+=b.monto||0});const s=Object.entries(t).sort((b,H)=>H[1]-b[1]);return s.length===0?null:{fecha:s[0][0],total:s[0][1]}},[g]),M=d.useMemo(()=>oe(g),[g,l]),Y=d.useMemo(()=>oe(N),[N,l]),I=d.useMemo(()=>ne(g),[g,l]),K=d.useMemo(()=>ne(N),[N,l]),q=d.useMemo(()=>[...N.map(s=>({...s,tipo:"ingreso"})),...g.map(s=>({...s,tipo:"gasto"}))].sort((s,b)=>s.fecha>b.fecha?-1:1),[N,g]),Q=m===11?n+1:n,X=m===11?0:m+1,W=`${te[X]} ${Q}`,F=d.useMemo(()=>o.expenses.filter(t=>B(t.fecha,Q,X)&&t.idCompra!==null&&t.idCompra!==void 0),[o.expenses,Q,X]),ie=d.useMemo(()=>y.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[y]),J=d.useMemo(()=>F.reduce((t,s)=>t+(s.montoPesos||s.monto||0),0),[F]),Z=w-ie,z=v-J-Z,de=()=>{m===0?(k(11),f(t=>t-1)):k(t=>t-1)},xe=()=>{const t=new Date;n===t.getFullYear()&&m===t.getMonth()||(m===11?(k(0),f(s=>s+1)):k(s=>s+1))},me=()=>{const t=new Date;return n===t.getFullYear()&&m===t.getMonth()},ae=(t,s)=>!s||s===0?null:(t-s)/Math.abs(s)*100,he=()=>{const t={totalIngresos:v,totalGastos:w,balance:P,ahorroRate:U,prevMonthLabel:L,prevTotalIngresos:i,prevTotalGastos:O,gastosPorCategoria:M,ingresosPorCategoria:Y,topGastos:r,gastoDiario:a,diaMasCaro:G,diasSinGastos:V,diasDelMes:D,transferencias:$,cuotasActivas:y,movimientos:q,cuentas:o.accounts,currency:l,proyeccion:{nextMonthLabel:W,totalIngresosEstimado:v,totalCuotasSiguiente:J,gastosRecurrentesEstimados:Z,margenDisponible:z,cuotas:F}},s=je(t,j),b=`cashe-resumen-${n}-${String(m+1).padStart(2,"0")}.md`;Ne(s,b)},h=t=>ce(t,l);return u?e.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:e.jsx(fe,{size:"lg"})}):e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 report-controls",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:de,className:"p-2 rounded-lg hover:bg-[var(--bg-secondary)] transition-colors",style:{color:"var(--text-secondary)"},title:"Mes anterior",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-xl font-bold min-w-[180px] text-center",style:{color:"var(--text-primary)"},children:j}),e.jsx("button",{onClick:xe,disabled:me(),className:"p-2 rounded-lg hover:bg-[var(--bg-secondary)] transition-colors disabled:opacity-30 disabled:cursor-not-allowed",style:{color:"var(--text-secondary)"},title:"Mes siguiente",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("button",{onClick:he,className:"flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Exportar MD"]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Resumen ejecutivo"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(_,{label:"Total ingresos",value:h(v),accent:"var(--accent-green)"}),e.jsx(_,{label:"Total gastos",value:h(w),accent:"var(--accent-red)"}),e.jsx(_,{label:"Balance neto",value:h(P),accent:P>=0?"var(--accent-green)":"var(--accent-red)"}),e.jsx(_,{label:"Tasa de ahorro",value:`${U}%`,accent:"var(--accent-primary)"})]})]}),e.jsxs("div",{className:"report-section rounded-2xl p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-4",style:{color:"var(--text-muted)"},children:["Comparativa vs ",L]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(le,{label:"Ingresos",prev:h(i),actual:h(v),pct:ae(v,i),positiveIsGood:!0}),e.jsx(le,{label:"Gastos",prev:h(O),actual:h(w),pct:ae(w,O),positiveIsGood:!1})]})]}),e.jsxs("div",{className:"report-section rounded-2xl p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-4",style:{color:"var(--text-muted)"},children:"EstadÃ­sticas del mes"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(se,{label:"Gasto diario",value:h(a)}),e.jsx(se,{label:"DÃ­a mÃ¡s caro",value:G?`${S(G.fecha,"short")} â€” ${h(G.total)}`:"â€”"}),e.jsx(se,{label:"DÃ­as sin gastos",value:`${V} de ${D}`})]})]}),(I.length>0||K.length>0)&&e.jsxs("div",{className:"report-section grid grid-cols-1 lg:grid-cols-2 gap-6 print-charts",children:[I.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Gastos por categorÃ­a"}),e.jsx(re,{data:I,loading:!1,currency:l})]}),K.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Ingresos por categorÃ­a"}),e.jsx(re,{data:K,loading:!1,currency:l})]})]}),o.accounts.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Balance por cuenta"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Cuenta"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Saldo actual"})]})}),e.jsx("tbody",{children:o.accounts.filter(t=>!t.ocultaDelBalance).map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nombre}),e.jsx("td",{className:"px-4 py-2.5",style:{color:"var(--text-secondary)"},children:t.tipo}),e.jsx("td",{className:"px-4 py-2.5 text-right font-medium",style:{color:t.balanceActual>=0?"var(--accent-green)":"var(--accent-red)"},children:h(t.balanceActual)})]},t.id))})]})})]}),M.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Gastos por categorÃ­a"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"CategorÃ­a"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"%"})]})}),e.jsx("tbody",{children:M.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.name}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.value)}),e.jsxs("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--text-secondary)"},children:[t.percentage.toFixed(1),"%"]})]},t.name))})]})})]}),Y.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Ingresos por categorÃ­a"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"CategorÃ­a"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"%"})]})}),e.jsx("tbody",{children:Y.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.name}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.value)}),e.jsxs("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--text-secondary)"},children:[t.percentage.toFixed(1),"%"]})]},t.name))})]})})]}),y.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Cuotas activas (",y.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"DescripciÃ³n"}),e.jsx("th",{className:"text-center px-4 py-3 font-medium",children:"Cuotas"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto mensual"})]})}),e.jsx("tbody",{children:y.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nota||"Sin descripciÃ³n"}),e.jsx("td",{className:"px-4 py-2.5 text-center",style:{color:"var(--text-secondary)"},children:t.cuota}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.monto)})]},t.id))})]})})]}),e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["ProyecciÃ³n â€” ",W]}),e.jsxs("div",{className:"rounded-2xl p-5 mb-4 space-y-2",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Ingresos de ",j,e.jsx("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:"(se asume igual al mes actual)"})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-green)"},children:["+ ",h(v)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Cuotas comprometidas en ",W,e.jsxs("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:["(",F.length," cuota",F.length!==1?"s":""," de tarjeta)"]})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-red)"},children:["âˆ’ ",h(J)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Gastos corrientes estimados",e.jsxs("span",{className:"text-xs ml-1.5",style:{color:"var(--text-muted)"},children:["(base: gastos sin cuotas de ",j,")"]})]}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--accent-red)"},children:["âˆ’ ",h(Z)]})]}),e.jsx("div",{className:"pt-2 mt-1",style:{borderTop:"1px solid var(--border-subtle)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:["Lo que podÃ©s ahorrar o invertir en ",W]}),e.jsxs("p",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:["Si tus gastos se repiten igual que en ",j]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:z>0?"var(--accent-green)":"var(--accent-red)"},children:h(z)}),v>0&&e.jsxs("p",{className:"text-xs font-medium mt-0.5",style:{color:z>0?"var(--accent-green)":"var(--accent-red)"},children:[Math.round(z/v*100),"% del ingreso"]})]})]})})]}),F.length>0&&e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"DescripciÃ³n"}),e.jsx("th",{className:"text-center px-4 py-3 font-medium",children:"Cuota"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"})]})}),e.jsxs("tbody",{children:[F.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5",children:t.nota||"Sin descripciÃ³n"}),e.jsx("td",{className:"px-4 py-2.5 text-center",style:{color:"var(--text-secondary)"},children:t.cuota}),e.jsx("td",{className:"px-4 py-2.5 text-right",children:h(t.monto)})]},t.id)),e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",borderTop:"1px solid var(--border-subtle)"},children:[e.jsx("td",{className:"px-4 py-2.5 font-semibold",colSpan:2,style:{color:"var(--text-primary)"},children:"Total cuotas"}),e.jsx("td",{className:"px-4 py-2.5 text-right font-semibold",style:{color:"var(--text-primary)"},children:h(J)})]})]})]})})]}),r.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:"Top 5 gastos del mes"}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Nota"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden sm:table-cell",children:"Cuenta"})]})}),e.jsx("tbody",{children:r.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:S(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2.5 max-w-[200px] truncate",children:t.nota||"â€”"}),e.jsx("td",{className:"px-4 py-2.5 text-right font-medium",style:{color:"var(--accent-red)"},children:h(t.monto)}),e.jsx("td",{className:"px-4 py-2.5 hidden sm:table-cell",style:{color:"var(--text-secondary)"},children:t.cuenta})]},t.id))})]})})]}),$.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Transferencias (",$.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Desde"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Hacia"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"})]})}),e.jsx("tbody",{children:$.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2.5 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:S(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2.5",children:t.cuentaSaliente}),e.jsx("td",{className:"px-4 py-2.5",children:t.cuentaEntrante}),e.jsx("td",{className:"px-4 py-2.5 text-right",style:{color:"var(--accent-blue)"},children:h(t.montoSaliente)})]},t.id))})]})})]}),q.length>0&&e.jsxs("div",{className:"report-section",children:[e.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--text-muted)"},children:["Movimientos del mes (",q.length,")"]}),e.jsx("div",{className:"rounded-2xl overflow-hidden",style:{border:"1px solid var(--border-subtle)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Fecha"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium",children:"Monto"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden sm:table-cell",children:"CategorÃ­a"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden md:table-cell",children:"Cuenta"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium hidden lg:table-cell",children:"Nota"})]})}),e.jsx("tbody",{children:q.map((t,s)=>e.jsxs("tr",{style:{backgroundColor:s%2===0?"var(--bg-primary)":"var(--bg-secondary)",color:"var(--text-primary)"},children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",style:{color:"var(--text-secondary)"},children:S(t.fecha,"short")}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded",style:{backgroundColor:t.tipo==="ingreso"?"var(--accent-green-subtle, rgba(34,197,94,0.1))":"var(--accent-red-subtle, rgba(239,68,68,0.1))",color:t.tipo==="ingreso"?"var(--accent-green)":"var(--accent-red)"},children:t.tipo==="ingreso"?"Ingreso":"Gasto"})}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",style:{color:t.tipo==="ingreso"?"var(--accent-green)":"var(--accent-red)"},children:h(t.monto)}),e.jsx("td",{className:"px-4 py-2 hidden sm:table-cell",style:{color:"var(--text-secondary)"},children:t.categoria||"â€”"}),e.jsx("td",{className:"px-4 py-2 hidden md:table-cell",style:{color:"var(--text-secondary)"},children:t.cuenta}),e.jsx("td",{className:"px-4 py-2 max-w-[200px] truncate hidden lg:table-cell",style:{color:"var(--text-secondary)"},children:t.nota||"â€”"})]},t.id))})]})})]}),q.length===0&&$.length===0&&e.jsxs("div",{className:"text-center py-16",style:{color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("p",{className:"text-sm",children:["No hay movimientos en ",j]})]})]})}function _({label:p,value:u,accent:c}){return e.jsxs("div",{className:"report-section rounded-2xl p-4 lg:p-5",style:{backgroundColor:"var(--bg-secondary)"},children:[e.jsx("p",{className:"text-xs uppercase tracking-wide mb-1",style:{color:"var(--text-muted)"},children:p}),e.jsx("p",{className:"text-xl font-bold",style:{color:c||"var(--text-primary)"},children:u})]})}function le({label:p,prev:u,actual:c,pct:o,positiveIsGood:x}){const l=o===null?"var(--text-secondary)":o>0===x?"var(--accent-green)":"var(--accent-red)";return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:p}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Anterior: ",u]}),e.jsxs("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:["Actual: ",c]}),o!==null&&e.jsxs("p",{className:"text-xs font-medium",style:{color:l},children:[o>=0?"+":"",o.toFixed(1),"%"]})]})]})}function se({label:p,value:u}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:p}),e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:u})]})}export{De as default};
